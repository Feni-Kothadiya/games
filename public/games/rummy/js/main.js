
this.createjs = this.createjs || {}; createjs.extend = function (a, d) { function b() { this.constructor = a } b.prototype = d.prototype; return a.prototype = new b }; this.createjs = this.createjs || {}; createjs.promote = function (a, d) { var b = a.prototype, c = Object.getPrototypeOf && Object.getPrototypeOf(b) || b.__proto__; if (c) { b[(d += "_") + "constructor"] = c.constructor; for (var e in c) b.hasOwnProperty(e) && "function" == typeof c[e] && (b[d + e] = c[e]) } return a }; this.createjs = this.createjs || {};
createjs.deprecate = function (a, d) { return function () { var b = "Deprecated property or method '" + d + "'. See docs for info."; console && (console.warn ? console.warn(b) : console.log(b)); return a && a.apply(this, arguments) } }; this.createjs = this.createjs || {};
(function () {
    function a(b, c, e) { this.type = b; this.currentTarget = this.target = null; this.eventPhase = 0; this.bubbles = !!c; this.cancelable = !!e; this.timeStamp = (new Date).getTime(); this.removed = this.immediatePropagationStopped = this.propagationStopped = this.defaultPrevented = !1 } var d = a.prototype; d.preventDefault = function () { this.defaultPrevented = this.cancelable && !0 }; d.stopPropagation = function () { this.propagationStopped = !0 }; d.stopImmediatePropagation = function () {
        this.immediatePropagationStopped = this.propagationStopped =
            !0
    }; d.remove = function () { this.removed = !0 }; d.clone = function () { return new a(this.type, this.bubbles, this.cancelable) }; d.set = function (b) { for (var c in b) this[c] = b[c]; return this }; d.toString = function () { return "[Event (type=" + this.type + ")]" }; createjs.Event = a
})(); this.createjs = this.createjs || {};
(function () {
    function a() { this._captureListeners = this._listeners = null } var d = a.prototype; a.initialize = function (b) { b.addEventListener = d.addEventListener; b.on = d.on; b.removeEventListener = b.off = d.removeEventListener; b.removeAllEventListeners = d.removeAllEventListeners; b.hasEventListener = d.hasEventListener; b.dispatchEvent = d.dispatchEvent; b._dispatchEvent = d._dispatchEvent; b.willTrigger = d.willTrigger }; d.addEventListener = function (b, c, e) {
        var g = e ? this._captureListeners = this._captureListeners || {} : this._listeners =
            this._listeners || {}; var f = g[b]; f && this.removeEventListener(b, c, e); (f = g[b]) ? f.push(c) : g[b] = [c]; return c
    }; d.on = function (b, c, e, g, f, h) { c.handleEvent && (e = e || c, c = c.handleEvent); e = e || this; return this.addEventListener(b, function (k) { c.call(e, k, f); g && k.remove() }, h) }; d.removeEventListener = function (b, c, e) { if (e = e ? this._captureListeners : this._listeners) { var g = e[b]; if (g) for (var f = 0, h = g.length; f < h; f++)if (g[f] == c) { 1 == h ? delete e[b] : g.splice(f, 1); break } } }; d.off = d.removeEventListener; d.removeAllEventListeners = function (b) {
        b ?
            (this._listeners && delete this._listeners[b], this._captureListeners && delete this._captureListeners[b]) : this._listeners = this._captureListeners = null
    }; d.dispatchEvent = function (b, c, e) {
        if ("string" == typeof b) { var g = this._listeners; if (!(c || g && g[b])) return !0; b = new createjs.Event(b, c, e) } else b.target && b.clone && (b = b.clone()); try { b.target = this } catch (f) { } if (b.bubbles && this.parent) {
            e = this; for (c = [e]; e.parent;)c.push(e = e.parent); g = c.length; for (e = g - 1; 0 <= e && !b.propagationStopped; e--)c[e]._dispatchEvent(b, 1 + (0 == e));
            for (e = 1; e < g && !b.propagationStopped; e++)c[e]._dispatchEvent(b, 3)
        } else this._dispatchEvent(b, 2); return !b.defaultPrevented
    }; d.hasEventListener = function (b) { var c = this._listeners, e = this._captureListeners; return !!(c && c[b] || e && e[b]) }; d.willTrigger = function (b) { for (var c = this; c;) { if (c.hasEventListener(b)) return !0; c = c.parent } return !1 }; d.toString = function () { return "[EventDispatcher]" }; d._dispatchEvent = function (b, c) {
        var e, g, f = 2 >= c ? this._captureListeners : this._listeners; if (b && f && (g = f[b.type]) && (e = g.length)) {
            try {
                b.currentTarget =
                this
            } catch (k) { } try { b.eventPhase = c | 0 } catch (k) { } b.removed = !1; g = g.slice(); for (f = 0; f < e && !b.immediatePropagationStopped; f++) { var h = g[f]; h.handleEvent ? h.handleEvent(b) : h(b); b.removed && (this.off(b.type, h, 1 == c), b.removed = !1) }
        } 2 === c && this._dispatchEvent(b, 2.1)
    }; createjs.EventDispatcher = a
})(); this.createjs = this.createjs || {};
(function () {
    function a() { throw "Ticker cannot be instantiated."; } a.RAF_SYNCHED = "synched"; a.RAF = "raf"; a.TIMEOUT = "timeout"; a.timingMode = null; a.maxDelta = 0; a.paused = !1; a.removeEventListener = null; a.removeAllEventListeners = null; a.dispatchEvent = null; a.hasEventListener = null; a._listeners = null; createjs.EventDispatcher.initialize(a); a._addEventListener = a.addEventListener; a.addEventListener = function () { !a._inited && a.init(); return a._addEventListener.apply(a, arguments) }; a._inited = !1; a._startTime = 0; a._pausedTime =
        0; a._ticks = 0; a._pausedTicks = 0; a._interval = 50; a._lastTime = 0; a._times = null; a._tickTimes = null; a._timerId = null; a._raf = !0; a._setInterval = function (c) { a._interval = c; a._inited && a._setupTick() }; a.setInterval = createjs.deprecate(a._setInterval, "Ticker.setInterval"); a._getInterval = function () { return a._interval }; a.getInterval = createjs.deprecate(a._getInterval, "Ticker.getInterval"); a._setFPS = function (c) { a._setInterval(1E3 / c) }; a.setFPS = createjs.deprecate(a._setFPS, "Ticker.setFPS"); a._getFPS = function () {
            return 1E3 /
                a._interval
        }; a.getFPS = createjs.deprecate(a._getFPS, "Ticker.getFPS"); try { Object.defineProperties(a, { interval: { get: a._getInterval, set: a._setInterval }, framerate: { get: a._getFPS, set: a._setFPS } }) } catch (c) { console.log(c) } a.init = function () { a._inited || (a._inited = !0, a._times = [], a._tickTimes = [], a._startTime = a._getTime(), a._times.push(a._lastTime = 0), a.interval = a._interval) }; a.reset = function () {
            if (a._raf) {
                var c = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame ||
                    window.msCancelAnimationFrame; c && c(a._timerId)
            } else clearTimeout(a._timerId); a.removeAllEventListeners("tick"); a._timerId = a._times = a._tickTimes = null; a._startTime = a._lastTime = a._ticks = a._pausedTime = 0; a._inited = !1
        }; a.getMeasuredTickTime = function (c) { var e = 0, g = a._tickTimes; if (!g || 1 > g.length) return -1; c = Math.min(g.length, c || a._getFPS() | 0); for (var f = 0; f < c; f++)e += g[f]; return e / c }; a.getMeasuredFPS = function (c) {
            var e = a._times; if (!e || 2 > e.length) return -1; c = Math.min(e.length - 1, c || a._getFPS() | 0); return 1E3 / ((e[0] -
                e[c]) / c)
        }; a.getTime = function (c) { return a._startTime ? a._getTime() - (c ? a._pausedTime : 0) : -1 }; a.getEventTime = function (c) { return a._startTime ? (a._lastTime || a._startTime) - (c ? a._pausedTime : 0) : -1 }; a.getTicks = function (c) { return a._ticks - (c ? a._pausedTicks : 0) }; a._handleSynch = function () { a._timerId = null; a._setupTick(); a._getTime() - a._lastTime >= .97 * (a._interval - 1) && a._tick() }; a._handleRAF = function () { a._timerId = null; a._setupTick(); a._tick() }; a._handleTimeout = function () { a._timerId = null; a._setupTick(); a._tick() }; a._setupTick =
            function () { if (null == a._timerId) { var c = a.timingMode; if (c == a.RAF_SYNCHED || c == a.RAF) { var e = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame; if (e) { a._timerId = e(c == a.RAF ? a._handleRAF : a._handleSynch); a._raf = !0; return } } a._raf = !1; a._timerId = setTimeout(a._handleTimeout, a._interval) } }; a._tick = function () {
                var c = a.paused, e = a._getTime(), g = e - a._lastTime; a._lastTime = e; a._ticks++; c && (a._pausedTicks++, a._pausedTime +=
                    g); if (a.hasEventListener("tick")) { var f = new createjs.Event("tick"), h = a.maxDelta; f.delta = h && g > h ? h : g; f.paused = c; f.time = e; f.runTime = e - a._pausedTime; a.dispatchEvent(f) } for (a._tickTimes.unshift(a._getTime() - e); 100 < a._tickTimes.length;)a._tickTimes.pop(); for (a._times.unshift(e); 100 < a._times.length;)a._times.pop()
            }; var d = window, b = d.performance.now || d.performance.mozNow || d.performance.msNow || d.performance.oNow || d.performance.webkitNow; a._getTime = function () {
                return (b && b.call(d.performance) || (new Date).getTime()) -
                    a._startTime
            }; createjs.Ticker = a
})(); this.createjs = this.createjs || {};
(function () {
    function a(b) {
        this.EventDispatcher_constructor(); this.ignoreGlobalPause = !1; this.loop = 0; this.bounce = this.reversed = this.useTicks = !1; this.timeScale = 1; this.position = this.duration = 0; this.rawPosition = -1; this._paused = !0; this._labelList = this._labels = this._parent = this._prev = this._next = null; b && (this.useTicks = !!b.useTicks, this.ignoreGlobalPause = !!b.ignoreGlobalPause, this.loop = !0 === b.loop ? -1 : b.loop || 0, this.reversed = !!b.reversed, this.bounce = !!b.bounce, this.timeScale = b.timeScale || 1, b.onChange && this.addEventListener("change",
            b.onChange), b.onComplete && this.addEventListener("complete", b.onComplete))
    } var d = createjs.extend(a, createjs.EventDispatcher); d._setPaused = function (b) { createjs.Tween._register(this, b); return this }; d.setPaused = createjs.deprecate(d._setPaused, "AbstractTween.setPaused"); d._getPaused = function () { return this._paused }; d.getPaused = createjs.deprecate(d._getPaused, "AbstactTween.getPaused"); d._getCurrentLabel = function (b) {
        var c = this.getLabels(); null == b && (b = this.position); for (var e = 0, g = c.length; e < g && !(b < c[e].position); e++);
        return 0 === e ? null : c[e - 1].label
    }; d.getCurrentLabel = createjs.deprecate(d._getCurrentLabel, "AbstractTween.getCurrentLabel"); try { Object.defineProperties(d, { paused: { set: d._setPaused, get: d._getPaused }, currentLabel: { get: d._getCurrentLabel } }) } catch (b) { } d.advance = function (b, c) { this.setPosition(this.rawPosition + b * this.timeScale, c) }; d.setPosition = function (b, c, e, g) {
        var f = this.duration, h = this.loop, k = this.rawPosition, m = 0; 0 > b && (b = 0); if (0 === f) { var l = !0; if (-1 !== k) return l } else {
            var p = b / f | 0; m = b - p * f; (l = -1 !== h && b >= h *
                f + f) && (b = (m = f) * (p = h) + f); if (b === k) return l; !this.reversed !== !(this.bounce && p % 2) && (m = f - m)
        } this.position = m; this.rawPosition = b; this._updatePosition(e, l); l && (this.paused = !0); g && g(this); c || this._runActions(k, b, e, !e && -1 === k); this.dispatchEvent("change"); l && this.dispatchEvent("complete")
    }; d.calculatePosition = function (b) { var c = this.duration, e = this.loop, g = 0; if (0 === c) return 0; -1 !== e && b >= e * c + c ? (b = c, g = e) : 0 > b ? b = 0 : (g = b / c | 0, b -= g * c); return !this.reversed !== !(this.bounce && g % 2) ? c - b : b }; d.getLabels = function () {
        var b = this._labelList;
        if (!b) { b = this._labelList = []; var c = this._labels, e; for (e in c) b.push({ label: e, position: c[e] }); b.sort(function (g, f) { return g.position - f.position }) } return b
    }; d.setLabels = function (b) { this._labels = b; this._labelList = null }; d.addLabel = function (b, c) { this._labels || (this._labels = {}); this._labels[b] = c; var e = this._labelList; if (e) { for (var g = 0, f = e.length; g < f && !(c < e[g].position); g++); e.splice(g, 0, { label: b, position: c }) } }; d.gotoAndPlay = function (b) { this.paused = !1; this._goto(b) }; d.gotoAndStop = function (b) {
        this.paused =
        !0; this._goto(b)
    }; d.resolve = function (b) { var c = Number(b); isNaN(c) && (c = this._labels && this._labels[b]); return c }; d.toString = function () { return "[AbstractTween]" }; d.clone = function () { throw "AbstractTween can not be cloned."; }; d._init = function (b) { b && b.paused || (this.paused = !1); b && null != b.position && this.setPosition(b.position) }; d._updatePosition = function (b, c) { }; d._goto = function (b) { b = this.resolve(b); null != b && this.setPosition(b, !1, !0) }; d._runActions = function (b, c, e, g) {
        if (this._actionHead || this.tweens) {
            var f = this.duration,
            h = this.reversed, k = this.bounce, m = this.loop, l, p, n; if (0 === f) { var u = l = p = n = 0; h = k = !1 } else u = b / f | 0, l = c / f | 0, p = b - u * f, n = c - l * f; -1 !== m && (l > m && (n = f, l = m), u > m && (p = f, u = m)); if (e) return this._runActionsRange(n, n, e, g); if (u !== l || p !== n || e || g) { -1 === u && (u = p = 0); b = b <= c; c = u; do { m = c === u ? p : b ? 0 : f; var z = c === l ? n : b ? f : 0; !h !== !(k && c % 2) && (m = f - m, z = f - z); if ((!k || c === u || m !== z) && this._runActionsRange(m, z, e, g || c !== u && !k)) return !0; g = !1 } while (b && ++c <= l || !b && --c >= l) }
        }
    }; d._runActionsRange = function (b, c, e, g) { }; createjs.AbstractTween = createjs.promote(a,
        "EventDispatcher")
})(); this.createjs = this.createjs || {};
(function () {
    function a(e, g) { this.AbstractTween_constructor(g); this.pluginData = null; this.target = e; this.passive = !1; this._stepTail = this._stepHead = new d(null, 0, 0, {}, null, !0); this._stepPosition = 0; this._injected = this._pluginIds = this._plugins = this._actionTail = this._actionHead = null; g && (this.pluginData = g.pluginData, g.override && a.removeTweens(e)); this.pluginData || (this.pluginData = {}); this._init(g) } function d(e, g, f, h, k, m) {
        this.next = null; this.prev = e; this.t = g; this.d = f; this.props = h; this.ease = k; this.passive = m; this.index =
            e ? e.index + 1 : 0
    } function b(e, g, f, h, k) { this.next = null; this.prev = e; this.t = g; this.d = 0; this.scope = f; this.funct = h; this.params = k } var c = createjs.extend(a, createjs.AbstractTween); a.IGNORE = {}; a._tweens = []; a._plugins = null; a._tweenHead = null; a._tweenTail = null; a.get = function (e, g) { return new a(e, g) }; a.tick = function (e, g) { for (var f = a._tweenHead; f;) { var h = f._next; g && !f.ignoreGlobalPause || f._paused || f.advance(f.useTicks ? 1 : e); f = h } }; a.handleEvent = function (e) { "tick" === e.type && this.tick(e.delta, e.paused) }; a.removeTweens =
        function (e) { if (e.tweenjs_count) { for (var g = a._tweenHead; g;) { var f = g._next; g.target === e && a._register(g, !0); g = f } e.tweenjs_count = 0 } }; a.removeAllTweens = function () { for (var e = a._tweenHead; e;) { var g = e._next; e._paused = !0; e.target && (e.target.tweenjs_count = 0); e._next = e._prev = null; e = g } a._tweenHead = a._tweenTail = null }; a.hasActiveTweens = function (e) { return e ? !!e.tweenjs_count : !!a._tweenHead }; a._installPlugin = function (e) {
            for (var g = e.priority = e.priority || 0, f = a._plugins = a._plugins || [], h = 0, k = f.length; h < k && !(g < f[h].priority); h++);
            f.splice(h, 0, e)
        }; a._register = function (e, g) { var f = e.target; if (!g && e._paused) f && (f.tweenjs_count = f.tweenjs_count ? f.tweenjs_count + 1 : 1), (f = a._tweenTail) ? (a._tweenTail = f._next = e, e._prev = f) : a._tweenHead = a._tweenTail = e, !a._inited && createjs.Ticker && (createjs.Ticker.addEventListener("tick", a), a._inited = !0); else if (g && !e._paused) { f && f.tweenjs_count--; f = e._next; var h = e._prev; f ? f._prev = h : a._tweenTail = h; h ? h._next = f : a._tweenHead = f; e._next = e._prev = null } e._paused = g }; c.wait = function (e, g) {
            0 < e && this._addStep(+e, this._stepTail.props,
                null, g); return this
        }; c.to = function (e, g, f) { if (null == g || 0 > g) g = 0; g = this._addStep(+g, null, f); this._appendProps(e, g); return this }; c.label = function (e) { this.addLabel(e, this.duration); return this }; c.call = function (e, g, f) { return this._addAction(f || this.target, e, g || [this]) }; c.set = function (e, g) { return this._addAction(g || this.target, this._set, [e]) }; c.play = function (e) { return this._addAction(e || this, this._set, [{ paused: !1 }]) }; c.pause = function (e) { return this._addAction(e || this, this._set, [{ paused: !0 }]) }; c.w = c.wait;
    c.t = c.to; c.c = c.call; c.s = c.set; c.toString = function () { return "[Tween]" }; c.clone = function () { throw "Tween can not be cloned."; }; c._addPlugin = function (e) { var g = this._pluginIds || (this._pluginIds = {}), f = e.ID; if (f && !g[f]) { g[f] = !0; g = this._plugins || (this._plugins = []); f = e.priority || 0; for (var h = 0, k = g.length; h < k; h++)if (f < g[h].priority) { g.splice(h, 0, e); return } g.push(e) } }; c._updatePosition = function (e, g) {
        var f = this._stepHead.next, h = this.position, k = this.duration; if (this.target && f) {
            for (var m = f.next; m && m.t <= h;)f = f.next,
                m = f.next; this._updateTargetProps(f, g ? 0 === k ? 1 : h / k : (h - f.t) / f.d, g)
        } this._stepPosition = f ? h - f.t : 0
    }; c._updateTargetProps = function (e, g, f) { if (!(this.passive = !!e.passive)) { var h, k = e.prev.props, m = e.props; if (h = e.ease) g = h(g, 0, 1, 1); h = this._plugins; var l; a: for (l in k) { var p = k[l]; var n = m[l]; p = p !== n && "number" === typeof p ? p + (n - p) * g : 1 <= g ? n : p; if (h) { n = 0; for (var u = h.length; n < u; n++) { var z = h[n].change(this, e, l, p, g, f); if (z === a.IGNORE) continue a; void 0 !== z && (p = z) } } this.target[l] = p } } }; c._runActionsRange = function (e, g, f, h) {
        var k =
            (f = e > g) ? this._actionTail : this._actionHead, m = g, l = e; f && (m = e, l = g); for (var p = this.position; k;) { var n = k.t; if (n === g || n > l && n < m || h && n === e) if (k.funct.apply(k.scope, k.params), p !== this.position) return !0; k = f ? k.prev : k.next }
    }; c._appendProps = function (e, g, f) {
        var h = this._stepHead.props, k = this.target, m = a._plugins, l, p, n = g.prev, u = n.props, z = g.props || (g.props = this._cloneProps(u)), q = {}; for (l in e) if (e.hasOwnProperty(l) && (q[l] = z[l] = e[l], void 0 === h[l])) {
            var v = void 0; if (m) for (p = m.length - 1; 0 <= p; p--) {
                var A = m[p].init(this, l,
                    v); void 0 !== A && (v = A); if (v === a.IGNORE) { delete z[l]; delete q[l]; break }
            } v !== a.IGNORE && (void 0 === v && (v = k[l]), u[l] = void 0 === v ? null : v)
        } for (l in q) { var w; for (e = n; (w = e) && (e = w.prev);)if (e.props !== w.props) { if (void 0 !== e.props[l]) break; e.props[l] = u[l] } } if (!1 !== f && (m = this._plugins)) for (p = m.length - 1; 0 <= p; p--)m[p].step(this, g, q); if (f = this._injected) this._injected = null, this._appendProps(f, g, !1)
    }; c._injectProp = function (e, g) { (this._injected || (this._injected = {}))[e] = g }; c._addStep = function (e, g, f, h) {
        g = new d(this._stepTail,
            this.duration, e, g, f, h || !1); this.duration += e; return this._stepTail = this._stepTail.next = g
    }; c._addAction = function (e, g, f) { e = new b(this._actionTail, this.duration, e, g, f); this._actionTail ? this._actionTail.next = e : this._actionHead = e; this._actionTail = e; return this }; c._set = function (e) { for (var g in e) this[g] = e[g] }; c._cloneProps = function (e) { var g = {}, f; for (f in e) g[f] = e[f]; return g }; createjs.Tween = createjs.promote(a, "AbstractTween")
})(); this.createjs = this.createjs || {};
(function () {
    function a(b) { if (b instanceof Array || null == b && 1 < arguments.length) { var c = b; var e = arguments[1]; b = arguments[2] } else b && (c = b.tweens, e = b.labels); this.AbstractTween_constructor(b); this.tweens = []; c && this.addTween.apply(this, c); this.setLabels(e); this._init(b) } var d = createjs.extend(a, createjs.AbstractTween); d.addTween = function (b) {
        b._parent && b._parent.removeTween(b); var c = arguments.length; if (1 < c) { for (var e = 0; e < c; e++)this.addTween(arguments[e]); return arguments[c - 1] } if (0 === c) return null; this.tweens.push(b);
        b._parent = this; b.paused = !0; c = b.duration; 0 < b.loop && (c *= b.loop + 1); c > this.duration && (this.duration = c); 0 <= this.rawPosition && b.setPosition(this.rawPosition); return b
    }; d.removeTween = function (b) { var c = arguments.length; if (1 < c) { for (var e = !0, g = 0; g < c; g++)e = e && this.removeTween(arguments[g]); return e } if (0 === c) return !0; c = this.tweens; for (g = c.length; g--;)if (c[g] === b) return c.splice(g, 1), b._parent = null, b.duration >= this.duration && this.updateDuration(), !0; return !1 }; d.updateDuration = function () {
        for (var b = this.duration =
            0, c = this.tweens.length; b < c; b++) { var e = this.tweens[b], g = e.duration; 0 < e.loop && (g *= e.loop + 1); g > this.duration && (this.duration = g) }
    }; d.toString = function () { return "[Timeline]" }; d.clone = function () { throw "Timeline can not be cloned."; }; d._updatePosition = function (b, c) { for (var e = this.position, g = 0, f = this.tweens.length; g < f; g++)this.tweens[g].setPosition(e, !0, b) }; d._runActionsRange = function (b, c, e, g) { for (var f = this.position, h = 0, k = this.tweens.length; h < k; h++)if (this.tweens[h]._runActions(b, c, e, g), f !== this.position) return !0 };
    createjs.Timeline = createjs.promote(a, "AbstractTween")
})(); this.createjs = this.createjs || {};
(function () {
    function a() { throw "Ease cannot be instantiated."; } a.linear = function (d) { return d }; a.none = a.linear; a.get = function (d) { -1 > d ? d = -1 : 1 < d && (d = 1); return function (b) { return 0 == d ? b : 0 > d ? b * (b * -d + 1 + d) : b * ((2 - b) * d + (1 - d)) } }; a.getPowIn = function (d) { return function (b) { return Math.pow(b, d) } }; a.getPowOut = function (d) { return function (b) { return 1 - Math.pow(1 - b, d) } }; a.getPowInOut = function (d) { return function (b) { return 1 > (b *= 2) ? .5 * Math.pow(b, d) : 1 - .5 * Math.abs(Math.pow(2 - b, d)) } }; a.quadIn = a.getPowIn(2); a.quadOut = a.getPowOut(2);
    a.quadInOut = a.getPowInOut(2); a.cubicIn = a.getPowIn(3); a.cubicOut = a.getPowOut(3); a.cubicInOut = a.getPowInOut(3); a.quartIn = a.getPowIn(4); a.quartOut = a.getPowOut(4); a.quartInOut = a.getPowInOut(4); a.quintIn = a.getPowIn(5); a.quintOut = a.getPowOut(5); a.quintInOut = a.getPowInOut(5); a.sineIn = function (d) { return 1 - Math.cos(d * Math.PI / 2) }; a.sineOut = function (d) { return Math.sin(d * Math.PI / 2) }; a.sineInOut = function (d) { return -.5 * (Math.cos(Math.PI * d) - 1) }; a.getBackIn = function (d) { return function (b) { return b * b * ((d + 1) * b - d) } };
    a.backIn = a.getBackIn(1.7); a.getBackOut = function (d) { return function (b) { return --b * b * ((d + 1) * b + d) + 1 } }; a.backOut = a.getBackOut(1.7); a.getBackInOut = function (d) { d *= 1.525; return function (b) { return 1 > (b *= 2) ? .5 * b * b * ((d + 1) * b - d) : .5 * ((b -= 2) * b * ((d + 1) * b + d) + 2) } }; a.backInOut = a.getBackInOut(1.7); a.circIn = function (d) { return -(Math.sqrt(1 - d * d) - 1) }; a.circOut = function (d) { return Math.sqrt(1 - --d * d) }; a.circInOut = function (d) { return 1 > (d *= 2) ? -.5 * (Math.sqrt(1 - d * d) - 1) : .5 * (Math.sqrt(1 - (d -= 2) * d) + 1) }; a.bounceIn = function (d) {
        return 1 -
            a.bounceOut(1 - d)
    }; a.bounceOut = function (d) { return d < 1 / 2.75 ? 7.5625 * d * d : d < 2 / 2.75 ? 7.5625 * (d -= 1.5 / 2.75) * d + .75 : d < 2.5 / 2.75 ? 7.5625 * (d -= 2.25 / 2.75) * d + .9375 : 7.5625 * (d -= 2.625 / 2.75) * d + .984375 }; a.bounceInOut = function (d) { return .5 > d ? .5 * a.bounceIn(2 * d) : .5 * a.bounceOut(2 * d - 1) + .5 }; a.getElasticIn = function (d, b) { var c = 2 * Math.PI; return function (e) { if (0 == e || 1 == e) return e; var g = b / c * Math.asin(1 / d); return -(d * Math.pow(2, 10 * --e) * Math.sin((e - g) * c / b)) } }; a.elasticIn = a.getElasticIn(1, .3); a.getElasticOut = function (d, b) {
        var c = 2 * Math.PI;
        return function (e) { return 0 == e || 1 == e ? e : d * Math.pow(2, -10 * e) * Math.sin((e - b / c * Math.asin(1 / d)) * c / b) + 1 }
    }; a.elasticOut = a.getElasticOut(1, .3); a.getElasticInOut = function (d, b) { var c = 2 * Math.PI; return function (e) { var g = b / c * Math.asin(1 / d); return 1 > (e *= 2) ? -.5 * d * Math.pow(2, 10 * --e) * Math.sin((e - g) * c / b) : d * Math.pow(2, -10 * --e) * Math.sin((e - g) * c / b) * .5 + 1 } }; a.elasticInOut = a.getElasticInOut(1, .3 * 1.5); createjs.Ease = a
})(); this.createjs = this.createjs || {};
(function () {
    function a() { throw "MotionGuidePlugin cannot be instantiated."; } a.priority = 0; a.ID = "MotionGuide"; a.install = function () { createjs.Tween._installPlugin(a); return createjs.Tween.IGNORE }; a.init = function (d, b, c) { "guide" == b && d._addPlugin(a) }; a.step = function (d, b, c) {
        for (var e in c) if ("guide" === e) {
            var g = b.props.guide, f = a._solveGuideData(c.guide, g); g.valid = !f; var h = g.endData; d._injectProp("x", h.x); d._injectProp("y", h.y); if (f || !g.orient) break; g.startOffsetRot = (void 0 === b.prev.props.rotation ? d.target.rotation ||
                0 : b.prev.props.rotation) - g.startData.rotation; if ("fixed" == g.orient) g.endAbsRot = h.rotation + g.startOffsetRot, g.deltaRotation = 0; else { f = void 0 === c.rotation ? d.target.rotation || 0 : c.rotation; h = f - g.endData.rotation - g.startOffsetRot; var k = h % 360; g.endAbsRot = f; switch (g.orient) { case "auto": g.deltaRotation = h; break; case "cw": g.deltaRotation = (k + 360) % 360 + 360 * Math.abs(h / 360 | 0); break; case "ccw": g.deltaRotation = (k - 360) % 360 + -360 * Math.abs(h / 360 | 0) } } d._injectProp("rotation", g.endAbsRot)
        }
    }; a.change = function (d, b, c, e, g, f) {
        if ((e =
            b.props.guide) && b.props !== b.prev.props && e !== b.prev.props.guide) { if ("guide" === c && !e.valid || "x" == c || "y" == c || "rotation" === c && e.orient) return createjs.Tween.IGNORE; a._ratioToPositionData(g, e, d.target) }
    }; a.debug = function (d, b, c) {
        d = d.guide || d; var e = a._findPathProblems(d); e && console.error("MotionGuidePlugin Error found: \n" + e); if (!b) return e; var g, f = d.path, h = f.length; b.save(); b.lineCap = "round"; b.lineJoin = "miter"; b.beginPath(); b.moveTo(f[0], f[1]); for (g = 2; g < h; g += 4)b.quadraticCurveTo(f[g], f[g + 1], f[g + 2], f[g +
            3]); b.strokeStyle = "black"; b.lineWidth = 4.5; b.stroke(); b.strokeStyle = "white"; b.lineWidth = 3; b.stroke(); b.closePath(); f = c.length; if (c && f) { h = {}; var k = {}; a._solveGuideData(d, h); for (g = 0; g < f; g++)h.orient = "fixed", a._ratioToPositionData(c[g], h, k), b.beginPath(), b.moveTo(k.x, k.y), b.lineTo(k.x + 9 * Math.cos(.0174533 * k.rotation), k.y + 9 * Math.sin(.0174533 * k.rotation)), b.strokeStyle = "black", b.lineWidth = 4.5, b.stroke(), b.strokeStyle = "red", b.lineWidth = 3, b.stroke(), b.closePath() } b.restore(); return e
    }; a._solveGuideData = function (d,
        b) {
            var c; if (c = a.debug(d)) return c; var e = b.path = d.path; b.orient = d.orient; b.subLines = []; b.totalLength = 0; b.startOffsetRot = 0; b.deltaRotation = 0; b.startData = { ratio: 0 }; b.endData = { ratio: 1 }; b.animSpan = 1; var g = e.length, f, h = {}; var k = e[0]; var m = e[1]; for (c = 2; c < g; c += 4) {
                var l = e[c]; var p = e[c + 1]; var n = e[c + 2]; var u = e[c + 3]; var z = { weightings: [], estLength: 0, portion: 0 }, q = k; var v = m; for (f = 1; 10 >= f; f++)a._getParamsForCurve(k, m, l, p, n, u, f / 10, !1, h), q = h.x - q, v = h.y - v, v = Math.sqrt(q * q + v * v), z.weightings.push(v), z.estLength += v, q = h.x,
                    v = h.y; b.totalLength += z.estLength; for (f = 0; 10 > f; f++)v = z.estLength, z.weightings[f] /= v; b.subLines.push(z); k = n; m = u
            } v = b.totalLength; e = b.subLines.length; for (c = 0; c < e; c++)b.subLines[c].portion = b.subLines[c].estLength / v; c = isNaN(d.start) ? 0 : d.start; e = isNaN(d.end) ? 1 : d.end; a._ratioToPositionData(c, b, b.startData); a._ratioToPositionData(e, b, b.endData); b.startData.ratio = c; b.endData.ratio = e; b.animSpan = b.endData.ratio - b.startData.ratio
    }; a._ratioToPositionData = function (d, b, c) {
        var e = b.subLines, g, f = 0, h = d * b.animSpan + b.startData.ratio;
        var k = e.length; for (g = 0; g < k; g++) { var m = e[g].portion; if (f + m >= h) { var l = g; break } f += m } void 0 === l && (l = k - 1, f -= m); e = e[l].weightings; var p = m; k = e.length; for (g = 0; g < k; g++) { m = e[g] * p; if (f + m >= h) break; f += m } l = 4 * l + 2; k = b.path; a._getParamsForCurve(k[l - 2], k[l - 1], k[l], k[l + 1], k[l + 2], k[l + 3], g / 10 + (h - f) / m * .1, b.orient, c); b.orient && (c.rotation = .99999 <= d && 1.00001 >= d && void 0 !== b.endAbsRot ? b.endAbsRot : c.rotation + (b.startOffsetRot + d * b.deltaRotation)); return c
    }; a._getParamsForCurve = function (d, b, c, e, g, f, h, k, m) {
        var l = 1 - h; m.x = l * l * d +
            2 * l * h * c + h * h * g; m.y = l * l * b + 2 * l * h * e + h * h * f; k && (m.rotation = 57.2957795 * Math.atan2((e - b) * l + (f - e) * h, (c - d) * l + (g - c) * h))
    }; a._findPathProblems = function (d) {
        var b = d.path, c = b && b.length || 0; if (6 > c || (c - 2) % 4) return "\tCannot parse 'path' array due to invalid number of entries in path. There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\nOnly [ " + (c + " ] values found. Expected: " + Math.max(4 *
            Math.ceil((c - 2) / 4) + 2, 6)); for (var e = 0; e < c; e++)if (isNaN(b[e])) return "All data in path array must be numeric"; b = d.start; if (isNaN(b) && void 0 !== b) return "'start' out of bounds. Expected 0 to 1, got: " + b; b = d.end; if (isNaN(b) && void 0 !== b) return "'end' out of bounds. Expected 0 to 1, got: " + b; if ((d = d.orient) && "fixed" != d && "auto" != d && "cw" != d && "ccw" != d) return 'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: ' + d
    }; createjs.MotionGuidePlugin = a
})(); this.createjs = this.createjs || {};
(function () { var a = createjs.TweenJS = createjs.TweenJS || {}; a.version = "1.0.0"; a.buildDate = "Thu, 14 Sep 2017 19:47:47 GMT" })();
!function () {
    var a = "undefined" != typeof window && void 0 !== window.document ? window.document : {}, d = "undefined" != typeof module && module.exports, b = function () {
        for (var g, f = ["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "), "webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "), "webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
        "mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "), "msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")], h = 0, k = f.length, m = {}; h < k; h++)if ((g = f[h]) && g[1] in a) { for (h = 0; h < g.length; h++)m[f[0][h]] = g[h]; return m } return !1
    }(), c = { change: b.fullscreenchange, error: b.fullscreenerror }, e = {
        request: function (g) {
            return new Promise(function (f, h) {
                var k = function () {
                    this.off("change",
                        k); f()
                }.bind(this); this.on("change", k); g = g || a.documentElement; Promise.resolve(g[b.requestFullscreen]())["catch"](h)
            }.bind(this))
        }, exit: function () { return new Promise(function (g, f) { if (this.isFullscreen) { var h = function () { this.off("change", h); g() }.bind(this); this.on("change", h); Promise.resolve(a[b.exitFullscreen]())["catch"](f) } else g() }.bind(this)) }, toggle: function (g) { return this.isFullscreen ? this.exit() : this.request(g) }, onchange: function (g) { this.on("change", g) }, onerror: function (g) { this.on("error", g) },
        on: function (g, f) { var h = c[g]; h && a.addEventListener(h, f, !1) }, off: function (g, f) { var h = c[g]; h && a.removeEventListener(h, f, !1) }, raw: b
    }; b ? (Object.defineProperties(e, { isFullscreen: { get: function () { return !!a[b.fullscreenElement] } }, element: { enumerable: !0, get: function () { return a[b.fullscreenElement] } }, isEnabled: { enumerable: !0, get: function () { return !!a[b.fullscreenEnabled] } } }), d ? module.exports = e : window.screenfull = e) : d ? module.exports = { isEnabled: !1 } : window.screenfull = { isEnabled: !1 }
}();
(function () {
    function a(w) { w = String(w); return w.charAt(0).toUpperCase() + w.slice(1) } function d(w, G) { var C = -1, x = w ? w.length : 0; if ("number" == typeof x && -1 < x && x <= u) for (; ++C < x;)G(w[C], C, w); else c(w, G) } function b(w) { w = String(w).replace(/^ +| +$/g, ""); return /^(?:webOS|i(?:OS|P))/.test(w) ? w : a(w) } function c(w, G) { for (var C in w) q.call(w, C) && G(w[C], C, w) } function e(w) { return null == w ? a(w) : v.call(w).slice(8, -1) } function g(w, G) {
        var C = null != w ? typeof w[G] : "number"; return !/^(?:boolean|number|string|undefined)$/.test(C) &&
            ("object" == C ? !!w[G] : !0)
    } function f(w) { return String(w).replace(/([ -])(?!$)/g, "$1?") } function h(w, G) { var C = null; d(w, function (x, r) { C = G(C, x, r, w) }); return C } function k(w) {
        function G(U) {
            return h(U, function (P, O) {
                var X = O.pattern || f(O); !P && (P = RegExp("\\b" + X + " *\\d+[.\\w_]*", "i").exec(w) || RegExp("\\b" + X + " *\\w+-[\\w]*", "i").exec(w) || RegExp("\\b" + X + "(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)", "i").exec(w)) && ((P = String(O.label && !RegExp(X, "i").test(O.label) ? O.label : P).split("/"))[1] && !/[\d.]+/.test(P[0]) && (P[0] +=
                    " " + P[1]), O = O.label || O, P = b(P[0].replace(RegExp(X, "i"), O).replace(RegExp("; *(?:" + O + "[_-])?", "i"), " ").replace(RegExp("(" + O + ")[-_.]?(\\w)", "i"), "$1 $2"))); return P
            })
        } function C(U) { return h(U, function (P, O) { return P || (RegExp(O + "(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)", "i").exec(w) || 0)[1] || null }) } var x = l, r = w && "object" == typeof w && "String" != e(w); r && (x = w, w = null); var H = x.navigator || {}, B = H.userAgent || ""; w || (w = B); var R = r ? !!H.likeChrome : /\bChrome\b/.test(w) && !/internal|\n/i.test(v.toString()),
            y = r ? "Object" : "ScriptBridgingProxyObject", D = r ? "Object" : "Environment", E = r && x.java ? "JavaPackage" : e(x.java), J = r ? "Object" : "RuntimeObject"; D = (E = /\bJava/.test(E) && x.java) && e(x.environment) == D; var S = E ? "a" : "\u03b1", T = E ? "b" : "\u03b2", Q = x.document || {}, K = x.operamini || x.opera, Z = z.test(Z = r && K ? K["[[Class]]"] : e(K)) ? Z : K = null, t, N = w; r = []; var V = null, W = w == B; B = W && K && "function" == typeof K.version && K.version(); var M = function (U) {
                return h(U, function (P, O) {
                    return P || RegExp("\\b" + (O.pattern || f(O)) + "\\b", "i").exec(w) && (O.label ||
                        O)
                })
            }([{ label: "EdgeHTML", pattern: "Edge" }, "Trident", { label: "WebKit", pattern: "AppleWebKit" }, "iCab", "Presto", "NetFront", "Tasman", "KHTML", "Gecko"]), F = function (U) { return h(U, function (P, O) { return P || RegExp("\\b" + (O.pattern || f(O)) + "\\b", "i").exec(w) && (O.label || O) }) }(["Adobe AIR", "Arora", "Avant Browser", "Breach", "Camino", "Electron", "Epiphany", "Fennec", "Flock", "Galeon", "GreenBrowser", "iCab", "Iceweasel", "K-Meleon", "Konqueror", "Lunascape", "Maxthon", { label: "Microsoft Edge", pattern: "Edge" }, "Midori", "Nook Browser",
                "PaleMoon", "PhantomJS", "Raven", "Rekonq", "RockMelt", { label: "Samsung Internet", pattern: "SamsungBrowser" }, "SeaMonkey", { label: "Silk", pattern: "(?:Cloud9|Silk-Accelerated)" }, "Sleipnir", "SlimBrowser", { label: "SRWare Iron", pattern: "Iron" }, "Sunrise", "Swiftfox", "Waterfox", "WebPositive", "Opera Mini", { label: "Opera Mini", pattern: "OPiOS" }, "Opera", { label: "Opera", pattern: "OPR" }, "Chrome", { label: "Chrome Mobile", pattern: "(?:CriOS|CrMo)" }, { label: "Firefox", pattern: "(?:Firefox|Minefield)" }, { label: "Firefox for iOS", pattern: "FxiOS" },
                { label: "IE", pattern: "IEMobile" }, { label: "IE", pattern: "MSIE" }, "Safari"]), L = G([{ label: "BlackBerry", pattern: "BB10" }, "BlackBerry", { label: "Galaxy S", pattern: "GT-I9000" }, { label: "Galaxy S2", pattern: "GT-I9100" }, { label: "Galaxy S3", pattern: "GT-I9300" }, { label: "Galaxy S4", pattern: "GT-I9500" }, { label: "Galaxy S5", pattern: "SM-G900" }, { label: "Galaxy S6", pattern: "SM-G920" }, { label: "Galaxy S6 Edge", pattern: "SM-G925" }, { label: "Galaxy S7", pattern: "SM-G930" }, { label: "Galaxy S7 Edge", pattern: "SM-G935" }, "Google TV", "Lumia", "iPad",
                    "iPod", "iPhone", "Kindle", { label: "Kindle Fire", pattern: "(?:Cloud9|Silk-Accelerated)" }, "Nexus", "Nook", "PlayBook", "PlayStation Vita", "PlayStation", "TouchPad", "Transformer", { label: "Wii U", pattern: "WiiU" }, "Wii", "Xbox One", { label: "Xbox 360", pattern: "Xbox" }, "Xoom"]), Y = function (U) { return h(U, function (P, O, X) { return P || (O[L] || O[/^[a-z]+(?: +[a-z]+\b)*/i.exec(L)] || RegExp("\\b" + f(X) + "(?:\\b|\\w*\\d)", "i").exec(w)) && X }) }({
                        Apple: { iPad: 1, iPhone: 1, iPod: 1 }, Archos: {}, Amazon: { Kindle: 1, "Kindle Fire": 1 }, Asus: { Transformer: 1 },
                        "Barnes & Noble": { Nook: 1 }, BlackBerry: { PlayBook: 1 }, Google: { "Google TV": 1, Nexus: 1 }, HP: { TouchPad: 1 }, HTC: {}, LG: {}, Microsoft: { Xbox: 1, "Xbox One": 1 }, Motorola: { Xoom: 1 }, Nintendo: { "Wii U": 1, Wii: 1 }, Nokia: { Lumia: 1 }, Samsung: { "Galaxy S": 1, "Galaxy S2": 1, "Galaxy S3": 1, "Galaxy S4": 1 }, Sony: { PlayStation: 1, "PlayStation Vita": 1 }
                    }), I = function (U) {
                        return h(U, function (P, O) {
                            var X = O.pattern || f(O); if (!P && (P = RegExp("\\b" + X + "(?:/[\\d.]+|[ \\w.]*)", "i").exec(w))) {
                                var aa = P, ba = O.label || O, ca = {
                                    "10.0": "10", "6.4": "10 Technical Preview",
                                    "6.3": "8.1", "6.2": "8", "6.1": "Server 2008 R2 / 7", "6.0": "Server 2008 / Vista", "5.2": "Server 2003 / XP 64-bit", "5.1": "XP", "5.01": "2000 SP1", "5.0": "2000", "4.0": "NT", "4.90": "ME"
                                }; X && ba && /^Win/i.test(aa) && !/^Windows Phone /i.test(aa) && (ca = ca[/[\d.]+$/.exec(aa)]) && (aa = "Windows " + ca); aa = String(aa); X && ba && (aa = aa.replace(RegExp(X, "i"), ba)); P = aa = b(aa.replace(/ ce$/i, " CE").replace(/\bhpw/i, "web").replace(/\bMacintosh\b/, "Mac OS").replace(/_PowerPC\b/i, " OS").replace(/\b(OS X) [^ \d]+/i, "$1").replace(/\bMac (OS X)\b/,
                                    "$1").replace(/\/(\d)/, " $1").replace(/_/g, ".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i, "").replace(/\bx86\.64\b/gi, "x86_64").replace(/\b(Windows Phone) OS\b/, "$1").replace(/\b(Chrome OS \w+) [\d.]+\b/, "$1").split(" on ")[0])
                            } return P
                        })
                    }(["Windows Phone", "Android", "CentOS", { label: "Chrome OS", pattern: "CrOS" }, "Debian", "Fedora", "FreeBSD", "Gentoo", "Haiku", "Kubuntu", "Linux Mint", "OpenBSD", "Red Hat", "SuSE", "Ubuntu", "Xubuntu", "Cygwin", "Symbian OS", "hpwOS", "webOS ", "webOS", "Tablet OS", "Tizen", "Linux", "Mac OS X",
                        "Macintosh", "Mac", "Windows 98;", "Windows "]); M && (M = [M]); Y && !L && (L = G([Y])); if (t = /\bGoogle TV\b/.exec(L)) L = t[0]; /\bSimulator\b/i.test(w) && (L = (L ? L + " " : "") + "Simulator"); "Opera Mini" == F && /\bOPiOS\b/.test(w) && r.push("running in Turbo/Uncompressed mode"); "IE" == F && /\blike iPhone OS\b/.test(w) ? (t = k(w.replace(/like iPhone OS/, "")), Y = t.manufacturer, L = t.product) : /^iP/.test(L) ? (F || (F = "Safari"), I = "iOS" + ((t = / OS ([\d_]+)/i.exec(w)) ? " " + t[1].replace(/_/g, ".") : "")) : "Konqueror" != F || /buntu/i.test(I) ? Y && "Google" != Y &&
                            (/Chrome/.test(F) && !/\bMobile Safari\b/i.test(w) || /\bVita\b/.test(L)) || /\bAndroid\b/.test(I) && /^Chrome/.test(F) && /\bVersion\//i.test(w) ? (F = "Android Browser", I = /\bAndroid\b/.test(I) ? I : "Android") : "Silk" == F ? (/\bMobi/i.test(w) || (I = "Android", r.unshift("desktop mode")), /Accelerated *= *true/i.test(w) && r.unshift("accelerated")) : "PaleMoon" == F && (t = /\bFirefox\/([\d.]+)\b/.exec(w)) ? r.push("identifying as Firefox " + t[1]) : "Firefox" == F && (t = /\b(Mobile|Tablet|TV)\b/i.exec(w)) ? (I || (I = "Firefox OS"), L || (L = t[1])) : !F ||
                                (t = !/\bMinefield\b/i.test(w) && /\b(?:Firefox|Safari)\b/.exec(F)) ? (F && !L && /[\/,]|^[^(]+?\)/.test(w.slice(w.indexOf(t + "/") + 8)) && (F = null), (t = L || Y || I) && (L || Y || /\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(I)) && (F = /[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(I) ? I : t) + " Browser")) : "Electron" == F && (t = (/\bChrome\/([\d.]+)\b/.exec(w) || 0)[1]) && r.push("Chromium " + t) : I = "Kubuntu"; B || (B = C(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))", "Version", f(F),
                                    "(?:Firefox|Minefield|NetFront)"])); if (t = "iCab" == M && 3 < parseFloat(B) && "WebKit" || /\bOpera\b/.test(F) && (/\bOPR\b/.test(w) ? "Blink" : "Presto") || /\b(?:Midori|Nook|Safari)\b/i.test(w) && !/^(?:Trident|EdgeHTML)$/.test(M) && "WebKit" || !M && /\bMSIE\b/i.test(w) && ("Mac OS" == I ? "Tasman" : "Trident") || "WebKit" == M && /\bPlayStation\b(?! Vita\b)/i.test(F) && "NetFront") M = [t]; "IE" == F && (t = (/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(w) || 0)[1]) ? (F += " Mobile", I = "Windows Phone " + (/\+$/.test(t) ? t : t + ".x"), r.unshift("desktop mode")) : /\bWPDesktop\b/i.test(w) ?
                                        (F = "IE Mobile", I = "Windows Phone 8.x", r.unshift("desktop mode"), B || (B = (/\brv:([\d.]+)/.exec(w) || 0)[1])) : "IE" != F && "Trident" == M && (t = /\brv:([\d.]+)/.exec(w)) && (F && r.push("identifying as " + F + (B ? " " + B : "")), F = "IE", B = t[1]); if (W) {
                                            if (g(x, "global")) if (E && (t = E.lang.System, N = t.getProperty("os.arch"), I = I || t.getProperty("os.name") + " " + t.getProperty("os.version")), D) {
                                                try { B = x.require("ringo/engine").version.join("."), F = "RingoJS" } catch (U) { (t = x.system) && t.global.system == x.system && (F = "Narwhal", I || (I = t[0].os || null)) } F ||
                                                    (F = "Rhino")
                                            } else "object" == typeof x.process && !x.process.browser && (t = x.process) && ("object" == typeof t.versions && ("string" == typeof t.versions.electron ? (r.push("Node " + t.versions.node), F = "Electron", B = t.versions.electron) : "string" == typeof t.versions.nw && (r.push("Chromium " + B, "Node " + t.versions.node), F = "NW.js", B = t.versions.nw)), F || (F = "Node.js", N = t.arch, I = t.platform, B = (B = /[\d.]+/.exec(t.version)) ? B[0] : null)); else e(t = x.runtime) == y ? (F = "Adobe AIR", I = t.flash.system.Capabilities.os) : e(t = x.phantom) == J ? (F = "PhantomJS",
                                                B = (t = t.version || null) && t.major + "." + t.minor + "." + t.patch) : "number" == typeof Q.documentMode && (t = /\bTrident\/(\d+)/i.exec(w)) ? (B = [B, Q.documentMode], (t = +t[1] + 4) != B[1] && (r.push("IE " + B[1] + " mode"), M && (M[1] = ""), B[1] = t), B = "IE" == F ? String(B[1].toFixed(1)) : B[0]) : "number" == typeof Q.documentMode && /^(?:Chrome|Firefox)\b/.test(F) && (r.push("masking as " + F + " " + B), F = "IE", B = "11.0", M = ["Trident"], I = "Windows"); I = I && b(I)
                                        } B && (t = /(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(B) || /(?:alpha|beta)(?: ?\d)?/i.exec(w + ";" + (W && H.appMinorVersion)) ||
                                            /\bMinefield\b/i.test(w) && "a") && (V = /b/i.test(t) ? "beta" : "alpha", B = B.replace(RegExp(t + "\\+?$"), "") + ("beta" == V ? T : S) + (/\d+\+?/.exec(t) || "")); if ("Fennec" == F || "Firefox" == F && /\b(?:Android|Firefox OS)\b/.test(I)) F = "Firefox Mobile"; else if ("Maxthon" == F && B) B = B.replace(/\.[\d.]+/, ".x"); else if (/\bXbox\b/i.test(L)) "Xbox 360" == L && (I = null), "Xbox 360" == L && /\bIEMobile\b/.test(w) && r.unshift("mobile mode"); else if (!/^(?:Chrome|IE|Opera)$/.test(F) && (!F || L || /Browser|Mobi/.test(F)) || "Windows CE" != I && !/Mobi/i.test(w)) if ("IE" ==
                                                F && W) try { null === x.external && r.unshift("platform preview") } catch (U) { r.unshift("embedded") } else (/\bBlackBerry\b/.test(L) || /\bBB10\b/.test(w)) && (t = (RegExp(L.replace(/ +/g, " *") + "/([.\\d]+)", "i").exec(w) || 0)[1] || B) ? (t = [t, /BB10/.test(w)], I = (t[1] ? (L = null, Y = "BlackBerry") : "Device Software") + " " + t[0], B = null) : this != c && "Wii" != L && (W && K || /Opera/.test(F) && /\b(?:MSIE|Firefox)\b/i.test(w) || "Firefox" == F && /\bOS X (?:\d+\.){2,}/.test(I) || "IE" == F && (I && !/^Win/.test(I) && 5.5 < B || /\bWindows XP\b/.test(I) && 8 < B || 8 == B && !/\bTrident\b/.test(w))) &&
                                                    !z.test(t = k.call(c, w.replace(z, "") + ";")) && t.name && (t = "ing as " + t.name + ((t = t.version) ? " " + t : ""), z.test(F) ? (/\bIE\b/.test(t) && "Mac OS" == I && (I = null), t = "identify" + t) : (t = "mask" + t, F = Z ? b(Z.replace(/([a-z])([A-Z])/g, "$1 $2")) : "Opera", /\bIE\b/.test(t) && (I = null), W || (B = null)), M = ["Presto"], r.push(t)); else F += " Mobile"; if (t = (/\bAppleWebKit\/([\d.]+\+?)/i.exec(w) || 0)[1]) {
                                                        t = [parseFloat(t.replace(/\.(\d)$/, ".0$1")), t]; if ("Safari" == F && "+" == t[1].slice(-1)) F = "WebKit Nightly", V = "alpha", B = t[1].slice(0, -1); else if (B ==
                                                            t[1] || B == (t[2] = (/\bSafari\/([\d.]+\+?)/i.exec(w) || 0)[1])) B = null; t[1] = (/\bChrome\/([\d.]+)/i.exec(w) || 0)[1]; 537.36 == t[0] && 537.36 == t[2] && 28 <= parseFloat(t[1]) && "WebKit" == M && (M = ["Blink"]); W && (R || t[1]) ? (M && (M[1] = "like Chrome"), t = t[1] || (t = t[0], 530 > t ? 1 : 532 > t ? 2 : 532.05 > t ? 3 : 533 > t ? 4 : 534.03 > t ? 5 : 534.07 > t ? 6 : 534.1 > t ? 7 : 534.13 > t ? 8 : 534.16 > t ? 9 : 534.24 > t ? 10 : 534.3 > t ? 11 : 535.01 > t ? 12 : 535.02 > t ? "13+" : 535.07 > t ? 15 : 535.11 > t ? 16 : 535.19 > t ? 17 : 536.05 > t ? 18 : 536.1 > t ? 19 : 537.01 > t ? 20 : 537.11 > t ? "21+" : 537.13 > t ? 23 : 537.18 > t ? 24 : 537.24 > t ? 25 : 537.36 >
                                                                t ? 26 : "Blink" != M ? "27" : "28")) : (M && (M[1] = "like Safari"), t = (t = t[0], 400 > t ? 1 : 500 > t ? 2 : 526 > t ? 3 : 533 > t ? 4 : 534 > t ? "4+" : 535 > t ? 5 : 537 > t ? 6 : 538 > t ? 7 : 601 > t ? 8 : "8")); M && (M[1] += " " + (t += "number" == typeof t ? ".x" : /[.+]/.test(t) ? "" : "+")); "Safari" == F && (!B || 45 < parseInt(B)) && (B = t)
                                                    } "Opera" == F && (t = /\bzbov|zvav$/.exec(I)) ? (F += " ", r.unshift("desktop mode"), "zvav" == t ? (F += "Mini", B = null) : F += "Mobile", I = I.replace(RegExp(" *" + t + "$"), "")) : "Safari" == F && /\bChrome\b/.exec(M && M[1]) && (r.unshift("desktop mode"), F = "Chrome Mobile", B = null, /\bOS X\b/.test(I) ?
                                                        (Y = "Apple", I = "iOS 4.3+") : I = null); B && 0 == B.indexOf(t = /[\d.]+$/.exec(I)) && -1 < w.indexOf("/" + t + "-") && (I = String(I.replace(t, "")).replace(/^ +| +$/g, "")); M && !/\b(?:Avant|Nook)\b/.test(F) && (/Browser|Lunascape|Maxthon/.test(F) || "Safari" != F && /^iOS/.test(I) && /\bSafari\b/.test(M[1]) || /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(F) && M[1]) && (t = M[M.length - 1]) && r.push(t); r.length && (r = ["(" + r.join("; ") + ")"]); Y && L && 0 > L.indexOf(Y) && r.push("on " + Y); L && r.push((/^on /.test(r[r.length -
                                                            1]) ? "" : "on ") + L); if (I) { var da = (t = / ([\d.+]+)$/.exec(I)) && "/" == I.charAt(I.length - t[0].length - 1); I = { architecture: 32, family: t && !da ? I.replace(t[0], "") : I, version: t ? t[1] : null, toString: function () { var U = this.version; return this.family + (U && !da ? " " + U : "") + (64 == this.architecture ? " 64-bit" : "") } } } (t = /\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(N)) && !/\bi686\b/i.test(N) ? (I && (I.architecture = 64, I.family = I.family.replace(RegExp(" *" + t), "")), F && (/\bWOW64\b/i.test(w) || W && /\w(?:86|32)$/.test(H.cpuClass || H.platform) && !/\bWin64; x64\b/i.test(w)) &&
                                                                r.unshift("32-bit")) : I && /^OS X/.test(I.family) && "Chrome" == F && 39 <= parseFloat(B) && (I.architecture = 64); w || (w = null); x = {}; x.description = w; x.layout = M && M[0]; x.manufacturer = Y; x.name = F; x.prerelease = V; x.product = L; x.ua = w; x.version = F && B; x.os = I || { architecture: null, family: null, version: null, toString: function () { return "null" } }; x.parse = k; x.toString = function () { return this.description || "" }; x.version && r.unshift(B); x.name && r.unshift(F); I && F && (I != String(I).split(" ")[0] || I != F.split(" ")[0] && !L) && r.push(L ? "(" + I + ")" : "on " +
                                                                    I); r.length && (x.description = r.join(" ")); return x
    } var m = { "function": !0, object: !0 }, l = m[typeof window] && window || this, p = m[typeof exports] && exports; m = m[typeof module] && module && !module.nodeType && module; var n = p && m && "object" == typeof global && global; !n || n.global !== n && n.window !== n && n.self !== n || (l = n); var u = Math.pow(2, 53) - 1, z = /\bOpera/; n = Object.prototype; var q = n.hasOwnProperty, v = n.toString, A = k(); "function" == typeof define && "object" == typeof define.amd && define.amd ? (l.platform = A, define(function () { return A })) : p &&
        m ? c(A, function (w, G) { p[G] = w }) : l.platform = A
}).call(this);
function buildIOSMeta() { for (var a = [{ name: "viewport", content: "width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" }, { name: "apple-mobile-web-app-capable", content: "yes" }, { name: "apple-mobile-web-app-status-bar-style", content: "black" }], d = 0; d < a.length; d++) { var b = document.createElement("meta"); b.name = a[d].name; b.content = a[d].content; var c = window.document.head.querySelector('meta[name="' + b.name + '"]'); c && c.parentNode.removeChild(c); window.document.head.appendChild(b) } }
function hideIOSFullscreenPanel() { document.querySelector(".xxx-ios-fullscreen-message").style.display = "none"; document.querySelector(".xxx-ios-fullscreen-scroll").style.display = "none"; document.querySelector(".xxx-game-iframe-full").classList.remove("xxx-game-iframe-iphone-se") } function buildIOSFullscreenPanel() { document.body.insertAdjacentHTML("beforeend", '<div class="xxx-ios-fullscreen-message"><div class="xxx-ios-fullscreen-swipe"></div></div><div class="xxx-ios-fullscreen-scroll"></div>') }
function showIOSFullscreenPanel() { document.querySelector(".xxx-ios-fullscreen-message").style.display = "none"; document.querySelector(".xxx-ios-fullscreen-scroll").style.display = "none" }
function __iosResize() {
    window.scrollTo(0, 0); console.log(window.devicePixelRatio); console.log(window.innerWidth); console.log(window.innerHeight); if ("iPhone" === platform.product) switch (window.devicePixelRatio) {
        case 2: switch (window.innerWidth) {
            case 568: 320 !== window.innerHeight && document.querySelector(".xxx-game-iframe-full").classList.add("xxx-game-iframe-iphone-se"); break; case 667: 375 === window.innerHeight ? hideIOSFullscreenPanel() : showIOSFullscreenPanel(); break; case 808: 414 === window.innerHeight ? hideIOSFullscreenPanel() :
                showIOSFullscreenPanel(); break; default: hideIOSFullscreenPanel()
        }break; case 3: switch (window.innerWidth) { case 736: 414 === window.innerHeight ? hideIOSFullscreenPanel() : showIOSFullscreenPanel(); break; case 724: 375 === window.innerHeight ? hideIOSFullscreenPanel() : showIOSFullscreenPanel(); break; case 808: 414 === window.innerHeight ? hideIOSFullscreenPanel() : showIOSFullscreenPanel(); break; default: hideIOSFullscreenPanel() }break; default: hideIOSFullscreenPanel()
    }
}
function iosResize() { __iosResize(); setTimeout(function () { __iosResize() }, 500) } function iosInIframe() { try { return window.self !== window.top } catch (a) { return !0 } } function isIOSLessThen13() { var a = platform.os, d = a.family.toLowerCase(); a = parseFloat(a.version); return "ios" === d && 13 > a ? !0 : !1 } document.addEventListener("DOMContentLoaded", function () { platform && "iPhone" === platform.product && "safari" === platform.name.toLowerCase() && isIOSLessThen13() && !iosInIframe() && (buildIOSFullscreenPanel(), buildIOSMeta()) });
window.addEventListener("resize", function (a) { platform && "iPhone" === platform.product && "safari" === platform.name.toLowerCase() && isIOSLessThen13() && !iosInIframe() && iosResize() }); var s_bLandscape = !0, s_iScaleFactor = 1, s_bIsIphone = !1, s_iOffsetX, s_iOffsetY;
(function (a) {
    (jQuery.browser = jQuery.browser || {}).mobile = /android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
        4))
})(navigator.userAgent || navigator.vendor || window.opera); $(window).resize(function () { sizeHandler() }); function trace(a) { console.log(a) } function isIpad() { var a = -1 !== navigator.userAgent.toLowerCase().indexOf("ipad"); return !a && navigator.userAgent.match(/Mac/) && navigator.maxTouchPoints && 2 < navigator.maxTouchPoints ? !0 : a } function isMobile() { return isIpad() ? !0 : jQuery.browser.mobile } function isChrome() { return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor) }
function isIOS() { var a = "iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";"); if (-1 !== navigator.userAgent.toLowerCase().indexOf("iphone")) return s_bIsIphone = !0; for (; a.length;)if (navigator.platform === a.pop()) return !0; return s_bIsIphone = !1 }
function getSize(a) {
    var d = a.toLowerCase(), b = window.document, c = b.documentElement; if (void 0 === window["inner" + a]) a = c["client" + a]; else if (window["inner" + a] != c["client" + a]) {
        var e = b.createElement("body"); e.id = "vpw-test-b"; e.style.cssText = "overflow:scroll"; var g = b.createElement("div"); g.id = "vpw-test-d"; g.style.cssText = "position:absolute;top:-1000px"; g.innerHTML = "<style>@media(" + d + ":" + c["client" + a] + "px){body#vpw-test-b div#vpw-test-d{" + d + ":7px!important}}</style>"; e.appendChild(g); c.insertBefore(e, b.head);
        a = 7 == g["offset" + a] ? c["client" + a] : window["inner" + a]; c.removeChild(e)
    } else a = window["inner" + a]; return a
} window.addEventListener("orientationchange", onOrientationChange); function onOrientationChange() { window.matchMedia("(orientation: portrait)").matches && sizeHandler(); window.matchMedia("(orientation: landscape)").matches && sizeHandler() } function getIOSWindowHeight() { return document.documentElement.clientWidth / window.innerWidth * window.innerHeight }
function getHeightOfIOSToolbars() { var a = (0 === window.orientation ? screen.height : screen.width) - getIOSWindowHeight(); return 1 < a ? a : 0 }
function sizeHandler() {
    window.scrollTo(0, 1); if ($("#canvas")) {
        var a = "safari" === platform.name.toLowerCase() ? getIOSWindowHeight() : getSize("Height"); var d = getSize("Width"), b = Math.min(a / CANVAS_HEIGHT, d / CANVAS_WIDTH); d > a ? (EDGEBOARD_X = 0, EDGEBOARD_Y = 570, s_bLandscape = !0) : (EDGEBOARD_X = 470, EDGEBOARD_Y = 0, s_bLandscape = !1); var c = Math.round(CANVAS_WIDTH * b); b = Math.round(CANVAS_HEIGHT * b); if (b < a) { var e = a - b; b += e; c += CANVAS_WIDTH / CANVAS_HEIGHT * e } else c < d && (e = d - c, c += e, b += CANVAS_HEIGHT / CANVAS_WIDTH * e); e = a / 2 - b / 2; var g = d /
            2 - c / 2, f = CANVAS_WIDTH / c; if (g * f < -EDGEBOARD_X || e * f < -EDGEBOARD_Y) b = Math.min(a / (CANVAS_HEIGHT - 2 * EDGEBOARD_Y), d / (CANVAS_WIDTH - 2 * EDGEBOARD_X)), c = Math.round(CANVAS_WIDTH * b), b = Math.round(CANVAS_HEIGHT * b), e = (a - b) / 2, g = (d - c) / 2, f = CANVAS_WIDTH / c; s_iOffsetX = -1 * g * f; s_iOffsetY = -1 * e * f; 0 <= e && (s_iOffsetY = 0); 0 <= g && (s_iOffsetX = 0); null !== s_oGame && s_oGame.refreshButtonPos(); null !== s_oMenu && s_oMenu.refreshButtonPos(); null !== s_oSelectPanel && s_oSelectPanel.refreshButtonPos(); s_bIsIphone && s_oStage ? (canvas = document.getElementById("canvas"),
                s_oStage.canvas.width = 2 * c, s_oStage.canvas.height = 2 * b, canvas.style.width = c + "px", canvas.style.height = b + "px", s_iScaleFactor = 2 * Math.min(c / CANVAS_WIDTH, b / CANVAS_HEIGHT), s_oStage.scaleX = s_oStage.scaleY = s_iScaleFactor) : s_bMobile || isChrome() ? ($("#canvas").css("width", c + "px"), $("#canvas").css("height", b + "px")) : s_oStage && (s_oStage.canvas.width = c, s_oStage.canvas.height = b, s_iScaleFactor = Math.min(c / CANVAS_WIDTH, b / CANVAS_HEIGHT), s_oStage.scaleX = s_oStage.scaleY = s_iScaleFactor); 0 > e || (e = (a - b) / 2); $("#canvas").css("top",
                    e + "px"); $("#canvas").css("left", g + "px"); fullscreenHandler()
    }
} function createBitmap(a, d, b) { var c = new createjs.Bitmap(a), e = new createjs.Shape; d && b ? e.graphics.beginFill("#fff").drawRect(0, 0, d, b) : e.graphics.beginFill("#ff0").drawRect(0, 0, a.width, a.height); c.hitArea = e; return c } function createSprite(a, d, b, c, e, g) { a = null !== d ? new createjs.Sprite(a, d) : new createjs.Sprite(a); d = new createjs.Shape; d.graphics.beginFill("#000000").drawRect(-b, -c, e, g); a.hitArea = d; return a }
function randomFloatBetween(a, d, b) { "undefined" === typeof b && (b = 2); return parseFloat(Math.min(a + Math.random() * (d - a), d).toFixed(b)) } function rotateVector2D(a, d) { var b = d.getX() * Math.cos(a) + d.getY() * Math.sin(a), c = d.getX() * -Math.sin(a) + d.getY() * Math.cos(a); d.set(b, c) } function tweenVectorsOnX(a, d, b) { return a + b * (d - a) } this.tweenVectors = function (a, d, b) { var c = new CVector2; c.set(a.getX() + b * (d.getX() - a.getX()), a.getY() + b * (d.getY() - a.getY())); return c };
function shuffle(a) { for (var d = a.length, b, c; 0 !== d;)c = Math.floor(Math.random() * d), --d, b = a[d], a[d] = a[c], a[c] = b; return a } function bubbleSort(a) { do { var d = !1; for (var b = 0; b < a.length - 1; b++)a[b] > a[b + 1] && (d = a[b], a[b] = a[b + 1], a[b + 1] = d, d = !0) } while (d) } function compare(a, d) { return a.index > d.index ? -1 : a.index < d.index ? 1 : 0 } function easeLinear(a, d, b, c) { return b * a / c + d } function easeInQuad(a, d, b, c) { return b * (a /= c) * a + d } function easeInSine(a, d, b, c) { return -b * Math.cos(a / c * (Math.PI / 2)) + b + d }
function easeInCubic(a, d, b, c) { return b * (a /= c) * a * a + d } function getTrajectoryPoint(a, d) { var b = new createjs.Point, c = (1 - a) * (1 - a), e = a * a; b.x = c * d.start.x + 2 * (1 - a) * a * d.traj.x + e * d.end.x; b.y = c * d.start.y + 2 * (1 - a) * a * d.traj.y + e * d.end.y; return b } function formatTime(a) { a /= 1E3; var d = Math.floor(a / 60); a = Math.floor(a - 60 * d); var b = ""; b = 10 > d ? b + ("0" + d + ":") : b + (d + ":"); return 10 > a ? b + ("0" + a) : b + a } function degreesToRadians(a) { return a * Math.PI / 180 }
function checkRectCollision(a, d) { var b = getBounds(a, .9); var c = getBounds(d, .98); return calculateIntersection(b, c) } function distance(a, d) { return Math.sqrt((d.x - a.x) * (d.x - a.x) + (d.y - a.y) * (d.y - a.y)) } function collisionWithCircle(a, d, b) { var c = a.getX() - d.getX(); a = a.getY() - d.getY(); return Math.sqrt(c * c + a * a) < PLAYER_RADIUS * b + CELL_SIZE * b ? !0 : !1 }
function calculateIntersection(a, d) { var b, c, e, g; var f = a.x + (b = a.width / 2); var h = a.y + (c = a.height / 2); var k = d.x + (e = d.width / 2); var m = d.y + (g = d.height / 2); f = Math.abs(f - k) - (b + e); h = Math.abs(h - m) - (c + g); return 0 > f && 0 > h ? (f = Math.min(Math.min(a.width, d.width), -f), h = Math.min(Math.min(a.height, d.height), -h), { x: Math.max(a.x, d.x), y: Math.max(a.y, d.y), width: f, height: h, rect1: a, rect2: d }) : null }
function getBounds(a, d) {
    var b = { x: Infinity, y: Infinity, width: 0, height: 0 }; if (a instanceof createjs.Container) { b.x2 = -Infinity; b.y2 = -Infinity; var c = a.children, e = c.length, g; for (g = 0; g < e; g++) { var f = getBounds(c[g], 1); f.x < b.x && (b.x = f.x); f.y < b.y && (b.y = f.y); f.x + f.width > b.x2 && (b.x2 = f.x + f.width); f.y + f.height > b.y2 && (b.y2 = f.y + f.height) } Infinity == b.x && (b.x = 0); Infinity == b.y && (b.y = 0); Infinity == b.x2 && (b.x2 = 0); Infinity == b.y2 && (b.y2 = 0); b.width = b.x2 - b.x; b.height = b.y2 - b.y; delete b.x2; delete b.y2 } else {
        if (a instanceof createjs.Bitmap) {
            e =
            a.sourceRect || a.image; g = e.width * d; var h = e.height * d
        } else if (a instanceof createjs.Sprite) if (a.spriteSheet._frames && a.spriteSheet._frames[a.currentFrame] && a.spriteSheet._frames[a.currentFrame].image) { e = a.spriteSheet.getFrame(a.currentFrame); g = e.rect.width; h = e.rect.height; c = e.regX; var k = e.regY } else b.x = a.x || 0, b.y = a.y || 0; else b.x = a.x || 0, b.y = a.y || 0; c = c || 0; g = g || 0; k = k || 0; h = h || 0; b.regX = c; b.regY = k; e = a.localToGlobal(0 - c, 0 - k); f = a.localToGlobal(g - c, h - k); g = a.localToGlobal(g - c, 0 - k); c = a.localToGlobal(0 - c, h - k); b.x =
            Math.min(Math.min(Math.min(e.x, f.x), g.x), c.x); b.y = Math.min(Math.min(Math.min(e.y, f.y), g.y), c.y); b.width = Math.max(Math.max(Math.max(e.x, f.x), g.x), c.x) - b.x; b.height = Math.max(Math.max(Math.max(e.y, f.y), g.y), c.y) - b.y
    } return b
} function NoClickDelay(a) { this.element = a; window.Touch && this.element.addEventListener("touchstart", this, !1) } function shuffle(a) { for (var d = a.length, b, c; 0 < d;)c = Math.floor(Math.random() * d), d--, b = a[d], a[d] = a[c], a[c] = b; return a }
NoClickDelay.prototype = {
    handleEvent: function (a) { switch (a.type) { case "touchstart": this.onTouchStart(a); break; case "touchmove": this.onTouchMove(a); break; case "touchend": this.onTouchEnd(a) } }, onTouchStart: function (a) { a.preventDefault(); this.moved = !1; this.element.addEventListener("touchmove", this, !1); this.element.addEventListener("touchend", this, !1) }, onTouchMove: function (a) { this.moved = !0 }, onTouchEnd: function (a) {
        this.element.removeEventListener("touchmove", this, !1); this.element.removeEventListener("touchend",
            this, !1); if (!this.moved) { a = document.elementFromPoint(a.changedTouches[0].clientX, a.changedTouches[0].clientY); 3 == a.nodeType && (a = a.parentNode); var d = document.createEvent("MouseEvents"); d.initEvent("click", !0, !0); a.dispatchEvent(d) }
    }
};
(function () {
    function a(b) { var c = { focus: "visible", focusin: "visible", pageshow: "visible", blur: "hidden", focusout: "hidden", pagehide: "hidden" }; b = b || window.event; b.type in c ? document.body.className = c[b.type] : (document.body.className = this[d] ? "hidden" : "visible", "hidden" === document.body.className ? s_oMain.stopUpdate() : s_oMain.startUpdate()) } var d = "hidden"; d in document ? document.addEventListener("visibilitychange", a) : (d = "mozHidden") in document ? document.addEventListener("mozvisibilitychange", a) : (d = "webkitHidden") in
        document ? document.addEventListener("webkitvisibilitychange", a) : (d = "msHidden") in document ? document.addEventListener("msvisibilitychange", a) : "onfocusin" in document ? document.onfocusin = document.onfocusout = a : window.onpageshow = window.onpagehide = window.onfocus = window.onblur = a
})(); function ctlArcadeResume() { null !== s_oMain && s_oMain.startUpdate() } function ctlArcadePause() { null !== s_oMain && s_oMain.stopUpdate() }
function getParamValue(a) { for (var d = window.location.search.substring(1).split("&"), b = 0; b < d.length; b++) { var c = d[b].split("="); if (c[0] == a) return c[1] } } function playSound(a, d, b) { return !1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile ? (s_aSounds[a].play(), s_aSounds[a].volume(d), s_aSounds[a].loop(b), s_aSounds[a]) : null } function stopSound(a) { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || s_aSounds[a].stop() } function setVolume(a, d) { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || s_aSounds[a].volume(d) }
function setMute(a, d) { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || s_aSounds[a].mute(d) } function fullscreenHandler() { ENABLE_FULLSCREEN && screenfull.isEnabled && (s_bFullscreen = screenfull.isFullscreen, null !== s_oInterface && s_oInterface.resetFullscreenBut(), null !== s_oMenu && s_oMenu.resetFullscreenBut(), null !== s_oSelectPanel && s_oSelectPanel.resetFullscreenBut()) }
if (screenfull.isEnabled) screenfull.on("change", function () { s_bFullscreen = screenfull.isFullscreen; null !== s_oInterface && s_oInterface.resetFullscreenBut(); null !== s_oMenu && s_oMenu.resetFullscreenBut(); null !== s_oSelectPanel && s_oSelectPanel.resetFullscreenBut() }); function compareRank(a, d) { return a.rank < d.rank ? -1 : a.rank > d.rank ? 1 : 0 } function printCards(a) { console.log("START PRINT"); for (var d = 0; d < a.length; d++)console.log(d + "----\x3e" + a[d].getValue() + " suit " + a[d].getSuit()); console.log("END PRINT") }
function CSpriteLibrary() {
    var abc = "";

    var a = {}, d, b, c, e, g, f; this.init = function (h, k, m) { d = {}; c = b = 0; e = h; g = k; f = m }; this.addSprite = function (h, k) { if (!a.hasOwnProperty(h)) { var m = new Image; a[h] = d[h] = { szPath: k, oSprite: m, bLoaded: !1 }; b++ } }; this.getSprite = function (h) { return a.hasOwnProperty(h) ? a[h].oSprite : null }; this._onSpritesLoaded = function () { b = 0; g.call(f) }; this._onSpriteLoaded = function () { e.call(f); ++c === b && this._onSpritesLoaded() }; this.loadSprites = function () {
        for (var h in d){
            abc += d[h].szPath + ","
            d[h].oSprite.oSpriteLibrary = this, d[h].oSprite.szKey =
            h, d[h].oSprite.onload = function () { this.oSpriteLibrary.setLoaded(this.szKey); this.oSpriteLibrary._onSpriteLoaded(this.szKey) }, d[h].oSprite.onerror = function (k) { var m = k.currentTarget; setTimeout(function () { d[m.szKey].oSprite.src = d[m.szKey].szPath }, 500) }, d[h].oSprite.src = d[h].szPath
        } abc;
    }; this.setLoaded = function (h) { a[h].bLoaded = !0 }; this.isLoaded = function (h) { return a[h].bLoaded }; this.getNumSprites = function () { return b }
}
var CANVAS_WIDTH = 1920, CANVAS_HEIGHT = 1920, EDGEBOARD_X = 0, EDGEBOARD_Y = 0, FONT = "futura_t_otregular", ENABLE_FULLSCREEN, SOUNDTRACK_VOLUME_IN_GAME = .1, FPS = 30, DISABLE_SOUND_MOBILE = !1, STATE_LOADING = 0, STATE_MENU = 1, STATE_MODE = 2, STATE_GAME = 3, ON_MOUSE_DOWN = 0, ON_MOUSE_UP = 1, ON_MOUSE_OVER = 2, ON_MOUSE_OUT = 3, ON_BUT_YES_DOWN = 4, ON_BUT_NO_DOWN = 5, ON_BACK_MENU = 6, ON_RESTART = 7, ON_NEXT = 8, ON_CARD_ANIMATION_ENDING = 9, ON_CARD_MOVE_UP_END = 10, ON_CARD_MOVE_X_END = 11, ON_CARD_SHOWN = 12, ON_CARD_SWAP = 13, ON_CARD_DRAGGING = 14, ON_CARD_RELEASE =
    15, ON_CARD_END_SCALE = 16, ON_DECK_RELEASE = 17, ON_SELECT_COMBO = 18, CARD_STATE_DEALING = 0, CARD_DECK = 0, CARD_WASTE = 1, CARD_HAND = 2, CARD_TABLE = 3, CARD_WIDTH = 234, CARD_HEIGHT = 358, CARD_WIDTH_OFFSET_IN_HAND = 100, CARD_HEIGHT_OFFSET_IN_HAND = 100, TABLE_X = 150 + CARD_WIDTH / 2, TABLE_Y = 150 + CARD_HEIGHT / 2, TIME_CARD_DEALING = 200, TIME_CARD_MOVE_Y = 500, TIME_HELP_PLAYER = 3E4, MAX_TABLE_WIDTH = 1400, MAX_TABLE_HEIGHT = 1400, CARD_TO_DEAL = {}, CARD_MOVE_UP_OFFSET = 160, CARD_CPU_MOVE_UP_OFFSET = 80, SCORE_TO_REACH = {}, PLAYER_ID = 0, ACE_VALUE = 1, JOKER_VALUE =
        15, TIME_HAND_ANIM = 4E3, MIN_OPENING_VALUE, SCORE_ACE, SCORE_JOKER, JOKER_AVAILABLE, ACE_HIGH, GOING_RUMMY_RULE, MAX_NUM_SHUFFLE = 3, EVALUATE_POKER = 0, EVALUATE_TRIS = 1, EVALUATE_STRAIGHT = 2, EVALUATE_STRAIGHT_WITH_ACE_HIGH = 3, EVALUATE_UNDER_CONSTRUCTION = 4, EVALUATE_REPLACE_JOKER = 5, EVALUATE_NULL = 6, EVALUATE_CARD_NO_VALID_IN_COMBO = 7, STATE_AI_IDLE = 0, STATE_AI_READY_TO_START = 1, STATE_AI_CHECKED_WASTE = 2, STATE_AI_CARD_DEALING = 3, STATE_AI_CHECKED_COMBO = 4, STATE_AI_CHECKED_CARD_TABLE = 5, STATE_AI_DECIDE_CARD_WASTE = 6, SCOREBOARD_IDLE =
        "state_idle", SCOREBOARD_WIN_ROUND = "state_win_round", SCOREBOARD_WIN_GAME = "state_win_game", SCOREBOARD_LOSE_ROUND = "state_lose_round";

        var abcd="";

function CMain(a) {
    var d, b = 0, c = 0, e = STATE_LOADING, g, f; this.initContainer = function () {
        s_oCanvas = document.getElementById("canvas"); s_oStage = new createjs.Stage(s_oCanvas); s_oStage.preventSelection = !1; s_bMobile = isMobile(); !1 === s_bMobile ? s_oStage.enableMouseOver(20) : createjs.Touch.enable(s_oStage, !0); s_iPrevTime = (new Date).getTime(); createjs.Ticker.addEventListener("tick", this._update); createjs.Ticker.framerate = FPS; navigator.userAgent.match(/Windows Phone/i) && (DISABLE_SOUND_MOBILE = !0); s_oSpriteLibrary = new CSpriteLibrary;
        g = new CPreloader
    }; this.preloaderReady = function () { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || this._initSounds(); this._loadImages(); d = !0 }; this.soundLoaded = function () { b++; g.refreshLoader(Math.floor(b / c * 100)) }; this._initSounds = function () {
        Howler.mute(!s_bAudioActive); s_aSoundsInfo = []; s_aSoundsInfo.push({ path: "sounds/", filename: "card_dealing", loop: !1, volume: 1, ingamename: "card_dealing" }); s_aSoundsInfo.push({
            path: "sounds/",
            filename: "click", loop: !1, volume: 1, ingamename: "click"
        }); s_aSoundsInfo.push({ path: "sounds/", filename: "alert", loop: !1, volume: 1, ingamename: "alert" }); s_aSoundsInfo.push({ path: "sounds/", filename: "round_over", loop: !1, volume: 1, ingamename: "round_over" }); s_aSoundsInfo.push({ path: "sounds/", filename: "rummy", loop: !1, volume: 1, ingamename: "rummy" }); s_aSoundsInfo.push({ path: "sounds/", filename: "show_card", loop: !1, volume: 1, ingamename: "show_card" }); s_aSoundsInfo.push({
            path: "sounds/", filename: "win", loop: !1,
            volume: 1, ingamename: "win"
        }); s_aSoundsInfo.push({ path: "sounds/", filename: "drop", loop: !1, volume: 1, ingamename: "drop" }); s_aSoundsInfo.push({ path: "sounds/", filename: "soundtrack", loop: !0, volume: 1, ingamename: "soundtrack" }); c += s_aSoundsInfo.length; s_aSounds = []; for (var k = 0; k < s_aSoundsInfo.length; k++)this.tryToLoadSound(s_aSoundsInfo[k], !1)
    }; this.tryToLoadSound = function (k, m) {
        abcd+=k.path+k.filename+".mp3,";
        setTimeout(function () {
            s_aSounds[k.ingamename] = new Howl({
                src: [k.path + k.filename + ".mp3"], autoplay: !1, preload: !0, loop: k.loop, volume: k.volume,
                onload: s_oMain.soundLoaded, onloaderror: function (l, p) { for (var n = 0; n < s_aSoundsInfo.length; n++)if (l === s_aSounds[s_aSoundsInfo[n].ingamename]._sounds[0]._id) { s_oMain.tryToLoadSound(s_aSoundsInfo[n], !0); break } }, onplayerror: function (l) {
                    for (var p = 0; p < s_aSoundsInfo.length; p++)if (l === s_aSounds[s_aSoundsInfo[p].ingamename]._sounds[0]._id) {
                        s_aSounds[s_aSoundsInfo[p].ingamename].once("unlock", function () {
                            s_aSounds[s_aSoundsInfo[p].ingamename].play(); "soundtrack" === s_aSoundsInfo[p].ingamename && null !== s_oGame &&
                                setVolume("soundtrack", SOUNDTRACK_VOLUME_IN_GAME)
                        }); break
                    }
                }
            })
        }, m ? 200 : 0)
    }; this._loadImages = function () {
        s_oSpriteLibrary.init(this._onImagesLoaded, this._onAllImagesLoaded, this); s_oSpriteLibrary.addSprite("but_play", "sprites/but_play.png"); s_oSpriteLibrary.addSprite("but_home", "sprites/but_home.png"); s_oSpriteLibrary.addSprite("but_restart", "sprites/but_restart.png"); s_oSpriteLibrary.addSprite("msg_box", "sprites/msg_box.png"); s_oSpriteLibrary.addSprite("bg_menu", "sprites/bg_menu.jpg"); s_oSpriteLibrary.addSprite("bg_game",
            "sprites/bg_game.jpg"); s_oSpriteLibrary.addSprite("but_exit", "sprites/but_exit.png"); s_oSpriteLibrary.addSprite("audio_icon", "sprites/audio_icon.png"); s_oSpriteLibrary.addSprite("but_credits", "sprites/but_credits.png"); s_oSpriteLibrary.addSprite("but_fullscreen", "sprites/but_fullscreen.png"); s_oSpriteLibrary.addSprite("ctl_logo", "sprites/ctl_logo.png"); s_oSpriteLibrary.addSprite("but_yes", "sprites/but_yes.png"); s_oSpriteLibrary.addSprite("but_no", "sprites/but_no.png"); s_oSpriteLibrary.addSprite("but_next",
                "sprites/but_next.png"); s_oSpriteLibrary.addSprite("but_help", "sprites/but_help.png"); s_oSpriteLibrary.addSprite("but_settings", "sprites/but_settings.png"); s_oSpriteLibrary.addSprite("but_shuffle", "sprites/but_shuffle.png"); s_oSpriteLibrary.addSprite("waste_pile", "sprites/waste_pile.png"); s_oSpriteLibrary.addSprite("attach_card", "sprites/attach_card.png"); s_oSpriteLibrary.addSprite("hand_anim", "sprites/hand_anim.png"); s_oSpriteLibrary.addSprite("but_p2", "sprites/but_p2.png"); s_oSpriteLibrary.addSprite("but_p3",
                    "sprites/but_p3.png"); s_oSpriteLibrary.addSprite("but_p4", "sprites/but_p4.png"); s_oSpriteLibrary.addSprite("bg_select", "sprites/bg_select.jpg"); s_oSpriteLibrary.addSprite("bg_nick", "sprites/bg_nick.png"); s_oSpriteLibrary.addSprite("row_scoreboard", "sprites/row_scoreboard.png"); s_oSpriteLibrary.addSprite("msg_box_wide", "sprites/msg_box_wide.png"); s_oSpriteLibrary.addSprite("header_scoreboard", "sprites/header_scoreboard.png"); s_oSpriteLibrary.addSprite("arrow_left", "sprites/arrow_left.png");
        s_oSpriteLibrary.addSprite("arrow_right", "sprites/arrow_right.png"); s_oSpriteLibrary.addSprite("hand_swipe", "sprites/hand_swipe.png"); s_oSpriteLibrary.addSprite("card_shadow", "sprites/cards/card_shadow.png"); s_oSpriteLibrary.addSprite("double_icon", "sprites/double_icon.png"); s_oSpriteLibrary.addSprite("but_exit_credits", "sprites/but_exit_credits.png"); s_oSpriteLibrary.addSprite("msg_box_scoreboard", "sprites/msg_box_scoreboard.png"); for (var k = 0; 55 > k; k++)s_oSpriteLibrary.addSprite("card_" +
            k, "sprites/cards/card_" + k + ".png"); for (k = 1; 60 > k; k++)s_oSpriteLibrary.addSprite("rummy_anim_" + k, "sprites/rummy_anim/rummy_anim_" + k + ".png"); c += s_oSpriteLibrary.getNumSprites(); s_oSpriteLibrary.loadSprites()
    }; this._onImagesLoaded = function () { b++; g.refreshLoader(Math.floor(b / c * 100)) }; this._onRemovePreloader = function () { g.unload(); s_oSoundTrack = playSound("soundtrack", 1, !0); this.gotoMenu() }; this._onAllImagesLoaded = function () { }; this.onAllPreloaderImagesLoaded = function () { this._loadImages() }; this.gotoMenu =
        function () { new CMenu; e = STATE_MENU }; this.gotoSelectPanel = function () { new CSelectNumPlayersPanel; e = STATE_MODE }; this.gotoGame = function () { f = new CGame; e = STATE_GAME }; this.stopUpdateNoBlock = function () { d = !1; createjs.Ticker.paused = !0 }; this.startUpdateNoBlock = function () { s_iPrevTime = (new Date).getTime(); d = !0; createjs.Ticker.paused = !1 }; this.stopUpdate = function () { d = !1; createjs.Ticker.paused = !0; $("#block_game").css("display", "block"); !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || Howler.mute(!0) }; this.startUpdate = function () {
            s_iPrevTime =
            (new Date).getTime(); d = !0; createjs.Ticker.paused = !1; $("#block_game").css("display", "none"); (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) && s_bAudioActive && Howler.mute(!1)
        }; this._update = function (k) { if (!1 !== d) { var m = (new Date).getTime(); s_iTimeElaps = m - s_iPrevTime; s_iCntTime += s_iTimeElaps; s_iCntFps++; s_iPrevTime = m; 1E3 <= s_iCntTime && (s_iCurFps = s_iCntFps, s_iCntTime -= 1E3, s_iCntFps = 0); e === STATE_GAME && f.update(); s_oStage.update(k) } }; s_oMain = this; for (var h = 2; 5 > h; h++)CARD_TO_DEAL["player_" + h] = a["num_cards_for_" +
            h + "_players"], 4 > CARD_TO_DEAL["player_" + h] ? CARD_TO_DEAL["player_" + h] = 4 : 13 < CARD_TO_DEAL["player_" + h] && (CARD_TO_DEAL["player_" + h] = 13); JOKER_AVAILABLE = a.joker_available; SCORE_TO_REACH.player_2 = a.score_to_reach_for_2_players; SCORE_TO_REACH.player_3 = a.score_to_reach_for_3_players; SCORE_TO_REACH.player_4 = a.score_to_reach_for_4_players; SCORE_ACE = a.score_ace; SCORE_JOKER = a.score_joker; ACE_HIGH = a.ace_high; GOING_RUMMY_RULE = a.going_rummy_rule; MIN_OPENING_VALUE = a.min_point_for_opening; ENABLE_FULLSCREEN = a.fullscreen;
    s_bAudioActive = a.audio_enable_on_startup; this.initContainer()
} var s_bMobile, s_bAudioActive = !1, s_iCntTime = 0, s_iTimeElaps = 0, s_iPrevTime = 0, s_iCntFps = 0, s_iCurFps = 0, s_oStage, s_oMain, s_oSpriteLibrary, s_aSounds, s_aSoundsInfo, s_oSoundTrack = null, s_oCanvas, s_bFullscreen = !1, s_oGameSettings, s_iNumPlayers, s_aPlayerNames;
function CPreloader() {
    var a, d, b, c, e, g, f, h, k; this._init = function () { s_oSpriteLibrary.init(this._onImagesLoaded, this._onAllImagesLoaded, this); s_oSpriteLibrary.addSprite("progress_bar", "sprites/progress_bar.png"); s_oSpriteLibrary.addSprite("200x200", "sprites/200x200.jpg"); s_oSpriteLibrary.loadSprites(); k = new createjs.Container; s_oStage.addChild(k) }; this.unload = function () { k.removeAllChildren() }; this._onImagesLoaded = function () { }; this._onAllImagesLoaded = function () { this.attachSprites(); s_oMain.preloaderReady() };
    this.attachSprites = function () {
        var m = new createjs.Shape; m.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); k.addChild(m); m = s_oSpriteLibrary.getSprite("200x200"); f = createBitmap(m); f.regX = .5 * m.width; f.regY = .5 * m.height; f.x = CANVAS_WIDTH / 2; f.y = CANVAS_HEIGHT / 2 - 180; k.addChild(f); h = new createjs.Shape; h.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(f.x - 100, f.y - 100, 200, 200, 10); k.addChild(h); f.mask = h; m = s_oSpriteLibrary.getSprite("progress_bar"); c = createBitmap(m); c.x = CANVAS_WIDTH / 2 -
            m.width / 2; c.y = CANVAS_HEIGHT / 2 + 50; k.addChild(c); a = m.width; d = m.height; e = new createjs.Shape; e.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(c.x, c.y, 1, d); k.addChild(e); c.mask = e; b = new createjs.Text("", "40px " + FONT, "#fff"); b.x = CANVAS_WIDTH / 2; b.y = CANVAS_HEIGHT / 2 + 110; b.textBaseline = "alphabetic"; b.textAlign = "center"; k.addChild(b); g = new createjs.Shape; g.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); k.addChild(g); createjs.Tween.get(g).to({ alpha: 0 }, 500).call(function () {
                createjs.Tween.removeTweens(g);
                k.removeChild(g)
            })
    }; this.refreshLoader = function (m) { b.text = m + "%"; 100 === m && (s_oMain._onRemovePreloader(), b.visible = !1, c.visible = !1); e.graphics.clear(); m = Math.floor(m * a / 100); e.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(c.x, c.y, m, d) }; this._init()
}
function CTextButton(a, d, b, c, e, g, f, h) {
    var k, m, l, p, n, u, z, q, v, A, w, G; this._init = function (C, x, r, H, B, R, y, D) {
        k = !1; p = []; n = []; G = createBitmap(r); m = r.width; l = r.height; var E = Math.ceil(y / 20); A = new createjs.Text(H, y + "px " + B, "#000000"); var J = A.getBounds(); A.textAlign = "center"; A.lineWidth = .9 * m; A.textBaseline = "alphabetic"; A.x = r.width / 2 + E; A.y = Math.floor(r.height / 2) + J.height / 3 + E; w = new createjs.Text(H, y + "px " + B, R); w.textAlign = "center"; w.textBaseline = "alphabetic"; w.lineWidth = .9 * m; w.x = r.width / 2; w.y = Math.floor(r.height /
            2) + J.height / 3; v = new createjs.Container; v.x = C; v.y = x; v.regX = r.width / 2; v.regY = r.height / 2; s_bMobile || (v.cursor = "pointer"); v.addChild(G, A, w); !1 !== D && s_oStage.addChild(v); this._initListener()
    }; this.unload = function () { v.off("mousedown", u); v.off("pressup", z); s_oStage.removeChild(v) }; this.setVisible = function (C) { v.visible = C }; this.setAlign = function (C) { w.textAlign = C; A.textAlign = C }; this.enable = function () { k = !1; G.filters = []; G.cache(0, 0, m, l) }; this.disable = function () {
        k = !0; var C = (new createjs.ColorMatrix).adjustSaturation(-100).adjustBrightness(40);
        G.filters = [new createjs.ColorMatrixFilter(C)]; G.cache(0, 0, m, l)
    }; this._initListener = function () { u = v.on("mousedown", this.buttonDown); z = v.on("pressup", this.buttonRelease) }; this.addEventListener = function (C, x, r) { p[C] = x; n[C] = r }; this.addEventListenerWithParams = function (C, x, r, H) { p[C] = x; n[C] = r; q = H }; this.buttonRelease = function () { k || (playSound("click", 1, !1), v.scaleX = 1, v.scaleY = 1, p[ON_MOUSE_UP] && p[ON_MOUSE_UP].call(n[ON_MOUSE_UP], q)) }; this.buttonDown = function () { k || (v.scaleX = .9, v.scaleY = .9, p[ON_MOUSE_DOWN] && p[ON_MOUSE_DOWN].call(n[ON_MOUSE_DOWN])) };
    this.setPosition = function (C, x) { v.x = C; v.y = x }; this.changeText = function (C) { w.text = C; A.text = C }; this.setX = function (C) { v.x = C }; this.setY = function (C) { v.y = C }; this.getButtonImage = function () { return v }; this.getX = function () { return v.x }; this.getY = function () { return v.y }; this.getSprite = function () { return v }; this._init(a, d, b, c, e, g, f, h); return this
}
function CToggle(a, d, b, c, e) {
    var g, f, h, k = [], m, l, p; this._init = function (n, u, z, q) { f = []; h = []; var v = new createjs.SpriteSheet({ images: [z], frames: { width: z.width / 2, height: z.height, regX: z.width / 2 / 2, regY: z.height / 2 }, animations: { state_true: 0, state_false: 1 } }); g = q; p = createSprite(v, "state_" + g, z.width / 2 / 2, z.height / 2, z.width / 2, z.height); p.mouseEnabled = !0; p.x = n; p.y = u; p.cursor = "pointer"; e.addChild(p); this._initListener() }; this.unload = function () { p.off("mousedown", m); p.off("pressup", l); p.mouseEnabled = !1; e.removeChild(p) };
    this._initListener = function () { m = p.on("mousedown", this.buttonDown); l = p.on("pressup", this.buttonRelease) }; this.addEventListener = function (n, u, z) { f[n] = u; h[n] = z }; this.addEventListenerWithParams = function (n, u, z, q) { f[n] = u; h[n] = z; k = q }; this.setActive = function (n) { g = n; p.gotoAndStop("state_" + g) }; this.buttonRelease = function () { p.scaleX = 1; p.scaleY = 1; playSound("click", 1, !1); g = !g; p.gotoAndStop("state_" + g); f[ON_MOUSE_UP] && f[ON_MOUSE_UP].call(h[ON_MOUSE_UP], k) }; this.buttonDown = function () {
        p.scaleX = .9; p.scaleY = .9; f[ON_MOUSE_DOWN] &&
            f[ON_MOUSE_DOWN].call(h[ON_MOUSE_DOWN], k)
    }; this.setPosition = function (n, u) { p.x = n; p.y = u }; this.setVisible = function (n) { p.visible = n }; this.setMask = function (n) { p.mask = n }; this.getButtonImage = function () { return p }; this._init(a, d, b, c)
}
function CGfxButton(a, d, b, c) {
    var e, g, f, h, k, m = [], l; this._init = function (n, u, z) { e = 1; h = []; k = []; l = createBitmap(z); l.x = n; l.y = u; l.regX = z.width / 2; l.regY = z.height / 2; l.cursor = "pointer"; p.addChild(l); this._initListener() }; this.unload = function () { l.off("mousedown", g); l.off("pressup", f); p.removeChild(l) }; this.setVisible = function (n) { l.visible = n }; this.setScale = function (n) { e = n; l.scaleX = l.scaleY = e }; this._initListener = function () { g = l.on("mousedown", this.buttonDown); f = l.on("pressup", this.buttonRelease) }; this.addEventListener =
        function (n, u, z) { h[n] = u; k[n] = z }; this.addEventListenerWithParams = function (n, u, z, q) { h[n] = u; k[n] = z; m = q }; this.buttonRelease = function () { l.scaleX = e; l.scaleY = e; h[ON_MOUSE_UP] && h[ON_MOUSE_UP].call(k[ON_MOUSE_UP], m) }; this.buttonDown = function () { l.scaleX = .9 * e; l.scaleY = .9 * e; playSound("click", 1, !1); h[ON_MOUSE_DOWN] && h[ON_MOUSE_DOWN].call(k[ON_MOUSE_DOWN], m) }; this.setScale = function (n) { e = n; l.scaleX = n; l.scaleY = n }; this.setPosition = function (n, u) { l.x = n; l.y = u }; this.setX = function (n) { l.x = n }; this.setY = function (n) { l.y = n };
    this.setMask = function (n) { l.mask = n }; this.getButtonImage = function () { return l }; this.getX = function () { return l.x }; this.getY = function () { return l.y }; var p = c; this._init(a, d, b); return this
}
function CMenu() {
    var a, d, b, c, e, g, f, h, k = null, m = null, l, p, n; this._init = function () {
        l = createBitmap(s_oSpriteLibrary.getSprite("bg_menu")); s_oStage.addChild(l); (new CRummyAnim(CANVAS_WIDTH / 2, CANVAS_HEIGHT / 2 - 100, s_oStage)).show(!0); f = new CGfxButton(CANVAS_WIDTH / 2, CANVAS_HEIGHT / 2 + 250, s_oSpriteLibrary.getSprite("but_play"), s_oStage); f.addEventListener(ON_MOUSE_UP, this._onStart, this, 0); if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) {
            var u = s_oSpriteLibrary.getSprite("audio_icon"); e = CANVAS_WIDTH - u.height / 2 - 10;
            g = u.height / 2 + 10; p = new CToggle(e, g, u, s_bAudioActive, s_oStage); p.addEventListener(ON_MOUSE_UP, this._onAudioToggle, this)
        } u = s_oSpriteLibrary.getSprite("but_credits"); b = u.width / 2 + 10; c = u.height / 2 + 10; h = new CGfxButton(b, c, u, s_oStage); h.addEventListener(ON_MOUSE_UP, this._onCreditsBut, this); u = window.document; var z = u.documentElement; k = z.requestFullscreen || z.mozRequestFullScreen || z.webkitRequestFullScreen || z.msRequestFullscreen; m = u.exitFullscreen || u.mozCancelFullScreen || u.webkitExitFullscreen || u.msExitFullscreen;
        !1 === ENABLE_FULLSCREEN && (k = !1); k && screenfull.isEnabled && (u = s_oSpriteLibrary.getSprite("but_fullscreen"), a = b + u.width / 2 + 10, d = u.height / 2 + 10, n = new CToggle(a, d, u, s_bFullscreen, s_oStage), n.addEventListener(ON_MOUSE_UP, this._onFullscreenRelease, this)); var q = new createjs.Shape; q.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); s_oStage.addChild(q); createjs.Tween.get(q).to({ alpha: 0 }, 1E3).call(function () { q.visible = !1 }); setVolume("soundtrack", 1); this.refreshButtonPos()
    }; this.unload = function () {
        f.unload();
        h.unload(); if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) p.unload(), p = null; k && screenfull.isEnabled && n.unload(); s_oMenu = null; s_oStage.removeAllChildren()
    }; this.refreshButtonPos = function () { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || p.setPosition(e - s_iOffsetX, s_iOffsetY + g); k && screenfull.isEnabled && n.setPosition(a + s_iOffsetX, d + s_iOffsetY); h.setPosition(b + s_iOffsetX, s_iOffsetY + c) }; this._onStart = function () { $(s_oMain).trigger("start_session"); s_oMenu.unload(); s_oMain.gotoSelectPanel() }; this._onAudioToggle =
        function () { Howler.mute(s_bAudioActive); s_bAudioActive = !s_bAudioActive }; this._onCreditsBut = function () { new CCreditsPanel }; this.resetFullscreenBut = function () { k && screenfull.isEnabled && n.setActive(s_bFullscreen) }; this._onFullscreenRelease = function () { s_bFullscreen ? m.call(window.document) : k.call(window.document.documentElement); sizeHandler() }; s_oMenu = this; this._init()
} var s_oMenu = null;
function CGame() {
    var a, d, b, c, e, g = !0, f = 0, h, k, m, l, p, n, u, z, q, v, A, w, G, C, x, r, H, B, R; this._init = function () {
        setVolume("soundtrack", SOUNDTRACK_VOLUME_IN_GAME); s_oGameSettings = new CDeckController; h = Math.floor(Math.random() * s_iNumPlayers); k = f; var y = createBitmap(s_oSpriteLibrary.getSprite("bg_game")); s_oStage.addChild(y); s_oHandEvaluator = new CHandEvaluatorController; x = new CTableController; x.addEventListener(ON_DECK_RELEASE, this._onDeckRelease, this); B = new createjs.Container; s_oStage.addChild(B); this._initHandPlayers();
        R = _oBg = new createjs.Shape; R.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); z = R.on("click", function () { }); s_oStage.addChild(R); this.reset(); v = new CInterface; w = new CAlertText; C = new CChoosePanel; C.addEventListener(ON_BUT_YES_DOWN, this.removeComboIncomplete, this); G = new CAreYouSurePanel(s_oStage); G.addEventListener(ON_BUT_YES_DOWN, this.onConfirmExit, this); r = new CGameOverPanel; H = new CWinPanel; q = new CAiController; v.showHelp(); A = new CRummyAnim(CANVAS_WIDTH / 2, CANVAS_HEIGHT /
            2, s_oStage); this.refreshButtonPos(); a = !0
    }; this.unload = function () { v.unload(); x.unload(); C.unload(); R.off("click", z); r.unload(); H.unload(); G.unload(); s_oGame = null; createjs.Tween.removeAllTweens(); s_oStage.removeAllChildren() }; this.refreshButtonPos = function () { x.refreshButtonPos(); this.refreshGridScale(); v.refreshButtonPos(); for (var y = 0; y < l.length; y++)l[y].refreshButtonPos(), p[y].refreshButtonPos() }; this.refreshGridScale = function () {
        var y = CANVAS_WIDTH - 2 * s_iOffsetX; if (s_bLandscape) {
            var D = CANVAS_HEIGHT -
                2 * s_iOffsetY; CUR_GRID_SCALE = D / MAX_TABLE_HEIGHT
        } else D = CANVAS_HEIGHT - 2 * s_iOffsetY, CUR_GRID_SCALE = Math.min(D, y) / MAX_TABLE_WIDTH; 1 >= CUR_GRID_SCALE && (CUR_GRID_SCALE = parseFloat(CUR_GRID_SCALE.toFixed(2))); x.refreshGridScale(y)
    }; this.reset = function () { d = !0; g = c = b = e = !1; m = 0; n = []; u = null; x.reset(); 0 === k ? this.blockControls(!1) : this.blockControls(!0) }; this.restart = function () {
        f++; f === s_iNumPlayers && (f = 0); k = h = f; x.restart(); for (var y = 0; y < l.length; y++)l[y].restart(), p[y].refreshText(s_aPlayerNames[y] + ": " + l[y].getTotalScore());
        this.reset(); this.dealCardToPlayer(); a = !0
    }; this.exitFromHelpPanel = function () { !1 === c ? this.dealCardToPlayer() : this.setUpdate(!0) }; this._initHandPlayers = function () {
        if (2 === s_iNumPlayers) { var y = [{ x: CANVAS_WIDTH / 2, y: CANVAS_HEIGHT - CARD_MOVE_UP_OFFSET }, { x: CANVAS_WIDTH / 2, y: CARD_MOVE_UP_OFFSET }]; var D = [{ dir_x: 0, dir_y: -1 }, { dir_x: 0, dir_y: 1 }]; var E = [0, 180] } else y = [{ x: CANVAS_WIDTH / 2, y: CANVAS_HEIGHT - CARD_MOVE_UP_OFFSET }, { x: CARD_MOVE_UP_OFFSET, y: CANVAS_HEIGHT / 2 }, { x: CANVAS_WIDTH / 2, y: CARD_MOVE_UP_OFFSET }, {
            x: CANVAS_WIDTH -
                CARD_MOVE_UP_OFFSET, y: CANVAS_HEIGHT / 2
        }], D = [{ dir_x: 0, dir_y: -1 }, { dir_x: 1, dir_y: 0 }, { dir_x: 0, dir_y: 1 }, { dir_x: -1, dir_y: 0 }], E = [0, 90, 180, -90]; l = []; p = []; for (var J = 0; J < s_iNumPlayers; J++)l[J] = new CCardHandDisplay(J, D[J], y[J], E[J], B), p[J] = new CNickLabel(y[J], D[J], E[J], s_aPlayerNames[J] + ": " + l[J].getTotalScore(), s_oStage)
    }; this.dealCardToPlayer = function () { c = !0; var y = x.getNextCard(), D = l[h].getPos(); D = x.getLocalPos(D); y.initMov(CARD_HAND, CARD_STATE_DEALING, TIME_CARD_DEALING, l[h].getRot(), D); n.push(y); return y };
    this.dealCardInWastePile = function () { var y = x.getNextCard(); y.setAsWasteCard(!0); y.initMov(CARD_WASTE, CARD_STATE_DEALING, TIME_CARD_DEALING, Math.floor(7 * Math.random()) - 3, x.getWastePilePos(), !0); n.push(y) }; this.dealCardFromWaste = function () { var y = x.removeLastCardInWastePile(), D = l[h].getPos(); D = x.getLocalPos(D); y.addEventListener(ON_CARD_ANIMATION_ENDING, this._onCardAnimEnd); y.initMov(CARD_HAND, CARD_STATE_DEALING, TIME_CARD_DEALING, l[h].getRot(), D); n.push(y) }; this.blockControls = function (y) { R.visible = y };
    this._checkIfComboIsValid = function (y) { if (2 > y.length) return !1 }; this._checkComboUnderConstruction = function (y, D) {
        var E = x.getComboOnTable(y), J = E.getCopyCards(); if (2 <= J.length) { if (2 < J.length && D.getValue() !== JOKER_VALUE && s_oHandEvaluator.checkIfCanReplaceJoker(J, E.getType(), D)) return EVALUATE_REPLACE_JOKER; J.push(D); E = s_oHandEvaluator.evaluate(!0, J); return E.res === EVALUATE_NULL ? EVALUATE_CARD_NO_VALID_IN_COMBO : E.res } if (0 === J.length || D.getValue() === JOKER_VALUE || J[0].getValue() === JOKER_VALUE) return EVALUATE_UNDER_CONSTRUCTION;
        if (1 === J.length) { E = J[0].getValue(); var S = D.getValue(); J = J[0].getSuit(); var T = D.getSuit(); if (E === S) { if (J !== T) return EVALUATE_UNDER_CONSTRUCTION } else if ((E === S + 1 || E === S - 1 || this._checkStraightWithAceHigh(E, S)) && J === T) return EVALUATE_UNDER_CONSTRUCTION } return EVALUATE_NULL
    }; this._checkStraightWithAceHigh = function (y, D) { if (!ACE_HIGH) return !1; if (y === ACE_VALUE) { if (13 === D) return !0 } else if (D === ACE_VALUE && 13 === y) return !0; return !1 }; this.removeCombo = function (y) { x.resetCombo(y) }; this.resetTimeElaps = function () {
        m =
        0
    }; this._changeTurn = function () { e = !1; p[k].highlight(!1); k++; k === s_iNumPlayers && (k = 0); p[k].highlight(!0); l[k].setNumCardsAtTurnStart(); h = k; u = null; x.endTurn(); g = !1; k === PLAYER_ID ? (m = 0, this.blockControls(!1), x.showHandAnim(!0), x.setClickableDeck(!0)) : (this.blockControls(!0), q.startCheck(l[k].getCards())) }; this._onCardAnimEnd = function (y, D) {
        switch (y) {
            case CARD_HAND: d ? (l[h].addCard(D), h++, h === s_iNumPlayers && (h = 0), l[h].getNumCards() === CARD_TO_DEAL["player_" + s_iNumPlayers] ? (l[PLAYER_ID].activateCardListener(),
                s_oGame.dealCardInWastePile(), k === PLAYER_ID ? x.showHandAnim(!0) : q.startCheck(l[k].getCards()), h = k, b = !0) : s_oGame.dealCardToPlayer()) : (l[k].addCard(D), l[k].activateCardListener()); break; case CARD_WASTE: D.setClickable(!0), D.addEventListener(ON_CARD_DRAGGING, s_oGame._checkCollisionBetweenCardAndHand, s_oGame), D.addEventListener(ON_CARD_RELEASE, s_oGame._releaseWasteCard, s_oGame), x.addFirstCardInWastePile(D), d = !1, x.setClickableDeck(!0), p[k].highlight(!0)
        }
    }; this.addCardToWastePile = function (y, D) {
        x.addCardToWastePile(y);
        void 0 === D ? l[k].removeCardFromHand(y) : l[k].removeCardFromHandByIndex(D); this.compactCards(); 0 === l[k].getNumCards() ? this.gameOver(!1) : this._changeTurn()
    }; this.addCardToAttachArea = function (y, D, E) { x.addCardToAttachArea(y, D, E) }; this.addCardToLastAttachAreaByIndex = function (y, D, E) { var J = l[k].getCards(); x.addCardToAttachArea(D, J[y], E) }; this.removeCardFromHandByIndex = function (y) { l[k].removeCardFromHandByIndex(y) }; this.compactCards = function () { l[k].compact() }; this.checkIfCardFitInAnyCombo = function (y, D, E) {
        return x.checkIfCardFitInAnyCombo(y,
            D, E)
    }; this.dealJokerToTheCurPlayer = function (y) { l[k].addCard(y); l[k].activateCardListener() }; this.showAlertText = function (y) { w.show(y) }; this.showChoosePanel = function (y) { C.show(y) }; this._checkCollisionBetweenCardAndHand = function (y) { y = x.getLocalToGlobal(y); y = { x: y.x / s_iScaleFactor, y: y.y / s_iScaleFactor }; var D = l[PLAYER_ID].getPos(), E = l[PLAYER_ID].getWidth(); y.y > D.y && y.x > D.x - E / 2 && y.x < D.x + E / 2 ? l[PLAYER_ID].highlight(!0) : l[PLAYER_ID].highlight(!1) }; this._checkCollisionBetweenCardAndWastePile = function (y) {
        y = l[PLAYER_ID].getLocalToGlobal(y);
        y = { x: y.x / s_iScaleFactor, y: y.y / s_iScaleFactor }; var D = x.getGlobalWastePilePos(); if (distance(y, D) < CARD_WIDTH * x.getScale()) return x.highlightWastePile(!0), x.highlightAllAttach(!1), !0; x.highlightWastePile(!1); return !1
    }; this._checkCollisionBetweenCardAndAttachSprite = function (y) {
        y = l[PLAYER_ID].getRectInGlobalPos(y); for (var D = !1, E = 0; E < x.getComboListLen(); E++) {
            x.getNumCardsInCombo(E); D = x.getComboRectInGlobalPos(E); if (y.intersects(D)) return x.highlightAllAttach(!1), x.highlightAttach(E, !0), !0; x.highlightAttach(E,
                !1); D = !1
        } return D
    }; this.checkIfComboIncomplete = function () { return x.checkIfComboIncomplete() }; this.checkIfDroppingWasteCard = function (y) { return null !== u && y.isWasteCard() ? !0 : !1 }; this._releaseWasteCard = function (y) { l[PLAYER_ID].isHighlight() ? (l[PLAYER_ID].highlight(!1), y.unload(), x.removeLastCardInWastePile(), l[PLAYER_ID].addCard(y), l[PLAYER_ID].activateCardListener(), e = !0, x.setClickableDeck(!1), x.setWasteClickable(!1), u = y, u.setAsWasteCard(!0), x.showHandAnim(!1), g = !0) : y.resetPosition() }; this.highlightAllAttach =
        function (y) { x.highlightAllAttach(y) }; this.isCardCollidingWithWaste = function () { return x.isWasteHighlighted() }; this.isCardCollidingWithAttach = function () { for (var y = 0; y < x.getComboListLen(); y++)if (x.isAttachHighlighted(y)) return y; return -1 }; this._onDeckRelease = function () { e = !0; x.setWasteClickable(!1); x.showHandAnim(!1); g = !0; this.dealCardToPlayer() }; this.calculateOpeningScore = function () { return x.calculateOpeningScore(k) }; this.removePlayerCombos = function () {
            for (var y = x.getPlayerCombos(k), D = 0; D < y.length; D++) {
                for (var E =
                    y[D].combo.getCards(), J = 0; J < E.length; J++)l[k].addCard(E[J]); 0 === D && x.resetCombo(y[D].index)
            } l[k].activateCardListener()
        }; this.removeComboIncomplete = function () { var y = x.getComboIncomplete(); if (-1 !== y) { for (var D = x.getComboOnTable(y).getCards(), E = 0; E < D.length; E++)l[k].addCard(D[E]); this.removeCombo(y); l[k].activateCardListener(); l[k].resetComboAttempt() } }; this._calculateScore = function (y) {
            y = l[y].getCards(); for (var D = 0, E = 0; E < y.length; E++) {
                var J = y[E].getValue(); 10 < J && 14 > J ? J = 10 : J === ACE_VALUE ? J = SCORE_ACE :
                    J === JOKER_VALUE && (J = SCORE_JOKER); D += J
            } return D
        }; this.gameOver = function (y) { a = !1; if (y) for (y = 0; y < l.length; y++) { var D = this._calculateScore(y); l[y].increaseScore(D) } else { for (y = D = 0; y < l.length; y++)y !== k && (D += this._calculateScore(y)); var E = !1, J = 0; GOING_RUMMY_RULE && l[k].checkRummy() && (D *= 2, A.show(), E = !0, J = 4500); l[k].increaseScore(D) } D = []; for (y = 0; y < l.length; y++)D[y] = l[y].getTotalScore(); l[k].getTotalScore() >= SCORE_TO_REACH["player_" + s_iNumPlayers] ? H.show(k, D, E, J) : r.show(k, D, E, J) }; this.hideHandSwipe = function () {
            this.resetTimeElaps();
            x.hideHandSwipe()
        }; this.getLastWasteCard = function () { return x.getLastCardInWastePile() }; this.onExit = function () { G.show(TEXT_ARE_YOU_SURE, 60) }; this.onConfirmExit = function () { this.unload(); $(s_oMain).trigger("show_interlevel_ad"); $(s_oMain).trigger("end_session"); s_oMain.gotoMenu() }; this._cleanCardUpdateArray = function () { for (var y = 0; y < n.length;)!1 === n[y].isUpdating() ? n.splice(y, 1) : y++ }; this.onShuffle = function () { if (!1 !== b) { b = !1; var y = l[0].getCards(); y = s_oHandEvaluator.sortCards(y); l[PLAYER_ID].sortCards(y) } };
    this.setCanShuffle = function (y) { b = y }; this.setOpeningForCurPlayer = function () { l[k].setOpening(!0) }; this.setUpdate = function (y) { a = y }; this.getPlayerHandY = function (y) { return l[y].getY() }; this.getWastePilePos = function () { return x.getGlobalWastePilePos() }; this.getAttachPos = function (y) { return x.getGlobalAttachPos(y) }; this.getTableScale = function () { return x.getScale() }; this.getComboOnTable = function (y) { return x.getComboOnTable(y) }; this.getCurTurn = function () { return k }; this.getLastAvailableAttachIndex = function () { return x.getLastAvailableAttachIndex() };
    this.getNumCardsInCombo = function (y, D) { return x.getNumCardsInCombo(y, D) }; this.checkIfOwner = function (y, D) { return x.checkIfOwner(y, D) }; this.isReadyForChangeTurn = function () { return e }; this.isOpeningScoreReached = function () { return l[k].isOpeningScoreReached() }; this.isPlayerTurn = function () { return k === PLAYER_ID ? !0 : !1 }; this.update = function () {
        if (a) {
            for (var y = 0; y < n.length; y++)n[y].update(); this._cleanCardUpdateArray(); q.update(); g && (m += s_iTimeElaps, m > TIME_HELP_PLAYER && (g = !1, y = { x: l[k].getX(), y: l[k].getY() }, x.showSwipeAnim(y,
                { x: 0, y: 0 })))
        }
    }; s_oGame = this; this._init()
} var s_oGame = null, s_oHandEvaluator;
function CInterface() {
    var a, d, b, c, e, g, f, h, k = null, m = null, l, p, n, u, z, q, v; this._init = function () {
        var A = s_oSpriteLibrary.getSprite("but_exit"); f = CANVAS_WIDTH - A.width / 2 - 10; h = A.height / 2 + 10; n = new CGfxButton(f, h, A, s_oStage); n.addEventListener(ON_MOUSE_UP, this._onExit, this); !1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile ? (b = f - A.width, c = h, A = s_oSpriteLibrary.getSprite("audio_icon"), l = new CToggle(b, c, A, s_bAudioActive, s_oStage), l.addEventListener(ON_MOUSE_UP, this._onAudioToggle, this), a = b - A.width / 2, d = c) : (a = f - A.width, d =
            h); A = window.document; var w = A.documentElement; k = w.requestFullscreen || w.mozRequestFullScreen || w.webkitRequestFullScreen || w.msRequestFullscreen; m = A.exitFullscreen || A.mozCancelFullScreen || A.webkitExitFullscreen || A.msExitFullscreen; !1 === ENABLE_FULLSCREEN && (k = !1); k && screenfull.isEnabled && (A = s_oSpriteLibrary.getSprite("but_fullscreen"), p = new CToggle(a, d, A, s_bFullscreen, s_oStage), p.addEventListener(ON_MOUSE_UP, this._onFullscreenRelease, this)); u = new CGfxButton(f, h, s_oSpriteLibrary.getSprite("but_help"), s_oStage);
        u.addEventListener(ON_MOUSE_UP, this._onHelp, this); A = s_oSpriteLibrary.getSprite("but_settings"); q = new CGUIExpandible(f, h, A, s_oStage); q.addButton(n); !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || q.addButton(l); k && screenfull.isEnabled && q.addButton(p); q.addButton(u); A = s_oSpriteLibrary.getSprite("but_shuffle"); e = f; g = CANVAS_HEIGHT - A.height / 2 - 10; z = new CGfxButton(e, g, A, s_oStage); z.addEventListener(ON_MOUSE_UP, this._onShuffle, this); v = new CHelpPanel(s_oStage)
    }; this.unload = function () {
        q.unload(); z.unload(); if (!1 ===
            DISABLE_SOUND_MOBILE || !1 === s_bMobile) l.unload(), l = null; k && screenfull.isEnabled && p.unload(); n.unload(); u.unload(); s_oInterface = null
    }; this.refreshButtonPos = function () { q.refreshPos(); z.setPosition(e - s_iOffsetX, g - s_iOffsetY) }; this.showHelp = function () { v.show() }; this._onAudioToggle = function () { Howler.mute(s_bAudioActive); s_bAudioActive = !s_bAudioActive }; this._onExit = function () { s_oGame.onExit() }; this._onHelp = function () { s_oGame.setUpdate(!1); v.show() }; this.resetFullscreenBut = function () {
        k && screenfull.isEnabled &&
        p.setActive(s_bFullscreen)
    }; this._onFullscreenRelease = function () { s_bFullscreen ? m.call(window.document) : k.call(window.document.documentElement); sizeHandler() }; this._onShuffle = function () { s_oGame.onShuffle() }; s_oInterface = this; this._init(); return this
} var s_oInterface = null;
function CCreditsPanel() {
    var a, d, b, c, e, g, f, h; this._init = function () {
        h = new createjs.Container; s_oStage.addChild(h); b = new createjs.Shape; d = b.on("click", function () { }); b.alpha = 0; b.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); h.addChild(b); c = new createjs.Container; c.visible = !1; h.addChild(c); var k = s_oSpriteLibrary.getSprite("msg_box"); f = createBitmap(k); f.regX = k.width / 2; f.regY = k.height / 2; c.addChild(f); a = f.on("click", this._onLogoButRelease); c.x = CANVAS_WIDTH / 2; c.y = CANVAS_HEIGHT / 2; k =
            450; var m = 60; new CTLText(c, -(k / 2), -26 - m / 2, k, m, 40, "center", "#fff", FONT, 1, 2, 2, TEXT_DEVELOPED, !0, !0, !0, !1); k = 450; m = 50; new CTLText(c, -(k / 2), 120 - m / 2, k, m, 36, "center", "#fff", FONT, 1, 2, 2, "www.taptapgames.fun", !0, !0, !0, !1); k = s_oSpriteLibrary.getSprite("ctl_logo"); g = createBitmap(k); g.regX = k.width / 2; g.regY = k.height / 2; g.y = 50; c.addChild(g); k = s_oSpriteLibrary.getSprite("but_exit_credits"); e = new CGfxButton(240, -160, k, c); e.addEventListener(ON_MOUSE_UP, this.unload, this); b.alpha = 0; createjs.Tween.get(b).to({ alpha: .7 },
                500).call(function () { c.alpha = 0; c.visible = !0; createjs.Tween.get(c).to({ alpha: 1 }, 300) })
    }; this.unload = function () { createjs.Tween.get(h).to({ alpha: 0 }, 500).call(function () { s_oStage.removeChild(h); e.unload() }); b.off("click", d); f.off("click", a) }; this._onLogoButRelease = function () { window.open("https://www.taptapgames.fun/", "_blank") }; this._init()
}
function CAreYouSurePanel(a) {
    var d, b, c, e, g, f, h, k, m, l, p, n = this; this._init = function () {
        b = []; c = []; m = new createjs.Container; m.visible = !1; u.addChild(m); l = new createjs.Shape; l.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); l.alpha = .5; e = l.on("click", function () { }); m.addChild(l); p = new createjs.Container; m.addChild(p); var z = s_oSpriteLibrary.getSprite("msg_box"); g = createBitmap(z); g.regX = .5 * z.width; g.regY = .5 * z.height; p.addChild(g); p.x = CANVAS_WIDTH / 2; p.y = d = -z.height / 2; z = z.width - 50; f = new CTLText(p,
            -(z / 2), -95, z, 150, 40, "center", "#fff", FONT, 1, 2, 2, "", !0, !0, !0, !1); h = new CGfxButton(190, 130, s_oSpriteLibrary.getSprite("but_yes"), p); h.addEventListener(ON_MOUSE_UP, this._onButYes, this); k = new CGfxButton(-170, 130, s_oSpriteLibrary.getSprite("but_exit"), p); k.addEventListener(ON_MOUSE_UP, this._onButNo, this)
    }; this.addEventListener = function (z, q, v) { b[z] = q; c[z] = v }; this.show = function (z, q) { f.setFontSize(q); f.refreshText(z); p.y = d; m.visible = !0; createjs.Tween.get(p).to({ y: CANVAS_HEIGHT / 2 }, 1E3, createjs.Ease.cubicOut).call(function () { s_oMain.stopUpdateNoBlock() }) };
    this.hide = function () { s_oMain.startUpdateNoBlock(); m.visible = !1 }; this.unload = function () { k.unload(); h.unload(); l.off("click", e) }; this._onButYes = function () { n.hide(); b[ON_BUT_YES_DOWN] && b[ON_BUT_YES_DOWN].call(c[ON_BUT_YES_DOWN]) }; this._onButNo = function () { n.hide() }; var u = a; this._init()
}
function CChoosePanel() {
    var a, d, b, c, e, g, f, h, k, m; this._init = function () {
        d = []; b = []; m = new createjs.Container; m.visible = !1; s_oStage.addChild(m); h = new createjs.Shape; h.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); h.alpha = .5; c = h.on("click", function () { }); m.addChild(h); k = new createjs.Container; m.addChild(k); var l = s_oSpriteLibrary.getSprite("msg_box"), p = createBitmap(l); p.regX = .5 * l.width; p.regY = .5 * l.height; k.addChild(p); k.x = CANVAS_WIDTH / 2; k.y = a = -l.height / 2; l = l.width - 100; f = new CTLText(k,
            -(l / 2), -105, l, 150, 28, "center", "#fff", FONT, 1, 2, 2, "", !0, !0, !0, !1); g = new CGfxButton(-200, 130, s_oSpriteLibrary.getSprite("but_no"), k); g.addEventListener(ON_MOUSE_UP, this._onButNo, this); e = new CGfxButton(200, 130, s_oSpriteLibrary.getSprite("but_yes"), k); e.addEventListener(ON_MOUSE_UP, this._onButYes, this); createjs.Tween.get(k).to({ y: CANVAS_HEIGHT / 2 }, 1E3, createjs.Ease.cubicOut)
    }; this.unload = function () { g.unload(); e.unload(); h.off("click", c) }; this.addEventListener = function (l, p, n) { d[l] = p; b[l] = n }; this.show = function (l) {
        f.refreshText(l);
        k.y = a; m.visible = !0; createjs.Tween.get(k).to({ y: CANVAS_HEIGHT / 2 }, 500, createjs.Ease.cubicOut)
    }; this._onButNo = function () { m.visible = !1; d[ON_BUT_NO_DOWN] && d[ON_BUT_NO_DOWN].call(b[ON_BUT_NO_DOWN]) }; this._onButYes = function () { m.visible = !1; d[ON_BUT_YES_DOWN] && d[ON_BUT_YES_DOWN].call(b[ON_BUT_YES_DOWN]) }; this._init()
}
function CGUIExpandible(a, d, b, c) {
    var e, g, f, h, k, m, l, p, n; this._init = function (z, q, v, A) { h = []; l = new createjs.Container; l.x = z; l.y = q; A.addChild(l); p = new createjs.Container; l.addChild(p); n = new createjs.Container; l.addChild(n); f = !1; m = new CGfxButton(0, 0, v, n); m.addEventListener(ON_MOUSE_UP, this._onMenu, this); k = new createjs.Shape; k.graphics.beginFill("rgba(255,0,0,0.01)").drawRoundRectComplex(-v.width / 2, -v.height / 2, v.width, 5 * v.height, 30, 30, 0, 0); p.addChild(k); g = e = 113 }; this.unload = function () { m.unload(); c.removeChild(l) };
    this.refreshPos = function () { l.x = a - s_iOffsetX; l.y = d + s_iOffsetY }; this.addButton = function (z) { var q = z.getButtonImage(); z.setMask(k); q.x = 0; q.y = 0; q.visible = 0; p.addChildAt(q, 0); h.push(q) }; this._onMenu = function () { (f = !f) ? u._expand() : u._collapse() }; this._expand = function () { for (var z = 0; z < h.length; z++)h[z].visible = !0, createjs.Tween.get(h[z], { override: !0 }).wait(300 * z / 2).to({ y: e + z * g }, 300, createjs.Ease.cubicOut) }; this._collapse = function () {
        for (var z = 0; z < h.length; z++) {
            var q = h[h.length - 1 - z]; createjs.Tween.get(q, { override: !0 }).wait(300 *
                z / 2).to({ y: 0 }, 300, createjs.Ease.cubicOut).call(function (v) { v.visible = !1 }, [q])
        }
    }; var u = this; this._init(a, d, b, c)
}
function CDeckController() {
    var a, d; this._init = function () { a = []; for (var b = 2 === s_iNumPlayers ? 1 : 2, c = 0; c < b; c++)for (var e = 0, g = 0; 52 > g; g++) { var f = (g + 1) % 13; a.push({ frame: g, rank: 0 === f ? 13 : f, suit: e }); 0 === f && e++ } JOKER_AVAILABLE && (a.push({ frame: 52, rank: JOKER_VALUE, suit: 5 }), a.push({ frame: 53, rank: JOKER_VALUE, suit: 5 }), 2 < s_iNumPlayers && (a.push({ frame: 52, rank: JOKER_VALUE, suit: 5 }), a.push({ frame: 53, rank: JOKER_VALUE, suit: 5 }))) }; this.getShuffledCardDeck = function () { d = []; for (var b = 0; b < a.length; b++)d[b] = a[b]; return d = shuffle(d) };
    this.getCardValue = function (b) { return (void 0)[b] }; this.getStartingDeckLength = function () { return a.length }; this._init()
}
function CCard(a, d, b, c, e, g, f, h) {
    var k, m, l, p = -1, n, u, z, q, v, A, w, G, C, x, r, H, B, R, y, D, E, J, S = this, T, Q, K; this._init = function (t, N, V, W, M, F, L) {
        k = t; u = N; q = 0; m = !1; l = L; K = new createjs.Container; K.x = V.getX(); K.y = V.getY(); Z.addChild(K); N = s_oSpriteLibrary.getSprite("card_shadow"); T = createBitmap(N); T.regX = N.width / 2; T.regY = N.height / 2; T.x = 8; T.y = 8; T.alpha = 0; K.addChild(T); N = []; for (L = 0; 55 > L; L++)N.push(s_oSpriteLibrary.getSprite("card_" + L)); N = new createjs.SpriteSheet({
            images: N, frames: {
                width: CARD_WIDTH, height: CARD_HEIGHT, regX: CARD_WIDTH /
                    2, regY: CARD_HEIGHT / 2
            }, animations: {
                card_0: 0, card_1: 1, card_2: 2, card_3: 3, card_4: 4, card_5: 5, card_6: 6, card_7: 7, card_8: 8, card_9: 9, card_10: 10, card_11: 11, card_12: 12, card_13: 13, card_14: 14, card_15: 15, card_16: 16, card_17: 17, card_18: 18, card_19: 19, card_20: 20, card_21: 21, card_22: 22, card_23: 23, card_24: 24, card_25: 25, card_26: 26, card_27: 27, card_28: 28, card_29: 29, card_30: 30, card_31: 31, card_32: 32, card_33: 33, card_34: 34, card_35: 35, card_36: 36, card_37: 37, card_38: 38, card_39: 39, card_40: 40, card_41: 41, card_42: 42, card_43: 43, card_44: 44,
                card_45: 45, card_46: 46, card_47: 47, card_48: 48, card_49: 49, card_50: 50, card_51: 51, joker: 52, joker2: 53, back: 54
            }
        }); Q = createSprite(N, t ? "back" : W, CARD_WIDTH / 2, CARD_HEIGHT / 2, CARD_WIDTH, CARD_HEIGHT); Q.stop(); K.addChild(Q); R = Q.on("mousedown", this._onPress); C = 0; A = W; w = M; G = F; x = V; E = []; J = []
    }; this.unload = function () { Q.off("mousedown", R); Q.off("pressmove", y); Q.off("pressup", D); r = x = null; Z.removeChild(K) }; this.addEventListener = function (t, N, V) { E[t] = N; J[t] = V }; this.setClickable = function (t) { m = t }; this.setRowInBoard = function (t) {
        z =
        t
    }; this.moveOnXByOffset = function (t, N) { var V = K.x + t; createjs.Tween.get(K).to({ x: V }, N, createjs.Ease.cubicOut) }; this.moveOnX = function (t, N) { createjs.Tween.get(K).to({ x: t }, N, createjs.Ease.cubicIn).call(function () { E[ON_CARD_MOVE_X_END] && E[ON_CARD_MOVE_X_END].call(J[ON_CARD_MOVE_X_END], S) }) }; this.moveOnYByOffset = function (t, N) { var V = K.y + t; createjs.Tween.get(K).to({ y: V }, TIME_CARD_MOVE_Y, createjs.Ease.cubicOut).call(function () { E[ON_CARD_MOVE_UP_END] && N && E[ON_CARD_MOVE_UP_END].call(J[ON_CARD_MOVE_UP_END], S) }) };
    this.initMov = function (t, N, V, W, M, F) { K.visible = !0; F && this.showCard(); playSound("card_dealing", 1, !1); r = new CVector2(M.x, M.y); n = V; p = N; u = t; q = W; createjs.Tween.get(K).to({ rotation: W }, n, createjs.Ease.cubicOut) }; this.changeValue = function (t) { Q.gotoAndStop(t) }; this.setValue = function () { Q.gotoAndStop(A); var t = this; createjs.Tween.get(Q).to({ scaleX: 1 }, 100).call(function () { t.cardShown() }) }; this.setDepth = function (t) { Z.setChildIndex(K, t) }; this.setScale = function (t) {
        createjs.Tween.removeTweens(Q); createjs.Tween.removeTweens(T);
        T.scaleX = T.scaleY = t; Q.scaleX = Q.scaleY = t
    }; this.tweenScale = function (t) { createjs.Tween.hasActiveTweens(Q) || (createjs.Tween.get(T).to({ scaleX: t, scaleY: t }, 400, createjs.Ease.cubicOut), createjs.Tween.get(Q).to({ scaleX: t, scaleY: t }, 400, createjs.Ease.cubicOut).call(function () { E[ON_CARD_END_SCALE] && E[ON_CARD_END_SCALE].call(J[ON_CARD_END_SCALE], S, v) })) }; this.setRotation = function (t) { K.rotation = t }; this.setAsWasteCard = function (t) { l = t }; this.changeType = function (t) { u = t }; this.setComboIndex = function (t) { v = t }; this.showCard =
        function () { k = !1; var t = this; createjs.Tween.get(Q).to({ scaleX: .1 }, 100).call(function () { t.setValue() }); playSound("show_card", 1, !1) }; this.cardShown = function () { E[ON_CARD_SHOWN] && E[ON_CARD_SHOWN].call(J[ON_CARD_SHOWN]) }; this.tremble = function () { createjs.Tween.get(K).to({ rotation: 10 }, 40, createjs.Ease.cubicOut).to({ rotation: -10 }, 80).to({ rotation: 10 }, 80).to({ rotation: -10 }, 80).to({ rotation: 0 }, 40) }; this._onPress = function (t) {
            m && (u === CARD_HAND ? (S.moveOnYByOffset(-CARD_HEIGHT_OFFSET_IN_HAND, !1), H = {
                x: s_oStage.mouseX,
                y: s_oStage.mouseY
            }) : u === CARD_WASTE && (K.rotation = 0, H = { x: s_oStage.mouseX, y: s_oGame.getPlayerHandY(0) }), y = Q.on("pressmove", S._onPressMove), D = Q.on("pressup", S._onRelease), T.alpha = 1)
        }; this._onPressMove = function (t) {
            if (m && !createjs.Tween.hasActiveTweens(K)) {
                B = { x: s_oStage.mouseX, y: s_oStage.mouseY }; var N = Z.globalToLocal(t.stageX, t.stageY); K.x = N.x; K.y = N.y; u === CARD_HAND ? Math.abs(H.y - t.stageY) > CARD_HEIGHT / 4 ? E[ON_CARD_DRAGGING] && E[ON_CARD_DRAGGING].call(J[ON_CARD_DRAGGING], S) : B.x - H.x < -CARD_WIDTH_OFFSET_IN_HAND ?
                    (H = B, E[ON_CARD_SWAP] && E[ON_CARD_SWAP].call(J[ON_CARD_SWAP], S, "left")) : B.x - H.x > CARD_WIDTH_OFFSET_IN_HAND && (H = B, E[ON_CARD_SWAP] && E[ON_CARD_SWAP].call(J[ON_CARD_SWAP], S, "right")) : E[ON_CARD_DRAGGING] && E[ON_CARD_DRAGGING].call(J[ON_CARD_DRAGGING], S)
            }
        }; this._onRelease = function (t) { m && (Q.off("pressmove", y), Q.off("pressup", D), T.alpha = 0, createjs.Tween.removeTweens(K), E[ON_CARD_RELEASE] && E[ON_CARD_RELEASE].call(J[ON_CARD_RELEASE], S)) }; this.setPos = function (t) { K.x = t.x; K.y = t.y }; this.resetPosition = function () {
            K.x =
            x.getX(); K.y = x.getY(); K.rotation = q
        }; this.printCardInfo = function () { console.log("value---\x3e" + w + " suit----\x3e" + G) }; this.setX = function (t) { K.x = t }; this.setY = function (t) { K.y = t }; this.getValue = function () { return w }; this.getSuit = function () { return G }; this.getFrame = function () { return A }; this.isClickable = function () { return m }; this.getX = function () { return K.x }; this.getY = function () { return K.y }; this.getScale = function () { return Q.scaleX }; this.getDepth = function () { return Z.getChildIndex(K) }; this.getContainer = function () { return K };
    this.getRow = function () { return z }; this.getStartingPos = function () { return x }; this.isFolded = function () { return k }; this.isWasteCard = function () { return l }; this.getType = function () { return u }; this.isUpdating = function () { return -1 === p ? !1 : !0 }; this._updateDealing = function () {
        C += s_iTimeElaps; if (C > n) p = -1, C = 0, K.x = r.getX(), K.y = r.getY(), x = new CVector2(K.x, K.y), E[ON_CARD_ANIMATION_ENDING] && E[ON_CARD_ANIMATION_ENDING].call(J[ON_CARD_ANIMATION_ENDING], u, S); else {
            this.visible = !0; var t = easeInOutCubic(C, 0, 1, n), N = new CVector2;
            N = tweenVectors(x, r, t, N); K.x = N.getX(); K.y = N.getY()
        }
    }; this.update = function () { switch (p) { case CARD_STATE_DEALING: this._updateDealing() } }; var Z = h; this._init(a, d, b, c, e, g, f)
}
function CVector2(a, d) {
    var b, c; this._init = function (e, g) { b = e; c = g }; this.add = function (e, g) { b += e; c += g }; this.addV = function (e) { b += e.getX(); c += e.getY() }; this.scalarDivision = function (e) { b /= e; c /= e }; this.subV = function (e) { b -= e.getX(); c -= e.getY() }; this.scalarProduct = function (e) { b *= e; c *= e }; this.invert = function () { b *= -1; c *= -1 }; this.dotProduct = function (e) { return b * e.getX() + c * e.getY() }; this.set = function (e, g) { b = e; c = g }; this.setV = function (e) { b = e.getX(); c = e.getY() }; this.length = function () { return Math.sqrt(b * b + c * c) }; this.length2 =
        function () { return b * b + c * c }; this.normalize = function () { var e = this.length(); 0 < e && (b /= e, c /= e) }; this.getNormalize = function (e) { this.length(); e.set(b, c); e.normalize() }; this.rot90CCW = function () { var e = b; b = -c; c = e }; this.rot90CW = function () { var e = b; b = c; c = -e }; this.getRotCCW = function (e) { e.set(b, c); e.rot90CCW() }; this.getRotCW = function (e) { e.set(b, c); e.rot90CW() }; this.ceil = function () { b = Math.ceil(b); c = Math.ceil(c) }; this.round = function () { b = Math.round(b); c = Math.round(c) }; this.toString = function () {
            return "Vector2: " + b + ", " +
                c
        }; this.print = function () { trace("Vector2: " + b + ", " + c) }; this.getX = function () { return b }; this.getY = function () { return c }; this._init(a, d)
}
function CCardHandDisplay(a, d, b, c, e) {
    var g, f, h, k, m, l, p, n, u, z = this; this._init = function (q) { m = 0; this.reset(); u = new createjs.Container; u.rotation = q; e.addChild(u); p = (CARD_TO_DEAL["player_" + s_iNumPlayers] + 1) * CARD_WIDTH_OFFSET_IN_HAND + 300; this.refreshButtonPos() }; this.refreshButtonPos = function () { u.x = b.x + s_iOffsetX * d.dir_x; u.y = b.y + s_iOffsetY * d.dir_y; var q = 0 === d.dir_x ? CANVAS_WIDTH - 2 * s_iOffsetX : CANVAS_HEIGHT - 2 * s_iOffsetY; p > q && (q /= p, q = parseFloat(q.toFixed(2)), u.scaleX = u.scaleY = q) }; this.unload = function () {
        for (var q =
            0; q < n.length; q++)n[q].unload(); e.removeChild(u)
    }; this.reset = function () { f = g = !1; k = CARD_TO_DEAL["player_" + s_iNumPlayers]; h = 0 === MIN_OPENING_VALUE ? !0 : !1; n = [] }; this.restart = function () { for (var q = 0; q < n.length; q++)n[q].unload(); this.reset() }; this.centerContainer = function () { createjs.Tween.get(u).to({ regX: u.getBounds().width / 2 }, 500, createjs.Ease.cubicOut) }; this._reassignArrayIndex = function () { n.sort(function (q, v) { return q.getX() == v.getX() ? q.getY() - v.getY() : q.getX() - v.getX() || q.getY() - v.getY() }) }; this.setOpening =
        function (q) { h = q }; this.compact = function () { l = 0; for (var q = CARD_WIDTH / 2, v = 0; v < n.length; v++)n[v].moveOnX(q, 500), q += CARD_WIDTH_OFFSET_IN_HAND; this._sortCardDepth() }; this.highlight = function (q) { g = q; u.shadow = q ? new createjs.Shadow("#fff", 0, 0, 20) : null }; this.setNumCardsAtTurnStart = function () { k = n.length }; this.addCard = function (q) {
            q.unload(); q = new CCard(!0, CARD_HAND, new CVector2(CARD_WIDTH / 2 + n.length * CARD_WIDTH_OFFSET_IN_HAND, CARD_HEIGHT), q.getFrame(), q.getValue(), q.getSuit(), q.isWasteCard(), u); a === PLAYER_ID ? (q.moveOnYByOffset(-CARD_MOVE_UP_OFFSET,
                !0), q.showCard()) : q.moveOnYByOffset(-CARD_CPU_MOVE_UP_OFFSET, !0); q.setClickable(!1); q.addEventListener(ON_CARD_MOVE_UP_END, this._onCardMoveUpEnd, this); q.addEventListener(ON_CARD_ANIMATION_ENDING, this._onCardAnimationEnd, this); q.addEventListener(ON_CARD_SWAP, this._onSwapCards, this); q.addEventListener(ON_CARD_DRAGGING, this._onDragCard, this); q.addEventListener(ON_CARD_RELEASE, this._onCardRelease, this); q.addEventListener(ON_CARD_MOVE_X_END, this._onCardEndXMove, this); q.addEventListener(ON_CARD_END_SCALE,
                    this._putCardOnTable, this); n.push(q)
        }; this.activateCardListener = function () { if (a === PLAYER_ID) for (var q = 0; q < n.length; q++)n[q].setClickable(!0) }; this.resetComboAttempt = function () { f = !1 }; this.moveCardOnXByOffset = function (q, v, A) { n[q].moveOnXByOffset(v, A) }; this.increaseScore = function (q) { m += q }; this._onCardMoveUpEnd = function (q) { z.centerContainer() }; this._onCardAnimationEnd = function (q) { }; this._onSwapCards = function (q, v) {
            for (var A = -1, w = 0; w < n.length; w++)if (n[w] === q) { A = w; break } if ("left" === v && 0 < A) w = A - 1, n[w].moveOnXByOffset(CARD_WIDTH_OFFSET_IN_HAND,
                0), n[A].moveOnXByOffset(-CARD_WIDTH_OFFSET_IN_HAND, 0); else if ("right" === v && A < n.length - 1) w = A + 1, n[w].moveOnXByOffset(-CARD_WIDTH_OFFSET_IN_HAND, 0), n[A].moveOnXByOffset(CARD_WIDTH_OFFSET_IN_HAND, 0); else { n[A]._onRelease(); return } -1 === w && ("right" === v ? (A = n.length - 1, w = A - 1) : (A = 0, w = A + 1)); u.swapChildren(n[w].getContainer(), n[A].getContainer()); var G = n[A]; n[A] = n[w]; n[w] = G
        }; this._onDragCard = function (q) {
            !1 === s_oGame._checkCollisionBetweenCardAndWastePile(q) ? s_oGame._checkCollisionBetweenCardAndAttachSprite(q) ?
                q.tweenScale(s_oGame.getTableScale()) : q.tweenScale(1) : q.tweenScale(s_oGame.getTableScale())
        }; this._onCardRelease = function (q) {
            s_oGame.hideHandSwipe(); if (s_oGame.isCardCollidingWithWaste()) {
                if (!1 === s_oGame.isReadyForChangeTurn()) { s_oGame.showAlertText(TEXT_NO_WASTE); this.resetCardFromRelease(q); return } if (s_oGame.checkIfComboIncomplete()) { s_oGame.showChoosePanel(TEXT_INCOMPLETE_COMBO); this.resetCardFromRelease(q); return } if (s_oGame.checkIfDroppingWasteCard(q)) {
                    s_oGame.showAlertText(TEXT_CANT_DISCARD_WASTE_CARD);
                    this.resetCardFromRelease(q); return
                } if (f) { if (!h && s_oGame.calculateOpeningScore() < MIN_OPENING_VALUE) { f = !1; s_oGame.showAlertText(TEXT_NOT_ENOUGH_POINTS); s_oGame.removePlayerCombos(); this.resetCardFromRelease(q); return } h = !0 } s_oGame.blockControls(!0); q.setClickable(!1); var v = s_oGame.getWastePilePos(); q.setPos(u.globalToLocal(v.x, v.y)); q.changeType(CARD_WASTE); s_oGame.addCardToWastePile(q)
            } else if (-1 < s_oGame.isCardCollidingWithAttach() && 1 < n.length) {
                var A = s_oGame.isCardCollidingWithAttach(), w = s_oGame._checkComboUnderConstruction(A,
                    q); if (!1 === s_oGame.checkIfOwner(A, a) && !h && s_oGame.calculateOpeningScore() < MIN_OPENING_VALUE) s_oGame.showAlertText(TEXT_CANT_PLACE_CARDS_IF_NOT_OPENING + " " + MIN_OPENING_VALUE + " " + TEXT_POINTS), this.resetCardFromRelease(q); else if (w === EVALUATE_CARD_NO_VALID_IN_COMBO) s_oGame.showAlertText(TEXT_INVALID_CARD_IN_COMBO), this.resetCardFromRelease(q); else if (4 > n.length + s_oGame.getNumCardsInCombo(A)) this.resetCardFromRelease(q); else if (w !== EVALUATE_NULL) q.setClickable(!1), v = s_oGame.getAttachPos(A), q.setPos(u.globalToLocal(v.x,
                        v.y)), q.changeType(CARD_TABLE), q.setComboIndex(A), this._addCardToAttachArea(q, A, w), f = !0; else { this.resetCardFromRelease(q); q = s_oGame.getComboOnTable(A); if (!1 === q.isPlacedOnTable()) { s_oGame.showAlertText(TEXT_INVALID_COMBO); q = q.getCards(); for (v = 0; v < q.length; v++)this.addCard(q[v]); s_oGame.removeCombo(A) } this.activateCardListener() }
            } else this.resetCardFromRelease(q); s_oGame.highlightAllAttach(!1)
        }; this._onCardEndXMove = function () {
            l++; l === n.length && (this._sortCardDepth(), this.centerContainer(), this._reassignArrayIndex(),
                s_oGame.setCanShuffle(!0))
        }; this.checkRummy = function () { return k === CARD_TO_DEAL["player_" + s_iNumPlayers] && 0 === n.length ? !0 : !1 }; this._putCardOnTable = function (q, v) { }; this._addCardToAttachArea = function (q, v, A) { this.removeCardFromHand(q); s_oGame.addCardToAttachArea(v, q, A) }; this.resetCardFromRelease = function (q) { for (var v = CARD_WIDTH / 2, A = 0; A < n.length; A++)n[A].setX(v), v += CARD_WIDTH_OFFSET_IN_HAND; q.setY(q.getStartingPos().getY() - CARD_MOVE_UP_OFFSET); this._sortCardDepth(); q.setScale(1) }; this.removeCardFromHand =
            function (q) { for (var v = 0; v < n.length; v++)if (n[v] === q) { n[v].unload(); n.splice(v, 1); break } this.compact() }; this.removeCardFromHandByIndex = function (q) { 0 > q || (n[q].unload(), n.splice(q, 1)) }; this._sortCardDepth = function () { u.sortChildren(function (q, v, A) { return q.x > v.x ? 1 : q.x < v.x ? -1 : 0 }) }; this.sortCards = function (q) { l = 0; for (var v = CARD_WIDTH / 2, A = 0; A < q.length; A++)n[q[A]].moveOnX(v, 500), v += CARD_WIDTH_OFFSET_IN_HAND }; this.getNumCards = function () { return n.length }; this.getRot = function () { return u.rotation }; this.getCards =
                function () { return n }; this.geCardByIndex = function (q) { return n[q] }; this.getCardIndex = function (q) { for (var v = 0; v < n.length; v++)if (q === n[v]) return v; return -1 }; this.getPos = function () { return { x: u.x, y: u.y } }; this.getX = function () { return u.x }; this.getY = function () { return u.y }; this.getScale = function () { return u.scaleX }; this.getWidth = function () { return u.getBounds().width }; this.isHighlight = function () { return g }; this.getLocalToGlobal = function (q) { return u.localToGlobal(q.getX(), q.getY()) }; this.getRectInGlobalPos = function (q) {
                    var v =
                        u.localToGlobal(q.getX(), q.getY()); return new createjs.Rectangle(v.x / s_iScaleFactor, v.y / s_iScaleFactor, CARD_WIDTH * q.getScale(), CARD_HEIGHT * q.getScale())
                }; this.isOpeningScoreReached = function () { return h }; this.getTotalScore = function () { return m }; this._init(c)
} var TYPE_LINEAR = 0, TYPE_OUT_CUBIC = 1, TYPE_IN_CUBIC = 2, TYPE_OUT_BACK = 3, TYPE_IN_BACK = 4;
function ease(a, d, b, c, e, g) { switch (a) { case TYPE_LINEAR: var f = easeLinear(d, b, c, e, g); break; case TYPE_IN_CUBIC: f = easeInCubic(d, b, c, e, g); break; case TYPE_OUT_CUBIC: f = easeOutCubic(d, b, c, e, g); break; case TYPE_IN_BACK: f = easeInBack(d, b, c, e, g); break; case TYPE_OUT_BACK: f = easeInBack(d, b, c, e, g) }return f } function easeOutBounce(a, d, b, c) { return (a /= c) < 1 / 2.75 ? 7.5625 * b * a * a + d : a < 2 / 2.75 ? b * (7.5625 * (a -= 1.5 / 2.75) * a + .75) + d : a < 2.5 / 2.75 ? b * (7.5625 * (a -= 2.25 / 2.75) * a + .9375) + d : b * (7.5625 * (a -= 2.625 / 2.75) * a + .984375) + d }
function easeInBounce(a, d, b, c) { return b - easeOutBounce(c - a, 0, b, c) + d } function easeInOutBounce(a, d, b, c) { return a < c / 2 ? .5 * easeInBounce(2 * a, 0, b, c) + d : .5 * easeOutBounce(2 * a - c, 0, b, c) + .5 * b + d } function easeInCirc(a, d, b, c) { return -b * (Math.sqrt(1 - (a /= c) * a) - 1) + d } function easeOutCirc(a, d, b, c) { return b * Math.sqrt(1 - (a = a / c - 1) * a) + d } function easeInOutCirc(a, d, b, c) { return 1 > (a /= c / 2) ? -b / 2 * (Math.sqrt(1 - a * a) - 1) + d : b / 2 * (Math.sqrt(1 - (a -= 2) * a) + 1) + d } function easeInCubic(a, d, b, c, e) { return b * (a /= c) * a * a + d }
function easeOutCubic(a, d, b, c, e) { return b * ((a = a / c - 1) * a * a + 1) + d } function easeInOutCubic(a, d, b, c, e) { return 1 > (a /= c / 2) ? b / 2 * a * a * a + d : b / 2 * ((a -= 2) * a * a + 2) + d } function easeInElastic(a, d, b, c, e, g, f) { if (0 == a) return d; if (1 == (a /= c)) return d + b; f || (f = .3 * c); !g || g < Math.abs(b) ? (g = b, e = f / 4) : e = f / (2 * Math.PI) * Math.asin(b / g); return -(g * Math.pow(2, 10 * --a) * Math.sin(2 * (a * c - e) * Math.PI / f)) + d }
function easeOutElastic(a, d, b, c, e, g, f) { if (0 == a) return d; if (1 == (a /= c)) return d + b; f || (f = .3 * c); !g || g < Math.abs(b) ? (g = b, e = f / 4) : e = f / (2 * Math.PI) * Math.asin(b / g); return g * Math.pow(2, -10 * a) * Math.sin(2 * (a * c - e) * Math.PI / f) + b + d } function easeInOutElastic(a, d, b, c, e, g, f) { if (0 == a) return d; if (1 == (a /= c)) return d + b; f || (f = .3 * c); !g || g < Math.abs(b) ? (g = b, e = f / 4) : e = f / (2 * Math.PI) * Math.asin(b / g); return 1 > a ? -.5 * g * Math.pow(2, 10 * --a) * Math.sin(2 * (a * c - e) * Math.PI / f) + d : g * Math.pow(2, -10 * --a) * Math.sin(2 * (a * c - e) * Math.PI / f) * .5 + b + d }
function easeInExpo(a, d, b, c) { return 0 == a ? d : b * Math.pow(2, 10 * (a / c - 1)) + d } function easeOutExpo(a, d, b, c) { return a == c ? d + b : b * (-Math.pow(2, -10 * a / c) + 1) + d } function easeInOutExpo(a, d, b, c) { return 0 == a ? d : a == c ? d + b : 1 > (a /= c / 2) ? b / 2 * Math.pow(2, 10 * (a - 1)) + d : b / 2 * (-Math.pow(2, -10 * --a) + 2) + d } function easeLinear(a, d, b, c) { return b * a / c + d } function easeInQuad(a, d, b, c) { return b * (a /= c) * a + d } function easeOutQuad(a, d, b, c) { return -b * (a /= c) * (a - 2) + d } function easeInOutQuad(a, d, b, c) { return 1 > (a /= c / 2) ? b / 2 * a * a + d : -b / 2 * (--a * (a - 2) - 1) + d }
function easeInQuart(a, d, b, c) { return b * (a /= c) * a * a * a + d } function easeOutQuart(a, d, b, c) { return -b * ((a = a / c - 1) * a * a * a - 1) + d } function easeInOutQuart(a, d, b, c) { return 1 > (a /= c / 2) ? b / 2 * a * a * a * a + d : -b / 2 * ((a -= 2) * a * a * a - 2) + d } function easeInQuint(a, d, b, c) { return b * (a /= c) * a * a * a * a + d } function easeOutQuint(a, d, b, c) { return b * ((a = a / c - 1) * a * a * a * a + 1) + d } function easeInOutQuint(a, d, b, c) { return 1 > (a /= c / 2) ? b / 2 * a * a * a * a * a + d : b / 2 * ((a -= 2) * a * a * a * a + 2) + d } function easeInSine(a, d, b, c) { return -b * Math.cos(a / c * (Math.PI / 2)) + b + d }
function easeOutSine(a, d, b, c) { return b * Math.sin(a / c * (Math.PI / 2)) + d } function easeInOutSine(a, d, b, c) { return -b / 2 * (Math.cos(Math.PI * a / c) - 1) + d } function easeInBack(a, d, b, c) { return b * (a /= c) * a * (2.70158 * a - 1.70158) + d } function easeOutBack(a, d, b, c) { return b * ((a = a / c - 1) * a * (2.70158 * a + 1.70158) + 1) + d }
function CHandEvaluatorController() {
    var a, d = 0, b, c, e, g; this.sortCards = function (f) { for (var h = [], k = 0; k < f.length; k++)h[k] = { rank: f[k].getValue(), suit: f[k].getSuit(), orig_index: k }; switch (d) { case 0: h.sort(this.compareSuitAndRank); break; case 1: h.sort(compareRank) }d++; 1 < d && (d = 0); f = []; for (k = 0; k < h.length; k++)f[k] = h[k].orig_index; return f }; this.evaluate = function (f, h) {
        a = f; c = []; e = []; for (var k = 0; k < h.length; k++)c[k] = { rank: h[k].getValue(), suit: h[k].getSuit(), orig_index: k }, e[k] = h[k]; c.sort(compareRank); this._checkJokerNum();
        return this._rankHand()
    }; this.compareSuitAndRank = function (f, h) { return f.suit < h.suit ? -1 : f.suit > h.suit ? 1 : compareRank(f, h) }; this._compareSuits = function (f) { var h = {}, k = []; f.forEach(function (l) { h[l] || (h[l] = 0); h[l] += 1 }); for (var m in h) 2 <= h[m] && k.push(m); return 0 < k.length ? !0 : !1 }; this._checkJokerNum = function () { b = 0; 0 < c.length && c[c.length - 1].rank === JOKER_VALUE && b++; 1 < c.length && c[c.length - 2].rank === JOKER_VALUE && b++ }; this._rankHand = function () {
        g = []; return 4 <= c.length && this._checkPoker() === EVALUATE_POKER ? {
            res: EVALUATE_POKER,
            combo: g
        } : ACE_HIGH && this._isStraightWithAceHigh() ? { res: EVALUATE_STRAIGHT_WITH_ACE_HIGH, combo: g } : this._isClassicStraight() ? { res: EVALUATE_STRAIGHT, combo: g } : 3 <= c.length && this._checkTris() === EVALUATE_TRIS ? { res: EVALUATE_TRIS, combo: g } : { res: EVALUATE_NULL, combo: null }
    }; this._checkPoker = function () {
        if (a && 4 !== c.length) return EVALUATE_NULL; for (var f = 0; f < c.length - 3; f++)if (c[f].rank === c[f + 1].rank && c[f].suit !== c[f + 1].suit) {
            var h = f + 2, k = [c[f].suit, c[f + 1].suit, c[h].suit, c[h + 1].suit]; if (c[h].rank === c[f].rank && c[h].rank ===
                c[h + 1].rank && !1 === this._compareSuits(k)) return g.push(c[f].orig_index), g.push(c[f + 1].orig_index), g.push(c[h].orig_index), g.push(c[h + 1].orig_index), EVALUATE_POKER; if (a && a && 2 === b && c[0].rank === c[1].rank && c[0].suit !== c[1].suit && 4 === c.length) return g.push(c[f].orig_index), g.push(c[f + 1].orig_index), g.push(c[c.length - 2].orig_index), g.push(c[c.length - 1].orig_index), b = 0, EVALUATE_POKER; if (1 === b && a && c[h].rank === c[f].rank && !1 === this._compareSuits([c[f].suit, c[f + 1].suit, c[h].suit])) return g.push(c[f].orig_index),
                    g.push(c[f + 1].orig_index), g.push(c[h].orig_index), g.push(c[c.length - 1].orig_index), b--, EVALUATE_POKER
        } return EVALUATE_NULL
    }; this._checkTris = function () {
        g = []; if (a && 3 !== c.length) return EVALUATE_NULL; for (var f = 0; f < c.length - 2; f++)if (c[f].rank === c[f + 1].rank && c[f].suit !== c[f + 1].suit) {
            var h = [c[f].suit, c[f + 1].suit, c[f + 2].suit]; if (c[f + 2].rank === c[f].rank && !1 === this._compareSuits(h)) return g.push(c[f].orig_index), g.push(c[f + 1].orig_index), g.push(c[f + 2].orig_index), EVALUATE_TRIS; if (0 < b) return g.push(c[f].orig_index),
                g.push(c[f + 1].orig_index), g.push(c[c.length - 1].orig_index), b--, EVALUATE_TRIS
        } else if (a && 2 === b) return g.push(c[f].orig_index), g.push(c[c.length - 2].orig_index), g.push(c[c.length - 1].orig_index), EVALUATE_TRIS; return EVALUATE_NULL
    }; this._isStraight = function () {
        if (13 === c[0].rank || 3 === c.length && 2 === b) return !1; for (var f = 0; f < c.length - 2; f++) {
            var h = c[f].rank, k = f + 1, m = 1 <= b ? !0 : !1; g = []; for (g.push(c[f].orig_index); k < c.length;)if (h + 1 === c[k].rank && c[f].suit === c[k].suit) g.push(c[k].orig_index), h++, k += 1; else if (a && c[k].rank !==
                JOKER_VALUE && 0 < b && c[k].rank - (h + 1) <= b) { var l = c[k].rank - (h + 1); if (0 >= l) k++; else { for (m = 0; m < l; m++)g.push(c[c.length - (m + 1)].orig_index), h++, b--; m = !1 } } else (h + 2 === c[k].rank && c[f].suit === c[k].suit || !a && c[k].rank === JOKER_VALUE && 3 > g.length) && m ? (m = !1, c[k].rank !== JOKER_VALUE && g.push(c[k].orig_index), g.push(c[c.length - 1].orig_index), h += 2) : k += 1; if (a) { if (g.length === e.length - b) { if (13 === c[c.length - 1 - b].rank && 0 < b && !ACE_HIGH) break; else if (0 < b) for (f = 0; f < b; f++)g.push(c[c.length - f - 1].orig_index); return !0 } break } else if (2 <
                    g.length) return !0
        } return !1
    }; this._isClassicStraight = function () { c = []; for (var f = 0; f < e.length; f++)c[f] = { rank: e[f].getValue() === ACE_VALUE ? 1 : e[f].getValue(), suit: e[f].getSuit(), orig_index: f }; c.sort(compareRank); return this._isStraight() }; this._isStraightWithAceHigh = function () {
        c = []; for (var f = 0; f < e.length; f++)c[f] = { rank: e[f].getValue() === ACE_VALUE ? 14 : e[f].getValue(), suit: e[f].getSuit(), orig_index: f }; c.sort(compareRank); if (this._isStraight()) for (f = 0; f < g.length; f++)if (e[g[f]].getValue() === ACE_VALUE || e[g[f]].getValue() ===
            JOKER_VALUE && 0 < f && 13 === e[g[f - 1]].getValue()) return !0; this._checkJokerNum(); return !1
    }; this._checkIfAllSuitAreEqual = function (f) { for (var h = c[0].suit, k = 1; k < f; k++)if (h !== c[k].suit) return !1; return !0 }; this.checkIfCanReplaceJoker = function (f, h, k) {
        for (var m = [], l = 0, p = [], n = 0; n < f.length; n++)m[n] = { rank: f[n].getValue(), suit: f[n].getSuit() }, f[n].getValue() === JOKER_VALUE && (l++, p.push(n)); if (0 === l) return !1; m.sort(compareRank); switch (h) {
            case EVALUATE_POKER: case EVALUATE_TRIS: p = [0, 1, 2, 3]; h = -1; for (n = 0; n < f.length; n++) {
                if (f[n].getValue() ===
                    JOKER_VALUE && k.getValue() === h && -1 < p.indexOf(k.getSuit())) return !0; h = f[n].getValue(); m = p.indexOf(f[n].getSuit()); p.splice(m, 1)
            } break; case EVALUATE_STRAIGHT: for (n = 0; n < p.length; n++)if (0 < p[n] ? (h = f[p[n] - 1].getValue() + 1, m = f[p[n] - 1].getSuit()) : (h = f[p[n] + 1].getValue() - 1, m = f[p[n] + 1].getSuit()), k.getValue() === h && k.getSuit() === m) return !0; break; case EVALUATE_STRAIGHT_WITH_ACE_HIGH: for (n = 0; n < p.length; n++)if (0 < p[n]) {
                if (h = f[p[n] - 1].getValue() + 1, m = f[p[n] - 1].getSuit(), (k.getValue() === h || 14 === h && k.getValue() === ACE_VALUE) &&
                    k.getSuit() === m) return !0
            } else if (h = f[p[n] + 1].getValue() - 1, m = f[p[n] + 1].getSuit(), k.getValue() === h && k.getSuit() === m) return !0
        }return !1
    }; this.getJokerValue = function (f, h, k) {
        for (var m = 0, l = 0; l < f.length; l++)f[l].getValue() === JOKER_VALUE && m++; if (0 === m) return 0; switch (k) {
            case EVALUATE_POKER: case EVALUATE_TRIS: for (h = 0; h < f.length; h++)if (f[h].getValue() === JOKER_VALUE) return 0 < h ? f[h - 1].getValue() : f[h + 1].getValue(); break; case EVALUATE_STRAIGHT: k = 0; m = h; if (0 === h) for (; m < f.length && f[m].getValue() === JOKER_VALUE;)m++,
                k--; else for (; 0 <= m && f[m].getValue() === JOKER_VALUE;)m--, k++; return 9 < f[m].getValue() && 14 > f[m].getValue() ? 10 : f[m].getValue() === ACE_VALUE ? 2 : f[m].getValue() + k; case EVALUATE_STRAIGHT_WITH_ACE_HIGH: return 0 === h ? (m = h + 1, k = -1) : (k = 1, m = h - 1), f[m].getValue() === ACE_VALUE ? 11 : f[m].getValue() + k
        }
    }; this.getScore = function (f, h) { for (var k = 0, m = 0; m < f.length; m++) { var l = f[m].getValue(); 10 < l && 14 > l ? l = 10 : l === ACE_VALUE || 14 === l ? l = h === EVALUATE_STRAIGHT_WITH_ACE_HIGH ? 11 : 1 : 15 === l && (l = s_oHandEvaluator.getJokerValue(f, m, h)); k += l } return k }
}
function CTableController() {
    var a, d, b, c, e, g, f, h, k, m, l, p, n, u, z, q, v, A, w, G, C, x; this._init = function () {
        h = CANVAS_WIDTH; e = TABLE_X; g = TABLE_Y; z = { x: CARD_WIDTH + 20, y: 0 }; b = z.x + CARD_WIDTH + 50; c = z.y; a = b; d = c; l = []; n = []; u = []; x = new createjs.Container; x.scaleX = x.scaleY = .8; s_oStage.addChild(x); G = new createjs.Container; x.addChild(G); C = new createjs.Container; x.addChild(C); p = []; this._attachNewComboOnTable(); var r = s_oSpriteLibrary.getSprite("waste_pile"), H = new createjs.SpriteSheet({
            images: [r], frames: {
                width: r.width / 2, height: r.height,
                regX: r.width / 2 / 2, regY: r.height / 2
            }, animations: { normal: 0, highlight: 1 }
        }); A = createSprite(H, "normal", r.width / 2 / 2, r.height / 2, r.width / 2, r.height); A.x = z.x; A.y = z.y; A.stop(); C.addChild(A); this._initDeck(); w = new CCursorHandController(x); v = new createjs.Shape; v.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(-CARD_WIDTH / 2, -CARD_HEIGHT / 2, CARD_WIDTH, CARD_HEIGHT); q = v.on("click", this._onDeckRelease); x.addChild(v)
    }; this.unload = function () {
        for (var r = 0; r < l.length; r++)l[r].unload(); for (r = 0; r < m.length; r++)m[r].unload();
        for (r = 0; r < p.length; r++)p[r].unload(); v.off("click", q)
    }; this.addEventListener = function (r, H, B) { n[r] = H; u[r] = B }; this.refreshButtonPos = function () { x.x = s_iOffsetX + e; x.y = s_iOffsetY + g }; this.reset = function () { k = 0; f = !1 }; this.restart = function () { b = z.x + CARD_WIDTH + 50; c = z.y; for (var r = 0; r < l.length; r++)l[r].unload(); l = []; for (r = 0; r < m.length; r++)m[r].unload(); m = []; this._initDeck(); for (r = 0; r < p.length; r++)p[r].unload(); p = []; this.reset(); this._attachNewComboOnTable() }; this.refreshGridScale = function (r) {
        x.scaleX = x.scaleY =
            .8 * CUR_GRID_SCALE; var H = TABLE_X; 3 < s_iNumPlayers && (H *= 2); h = r - H; this.repositionCombos()
    }; this.showHandAnim = function (r) { w.showHandAnim(r) }; this.showSwipeAnim = function (r, H) { w.showHandSwipe(r, H) }; this.hideHandSwipe = function () { w.hideHandSwipe() }; this._initDeck = function () {
        var r = s_oGameSettings.getShuffledCardDeck(); m = []; for (var H = 0; H < r.length; H++) {
            var B = new CVector2(-(.2 * H), -(.2 * H)); B = new CCard(!0, CARD_DECK, B, r[H].frame, r[H].rank, r[H].suit, !1, C); B.setClickable(!1); B.addEventListener(ON_CARD_ANIMATION_ENDING,
                s_oGame._onCardAnimEnd); m.push(B)
        }
    }; this.setClickableDeck = function (r) { f = r }; this.endTurn = function () {
        for (var r = 0; r < p.length; r++)3 <= p[r].getNumCards() && p[r].setPlaced(); if (0 === m.length) if (k++, k === MAX_NUM_SHUFFLE) s_oGame.gameOver(!0); else {
            var H = l.pop(); l = shuffle(l); m = []; for (r = 0; r < l.length; r++) {
                var B = new CVector2(-(.2 * r), -(.2 * r)); B = new CCard(!0, CARD_DECK, B, l[r].getFrame(), l[r].getValue(), l[r].getSuit(), l[r].isWasteCard(), C); B.setClickable(!1); B.addEventListener(ON_CARD_ANIMATION_ENDING, s_oGame._onCardAnimEnd);
                m.push(B); l[r].unload()
            } l = [H]
        }
    }; this.addFirstCardInWastePile = function (r) { l.push(r) }; this.setWasteClickable = function (r) { 0 < l.length && l[l.length - 1].setClickable(r) }; this.addCardToWastePile = function (r) { playSound("drop", 1, !1); r = new CCard(!1, CARD_WASTE, new CVector2(z.x, z.y), r.getFrame(), r.getValue(), r.getSuit(), !0, C); s_oGame._onCardAnimEnd(CARD_WASTE, r) }; this._attachNewComboOnTable = function () {
        var r = new CComboOnTable(b, c, G); r.addEventListener(ON_SELECT_COMBO, this._onSelectCombo, this); p.push(r); 1 < p.length &&
            p[p.length - 2].setOwner(s_oGame.getCurTurn())
    }; this.addCardToAttachArea = function (r, H, B) { p[r].addCard(H, B); 3 === p[r].getNumCards() && B !== EVALUATE_REPLACE_JOKER && (r = p[p.length - 1].getPos(), b = r.x + p[p.length - 1].getNumCards() * CARD_WIDTH_OFFSET_IN_HAND + 2 * CARD_WIDTH_OFFSET_IN_HAND, c = r.y, this._attachNewComboOnTable()); this.repositionCombos() }; this.repositionCombos = function () {
        for (var r = a, H = d, B = 0; B < p.length; B++) {
            var R = p[B]; (r + R.getNumCards() * CARD_WIDTH_OFFSET_IN_HAND) * x.scaleX > h && (r = 0, H += CARD_HEIGHT + 50); R.setPos(r,
                H); r = p[B].getPos().x + (R.getNumCards() * CARD_WIDTH_OFFSET_IN_HAND + 2 * CARD_WIDTH_OFFSET_IN_HAND)
        }
    }; this.highlightWastePile = function (r) { r ? A.gotoAndStop("highlight") : A.gotoAndStop("normal") }; this.highlightAttach = function (r, H) { H ? p[r].highlight() : p[r].unlight() }; this.highlightAllAttach = function (r) { for (var H = 0; H < p.length; H++)r ? p[H].highlight() : p[H].unlight() }; this.checkIfComboIncomplete = function () { for (var r = 0; r < p.length; r++)if (p[r].isIncomplete()) return !0; return !1 }; this.resetCombo = function (r) {
        p[r].reset();
        for (var H = r + 1; H < p.length; H++)p[H].unload(); p.splice(r + 1, p.length - 1 - r)
    }; this.removeCombo = function (r) { p[r].unload(); p.splice(r, 1) }; this.calculateOpeningScore = function (r) { for (var H = 0, B = 0; B < p.length; B++)p[B].getOwner() === r && (H += p[B].getScore()); return H }; this.checkIfCardFitInAnyCombo = function (r, H, B) {
        for (var R = 0; R < p.length - 1; R++) {
            var y = this.getComboOnTable(R), D = y.getCards(); y = y.getType(); var E = !1; if (JOKER_AVAILABLE && s_oHandEvaluator.checkIfCanReplaceJoker(D, y, r)) E = !0, y = EVALUATE_REPLACE_JOKER; else {
                if (r.getValue() ===
                    JOKER_VALUE && 3 < B) break; D.push(r); var J = s_oHandEvaluator.evaluate(!0, D); D.splice(D.length - 1, 1); J.res !== EVALUATE_NULL && (E = !0, y = J.res)
            } if (E) return -1 !== H && (B = s_oGame.getAttachPos(R), r.setPos(x.globalToLocal(B.x, B.y)), r.changeType(CARD_TABLE), s_oGame.removeCardFromHandByIndex(H), this.addCardToAttachArea(R, r, y)), !0
        } return !1
    }; this._onDeckRelease = function () { f && (f = !1, n[ON_DECK_RELEASE] && n[ON_DECK_RELEASE].call(u[ON_DECK_RELEASE])) }; this._onSelectCombo = function (r) { s_oGame.showChoosePanel(TEXT_REMOVE_COMBO) };
    this.getComboIncomplete = function () { for (var r = 0; r < p.length; r++)if (p[r].isIncomplete()) return r; return -1 }; this.getNextCard = function () { return m.pop() }; this.removeLastCardInWastePile = function () { return l.pop() }; this.getLastCardInWastePile = function () { return l[l.length - 1] }; this.getComboListLen = function () { return p.length }; this.getPlayerCombos = function (r) { for (var H = [], B = 0; B < p.length; B++)p[B].getOwner() === r && H.push({ combo: p[B], index: B }); return H }; this.getLocalPos = function (r) { return x.globalToLocal(r.x, r.y) };
    this.getLocalToGlobal = function (r) { return x.localToGlobal(r.getX(), r.getY()) }; this.getWastePilePos = function () { return z }; this.getScale = function () { return x.scaleX }; this.getGlobalWastePilePos = function () { return { x: x.x + z.x * x.scaleX, y: x.y + z.y * x.scaleX } }; this.getGlobalAttachPos = function (r) { return { x: x.x + p[r].getX() * x.scaleX, y: x.y + p[r].getY() * x.scaleY } }; this.getComboOnTable = function (r) { return p[r] }; this.getLastAvailableAttachIndex = function () { return p.length - 1 }; this.getNumCardsInCombo = function (r) { return p[r].getNumCards() };
    this.checkIfOwner = function (r, H) { return p[r].getOwner() === H || null === p[r].getOwner() ? !0 : !1 }; this.getScale = function () { return x.scaleX }; this.getComboRectInGlobalPos = function (r) { return new createjs.Rectangle(x.x + p[r].getX() * x.scaleX, x.y + p[r].getY() * x.scaleY, p[r].getWidth() * x.scaleX, p[r].getHeight() * x.scaleY) }; this.isWasteHighlighted = function () { return "highlight" === A.currentAnimation ? (this.highlightWastePile(!1), !0) : !1 }; this.isAttachHighlighted = function (r) { return p[r].isHighlighted() }; this._init()
}
function CAlertText() {
    var a, d, b; this._init = function () { b = new createjs.Container; b.x = CANVAS_WIDTH / 2; b.y = CANVAS_HEIGHT / 2; b.visible = !1; s_oStage.addChild(b); d = new createjs.Shape; d.graphics.beginFill("rgba(0,0,0,0.7)").drawRoundRect(-300, 0, 600, 200, 10); b.addChild(d); a = new createjs.Text("", " 40px " + FONT, "#fff"); a.y = 30; a.lineWidth = 500; a.textAlign = "center"; a.textBaseline = "middle"; b.addChild(a) }; this.hide = function () { b.visible = !1 }; this.show = function (c) {
        createjs.Tween.hasActiveTweens(b) || (a.text = c, c = a.getBounds().height +
            20, d.graphics.clear(), d.graphics.beginFill("rgba(0,0,0,0.7)").drawRoundRect(-300, 0, 600, c, 10), b.visible = !0, b.scaleX = b.scaleY = .1, playSound("alert", 1, !1), (new createjs.Tween.get(b)).to({ scaleX: 1, scaleY: 1 }, 600, createjs.Ease.cubicOut).wait(1500).to({ scaleX: .1, scaleY: .1 }, 500, createjs.Ease.cubicIn).call(function () { b.visible = !1 }))
    }; this._init()
}
function CComboOnTable(a, d, b) {
    var c, e, g, f = null, h, k, m, l, p, n; this._init = function (u, z) { e = c = !1; h = []; k = []; m = []; n = new createjs.Container; n.x = u; n.y = z; b.addChild(n); var q = s_oSpriteLibrary.getSprite("attach_card"), v = new createjs.SpriteSheet({ images: [q], frames: { width: q.width / 2, height: q.height, regX: q.width / 2 / 2, regY: q.height / 2 }, animations: { normal: 0, highlight: 1 } }); p = createSprite(v, "normal", q.width / 2 / 2, q.height / 2, q.width / 2, q.height); n.addChild(p); l = n.on("mousedown", this._onSelectCombo, this) }; this.unload = function () {
        for (var u =
            0; u < h.length; u++)h[u].unload(); b.removeChild(n); n.off("mousedown", l)
    }; this.addEventListener = function (u, z, q) { k[u] = z; m[u] = q }; this.reset = function () { for (var u = 0; u < h.length; u++)h[u].unload(); h = []; this.setOwner(null); p.visible = !0; this.unlight() }; this.highlight = function () { p.visible ? p.gotoAndStop("highlight") : n.shadow = new createjs.Shadow("#fff", 0, 0, 20); c = !0 }; this.unlight = function () { p.visible ? p.gotoAndStop("normal") : n.shadow = null; c = !1 }; this.addCard = function (u, z) {
        p.visible = !1; if (z === EVALUATE_REPLACE_JOKER) {
            for (var q =
                0, v = 0; v < h.length; v++)if (h[v].getValue() === JOKER_VALUE) { q = v; break } s_oGame.dealJokerToTheCurPlayer(h[q]); h.splice(q, 1)
        } else g = z; q = u.getValue(); if (z === EVALUATE_STRAIGHT_WITH_ACE_HIGH && u.getValue() === ACE_VALUE || u.getValue() === ACE_VALUE && 0 < h.length && 13 === h[h.length - 1].getValue()) q = 14; q = new CCard(!1, CARD_TABLE, new CVector2(0, 0), u.getFrame(), q, u.getSuit(), u.isWasteCard(), n); h.push(q); 3 <= h.length && z === EVALUATE_REPLACE_JOKER || !1 === s_oGame.isPlayerTurn() || s_oGame.isPlayerTurn() && (z === EVALUATE_STRAIGHT || z ===
            EVALUATE_STRAIGHT_WITH_ACE_HIGH) ? this.sortCombo() : q.moveOnX((h.length - 1) * CARD_WIDTH_OFFSET_IN_HAND, 500); this.unlight(); playSound("drop", 1, !1)
    }; this.setOwner = function (u) { f = u }; this._sortCardDepth = function () { n.sortChildren(function (u, z, q) { return u.x > z.x ? 1 : u.x < z.x ? -1 : 0 }) }; this.sortCombo = function () {
        var u = h[0].getValue() === JOKER_VALUE ? !0 : !1, z = []; h.sort(this.compareRank); for (var q = h.length - 1, v = 0; h[q].getValue() === JOKER_VALUE;) {
            for (var A = -1; v < q - 1; v++) {
                var w = h[v + 1].getValue() - h[v].getValue(); if (1 < w && w <= h.length -
                    1) { A = v + 1; break }
            } if (-1 !== A) z.push(A), v = A + 1; else { u && (u = h.pop(), h.unshift(u)); break } q--
        } for (q = 0; q < z.length; q++)u = h.pop(), h.splice(z[q], 0, u); for (v = z = 0; v < h.length; v++)h[v].moveOnX(z, 500), z += CARD_WIDTH_OFFSET_IN_HAND; var G = this; setTimeout(function () { G._sortCardDepth() }, 600)
    }; this.compareRank = function (u, z) { return u.getValue() < z.getValue() ? -1 : u.getValue() > z.getValue() ? 1 : 0 }; this.setPos = function (u, z) { n.x = u; n.y = z }; this.setPlaced = function () { e = !0 }; this._onSelectCombo = function () {
        !1 === e && this.isIncomplete() && k[ON_SELECT_COMBO] &&
        k[ON_SELECT_COMBO].call(m[ON_SELECT_COMBO], this)
    }; this.isHighlighted = function () { return c }; this.getX = function () { return n.x }; this.getY = function () { return n.y }; this.getCards = function () { return h }; this.getCopyCards = function () { for (var u = [], z = 0; z < h.length; z++)u[z] = h[z]; return u }; this.getNumCards = function () { return h.length }; this.isIncomplete = function () { return 0 < h.length && 3 > h.length ? !0 : !1 }; this.getType = function () { return g }; this.getSuits = function () { for (var u = [], z = 0; z < h.length; z++)u.push(h[z].getSuit()); return u };
    this.getPos = function () { return { x: n.x, y: n.y } }; this.getWidth = function () { return n.getBounds().width }; this.getHeight = function () { return n.getBounds().height }; this.getScore = function () { return s_oHandEvaluator.getScore(h, g) }; this.getOwner = function () { return f }; this.isPlacedOnTable = function () { return e }; this.getRect = function () { return new createjs.Rectangle(n.x, n.y, n.getBounds().width, n.getBounds().height) }; this._init(a, d)
}
function CAiController() {
    var a = !1, d, b = STATE_AI_IDLE, c, e, g, f, h, k; this.startCheck = function (m) { b = STATE_AI_IDLE; k = []; f = []; h = []; for (var l = 0; l < m.length; l++)f[l] = m[l], h[l] = m[l]; d = 0; if (2 < f.length) b = STATE_AI_READY_TO_START; else { var p = this; m = s_oGame.getLastWasteCard(); f.push(m); s_oGame.checkIfCardFitInAnyCombo(m, -1, f.length) ? setTimeout(function () { s_oGame.dealCardFromWaste(); b = STATE_AI_CHECKED_COMBO }, 1500) : (f.pop(), setTimeout(function () { p.getCardFromTheDeck(); b = STATE_AI_CHECKED_COMBO }, 1500)) } a = !0 }; this.restoreCards =
        function () { f = []; for (var m = 0; m < h.length; m++)f[m] = h[m]; k = [] }; this._checkWastePile = function () { var m = s_oGame.getLastWasteCard(); f.push(m); h.push(m); this._checkForCombos(!0, m); b = STATE_AI_CHECKED_WASTE }; this._checkForCombos = function (m, l) {
            var p = -1; m && (p = f.length - 1); var n = !1; do {
                var u = s_oHandEvaluator.evaluate(!1, f), z = u.combo; if (null !== z) {
                    var q = this.sortCombo(z); if (f.length === q.length) f.sort(compareRank), f.pop(); else {
                        for (var v = q.length - 1; 0 <= v; v--)f.splice(q[v], 1); k.push({ combo: z, res: u.res }); m && -1 !== z.indexOf(p) ?
                            (p = -1, n = !0) : p = f.length - 1
                    }
                }
            } while (u.res !== EVALUATE_NULL && 3 < f.length); 0 < k.length && this._checkOpeningScore() || m && l.getValue() === JOKER_VALUE ? m && n ? (s_oGame.dealCardFromWaste(), b = STATE_AI_CARD_DEALING) : !1 === m ? (e = c = 0, g = s_oGame.getLastAvailableAttachIndex(), b = STATE_AI_CARD_DEALING) : (h.pop(), this.restoreCards(), this.getCardFromTheDeck()) : (k = [], m ? (h.pop(), this.restoreCards(), this.getCardFromTheDeck()) : b = s_oGame.isOpeningScoreReached() ? STATE_AI_CHECKED_COMBO : STATE_AI_CHECKED_CARD_TABLE)
        }; this.getCardFromTheDeck =
            function () { var m = s_oGame.dealCardToPlayer(); f.push(m); h.push(m) }; this._checkOpeningScore = function () { for (var m = 0, l = 0; l < k.length; l++) { for (var p = [], n = k[l].combo, u = 0; u < n.length; u++)p.push(h[n[u]]); m += s_oHandEvaluator.getScore(p, k[l].res) } if (!1 === s_oGame.isOpeningScoreReached() && m < MIN_OPENING_VALUE) return !1; s_oGame.setOpeningForCurPlayer(); return !0 }; this.sortCombo = function (m) { for (var l = [], p = 0; p < m.length; p++)l[p] = m[p]; return l.sort(function (n, u) { return n - u }) }; this._checkCardOnTable = function () {
                for (var m =
                    !0; m && 1 < f.length;) { m = !1; for (var l = 0; l < f.length; l++)if (s_oGame.checkIfCardFitInAnyCombo(f[l], l, f.length)) { f.splice(l, 1); m = !0; break } } b = STATE_AI_CHECKED_CARD_TABLE
            }; this._decideCardToWaste = function () {
                a = !1; var m = []; if (1 === f.length) m.push({ rank: f[0].getValue(), suit: f[0].getSuit(), orig_index: 0, card: f[0] }); else for (var l = 0; l < f.length; l++)f[l] !== JOKER_VALUE && (!1 === this._evaluateSingleCardPotentiality(f[l], l) || 4 > f.length) && m.push({ rank: f[l].getValue(), suit: f[l].getSuit(), orig_index: l, card: f[l] }); if (0 < m.length) {
                    m.sort(compareRank);
                    for (l = m.length - 1; f[l].getValue() === JOKER_VALUE && 0 < l;)l--; s_oGame.addCardToWastePile(m[l].card, m[l].orig_index)
                } else { do m = Math.floor(Math.random() * f.length); while (f[m].getValue() === JOKER_VALUE); s_oGame.addCardToWastePile(f[m], m) }
            }; this._evaluateSingleCardPotentiality = function (m, l) {
                for (var p = 0; p < f.length; p++) { var n = f[p]; if (l !== p && m.getSuit() === n.getSuit() && m.getValue() === n.getValue()) return !1 } for (p = 0; p < f.length; p++)if (n = f[p], l !== p && (m.getValue() === JOKER_VALUE || m.getSuit() !== n.getSuit() && m.getValue() ===
                    n.getValue() || m.getSuit() === n.getSuit() && (m.getValue() === n.getValue() + 1 || m.getValue() === n.getValue() - 1) || m.getSuit() === n.getSuit() && (m.getValue() === n.getValue() + 2 || m.getValue() === n.getValue() - 2))) return !0; return !1
            }; this.placeComboOnTable = function () {
                var m = k[c].combo; s_oGame.addCardToLastAttachAreaByIndex(m[e], g, k[c].res); e++; if (e === m.length) {
                    e = 0; m = this.sortCombo(m); m = m.reverse(); for (var l = 0; l < m.length; l++)s_oGame.removeCardFromHandByIndex(m[l]); s_oGame.compactCards(); c++; g = s_oGame.getLastAvailableAttachIndex();
                    c === k.length && (b = s_oGame.isOpeningScoreReached() ? STATE_AI_CHECKED_COMBO : STATE_AI_CHECKED_CARD_TABLE)
                }
            }; this.update = function () {
                if (a) switch (d += s_iTimeElaps, b) {
                    case STATE_AI_READY_TO_START: 2E3 < d && (b = -1, d = 0, this._checkWastePile()); break; case STATE_AI_CHECKED_WASTE: 2E3 < d && (b = -1, d = 0, this._checkForCombos(!1)); break; case STATE_AI_CARD_DEALING: 1E3 < d && (d = 0, this.placeComboOnTable()); break; case STATE_AI_CHECKED_COMBO: 2E3 < d && (b = -1, d = 0, this._checkCardOnTable()); break; case STATE_AI_CHECKED_CARD_TABLE: 1E3 < d && (b =
                        -1, d = 0, this._decideCardToWaste())
                }
            }
}
function CGameOverPanel() {
    var a, d, b, c, e, g, f, h = this; this._init = function () {
        g = new createjs.Container; g.visible = !1; s_oStage.addChild(g); d = new createjs.Shape; a = d.on("click", function () { }); d.alpha = 0; d.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); g.addChild(d); f = new createjs.Container; f.visible = !1; g.addChild(f); var k = s_oSpriteLibrary.getSprite("msg_box_scoreboard"), m = createBitmap(k); m.x = CANVAS_WIDTH / 2; m.y = CANVAS_HEIGHT / 2; m.regX = k.width / 2; m.regY = k.height / 2; f.addChild(m); k = k.width - 50;
        new CTLText(f, CANVAS_WIDTH / 2 - k / 2, CANVAS_HEIGHT / 2 - 270 - 50, k, 100, 80, "center", "#fff", FONT, 1, 2, 2, TEXT_GAME_OVER, !0, !0, !0, !1); e = new CScoreBoard(m.x, m.y - 30, f); b = new CGfxButton(CANVAS_WIDTH / 2 - 250, CANVAS_HEIGHT / 2 + 250, s_oSpriteLibrary.getSprite("but_home"), f); b.addEventListener(ON_MOUSE_UP, this._onHome, this); c = new CGfxButton(CANVAS_WIDTH / 2 + 250, CANVAS_HEIGHT / 2 + 250, s_oSpriteLibrary.getSprite("but_next"), f); c.addEventListener(ON_MOUSE_UP, this._onNext, this)
    }; this.unload = function () {
        b.unload(); c.unload(); d.off("click",
            a)
    }; this.show = function (k, m, l, p) { for (var n = [], u = 0; u < s_iNumPlayers; u++)n[u] = k === u ? SCOREBOARD_WIN_ROUND : SCOREBOARD_LOSE_ROUND; playSound("round_over", 1, !1); g.visible = !0; f.alpha = 0; d.alpha = 0; createjs.Tween.get(d).wait(p).to({ alpha: .7 }, 500).call(function () { e.show(m, n, l); f.alpha = 0; f.visible = !0; createjs.Tween.get(f).to({ alpha: 1 }, 300) }) }; this.hide = function () { g.visible = !1 }; this._onHome = function () { h.unload(); s_oMain.gotoMenu() }; this._onNext = function () { h.hide(); s_oGame.restart() }; this._init()
}
function CSelectNumPlayersPanel() {
    var a, d, b, c, e, g, f = null, h = null, k, m, l, p, n, u, z; this._init = function () {
        z = new createjs.Container; s_oStage.addChild(z); var q = createBitmap(s_oSpriteLibrary.getSprite("bg_select")); z.addChild(q); new CTLText(z, CANVAS_WIDTH / 2 - 480, CANVAS_HEIGHT / 2 - 250 - 100, 960, 200, 80, "center", "#fff", FONT, 1, 2, 2, TEXT_SELECT_NUM, !0, !0, !0, !1); m = new CGfxButton(CANVAS_WIDTH / 2 - 300, CANVAS_HEIGHT / 2 + 100, s_oSpriteLibrary.getSprite("but_p2"), z); m.addEventListener(ON_MOUSE_UP, this._onPlayer2, this); l = new CGfxButton(CANVAS_WIDTH /
            2, CANVAS_HEIGHT / 2 + 100, s_oSpriteLibrary.getSprite("but_p3"), z); l.addEventListener(ON_MOUSE_UP, this._onPlayer3, this); p = new CGfxButton(CANVAS_WIDTH / 2 + 300, CANVAS_HEIGHT / 2 + 100, s_oSpriteLibrary.getSprite("but_p4"), z); p.addEventListener(ON_MOUSE_UP, this._onPlayer4, this); q = s_oSpriteLibrary.getSprite("but_exit"); a = CANVAS_WIDTH - q.width / 2 - 10; d = q.height / 2 + 10; k = new CGfxButton(a, d, q, s_oStage); k.addEventListener(ON_MOUSE_UP, this._onExit, this); if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) q = s_oSpriteLibrary.getSprite("audio_icon"),
                e = a - q.height - 10, g = q.height / 2 + 10, n = new CToggle(e, g, q, s_bAudioActive, s_oStage), n.addEventListener(ON_MOUSE_UP, this._onAudioToggle, this); q = window.document; var v = q.documentElement; f = v.requestFullscreen || v.mozRequestFullScreen || v.webkitRequestFullScreen || v.msRequestFullscreen; h = q.exitFullscreen || q.mozCancelFullScreen || q.webkitExitFullscreen || q.msExitFullscreen; !1 === ENABLE_FULLSCREEN && (f = !1); f && screenfull.isEnabled && (q = s_oSpriteLibrary.getSprite("but_fullscreen"), b = q.width / 4 + 10, c = q.height / 2 + 10, u = new CToggle(b,
                    c, q, s_bFullscreen, s_oStage), u.addEventListener(ON_MOUSE_UP, this._onFullscreenRelease, this)); var A = new createjs.Shape; A.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); z.addChild(A); createjs.Tween.get(A).to({ alpha: 0 }, 1E3).call(function () { A.visible = !1 }); this.refreshButtonPos()
    }; this.unload = function () {
        m.unload(); l.unload(); p.unload(); k.unload(); if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) n.unload(), n = null; f && screenfull.isEnabled && u.unload(); s_oStage.removeAllChildren(); s_oSelectPanel =
            null
    }; this.refreshButtonPos = function () { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || n.setPosition(e - s_iOffsetX, s_iOffsetY + g); f && screenfull.isEnabled && u.setPosition(b + s_iOffsetX, c + s_iOffsetY); k.setPosition(a - s_iOffsetX, d + s_iOffsetY) }; this._onPlayer2 = function () { s_iNumPlayers = 2; s_aPlayerNames = [TEXT_PLAYER + " 1", TEXT_PLAYER + " 2"]; s_oSelectPanel.unload(); s_oMain.gotoGame() }; this._onPlayer3 = function () {
        s_iNumPlayers = 3; s_aPlayerNames = [TEXT_PLAYER + " 1", TEXT_PLAYER + " 2", TEXT_PLAYER + " 3"]; s_oSelectPanel.unload();
        s_oMain.gotoGame()
    }; this._onPlayer4 = function () { s_iNumPlayers = 4; s_aPlayerNames = [TEXT_PLAYER + " 1", TEXT_PLAYER + " 2", TEXT_PLAYER + " 3", TEXT_PLAYER + " 4"]; s_oSelectPanel.unload(); s_oMain.gotoGame() }; this._onAudioToggle = function () { Howler.mute(s_bAudioActive); s_bAudioActive = !s_bAudioActive }; this.resetFullscreenBut = function () { f && screenfull.isEnabled && u.setActive(s_bFullscreen) }; this._onFullscreenRelease = function () { s_bFullscreen ? h.call(window.document) : f.call(window.document.documentElement); sizeHandler() };
    this._onExit = function () { s_oSelectPanel.unload(); s_oMain.gotoMenu() }; s_oSelectPanel = this; this._init()
} var s_oSelectPanel = null;
function CNickLabel(a, d, b, c, e) {
    var g = a, f, h, k; this._init = function (m, l, p) {
        k = new createjs.Container; k.x = m.x; k.y = m.y; k.rotation = l; e.addChild(k); var n = s_oSpriteLibrary.getSprite("bg_nick"); m = new createjs.SpriteSheet({ images: [n], frames: { width: n.width, height: n.height / 2 }, animations: { state_off: 0, state_on: 1 } }); var u = n.width; n = n.height / 2; h = createSprite(m, "state_off", 0, 0, u, n); k.addChild(h); f = new createjs.Text(p, "40px " + FONT, "#fff"); f.x = u / 2; f.y = 38; f.textAlign = "center"; f.textBaseline = "alphabetic"; k.addChild(f);
        this._resizeFont(40, u); k.regX = u / 2; k.regY = n; switch (l) { case 0: g = { x: g.x, y: g.y + CARD_MOVE_UP_OFFSET }; break; case 90: g = { x: g.x - CARD_MOVE_UP_OFFSET, y: g.y }; break; case 180: g = { x: g.x, y: g.y - CARD_MOVE_UP_OFFSET }; break; case -90: g = { x: g.x + CARD_MOVE_UP_OFFSET, y: g.y } }
    }; this.unload = function () { e.removeChild(k) }; this.refreshButtonPos = function () { k.x = g.x + s_iOffsetX * d.dir_x; k.y = g.y + s_iOffsetY * d.dir_y }; this._resizeFont = function (m, l) { for (; f.getBounds().width > l;)m -= 2, f.font = m + "px " + FONT }; this.refreshText = function (m) { f.text = m };
    this.highlight = function (m) { m ? h.gotoAndStop("state_on") : h.gotoAndStop("state_off") }; this._init(a, b, c)
}
function CScoreBoard(a, d, b) {
    var c, e, g, f; this._init = function (h, k) { g = new createjs.Container; g.visible = !1; g.x = h; g.y = k; b.addChild(g); this._initRows(); g.regX = g.getBounds().width / 2; g.regY = g.getBounds().height / 2 }; this._initRows = function () {
        var h = s_oSpriteLibrary.getSprite("header_scoreboard"), k = createBitmap(h); g.addChild(k); var m = 300, l = 36, p = 28; k = new CTLText(g, 180 - m / 2, p - l / 2, m, l, 26, "center", "#fff", FONT, 1, 2, 2, TEXT_NICK, !0, !0, !0, !1); m = 150; var n = new CTLText(g, 450 - m / 2, p - l / 2, m, l, 26, "center", "#fff", FONT, 1, 2, 2, TEXT_SCORE,
            !0, !0, !0, !1); m = 80; new CTLText(g, 590 - m / 2, p - l / 2, m, l, 26, "center", "#fff", FONT, 1, 2, 2, TEXT_WIN, !0, !0, !0, !1); var u = s_oSpriteLibrary.getSprite("row_scoreboard"), z = new createjs.SpriteSheet({ images: [u], frames: { width: u.width, height: u.height / 4 }, animations: { state_idle: 0, state_win_round: 1, state_win_game: 2, state_lose_round: 3 } }); c = []; e = []; h = h.height; for (var q = 0; q < s_iNumPlayers; q++) {
                var v = createSprite(z, "state_idle", 0, 0, u.width, u.height / 4); v.y = h; g.addChild(v); m = 300; l = 50; p = h + 32; p = new CTLText(g, k.getX(), p - l / 2, m, l, 40,
                    "center", "#fff", FONT, 1, 2, 2, s_aPlayerNames[q], !0, !0, !0, !1); m = 150; l = 50; var A = "0/" + SCORE_TO_REACH["player_" + s_iNumPlayers]; m = new CTLText(g, n.getX(), p.getY(), m, l, 40, "center", "#fff", FONT, 1, 2, 2, A, !0, !0, !0, !1); h += u.height / 4; c[q] = v; e[q] = m
            } f = createBitmap(s_oSpriteLibrary.getSprite("double_icon")); f.x = 554; g.addChild(f)
    }; this.show = function (h, k, m) { f.visible = m ? !0 : !1; this.refreshBoard(h, k, m); g.visible = !0 }; this.refreshBoard = function (h, k, m) {
        for (var l = 0; l < s_iNumPlayers; l++)c[l].gotoAndStop(k[l]), e[l].refreshText(h[l] +
            "/" + SCORE_TO_REACH["player_" + s_iNumPlayers]), m && k[l] === SCOREBOARD_WIN_ROUND && (f.y = e[l].getY())
    }; this._init(a, d)
}
function CWinPanel() {
    var a, d, b, c, e, g, f, h, k = this; this._init = function () {
        f = new createjs.Container; f.visible = !1; s_oStage.addChild(f); d = new createjs.Shape; a = d.on("click", function () { }); d.alpha = 0; d.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); f.addChild(d); h = new createjs.Container; h.visible = !1; f.addChild(h); var m = s_oSpriteLibrary.getSprite("msg_box_scoreboard"), l = createBitmap(m); l.x = CANVAS_WIDTH / 2; l.y = CANVAS_HEIGHT / 2; l.regX = m.width / 2; l.regY = m.height / 2; h.addChild(l); m = m.width - 50; b =
            new CTLText(h, CANVAS_WIDTH / 2 - m / 2, CANVAS_HEIGHT / 2 - 270 - 50, m, 100, 80, "center", "#fff", FONT, 1, 2, 2, TEXT_GAME_OVER, !0, !0, !0, !1); g = new CScoreBoard(l.x, l.y - 30, h); c = new CGfxButton(CANVAS_WIDTH / 2 - 250, CANVAS_HEIGHT / 2 + 250, s_oSpriteLibrary.getSprite("but_home"), h); c.addEventListener(ON_MOUSE_UP, this._onHome, this); e = new CGfxButton(CANVAS_WIDTH / 2 + 250, CANVAS_HEIGHT / 2 + 250, s_oSpriteLibrary.getSprite("but_restart"), h); e.addEventListener(ON_MOUSE_UP, this._onRestart, this)
    }; this.unload = function () {
        e.unload(); c.unload(); d.off("click",
            a)
    }; this.show = function (m, l, p, n) { b.refreshText(TEXT_WINNER + " " + s_aPlayerNames[m]); for (var u = [], z = 0; z < s_iNumPlayers; z++)u[z] = m === z ? SCOREBOARD_WIN_GAME : SCOREBOARD_LOSE_ROUND; playSound("win", 1, !1); f.visible = !0; h.alpha = 0; d.alpha = 0; createjs.Tween.get(d).wait(n).to({ alpha: .7 }, 500).call(function () { g.show(l, u, p); h.alpha = 0; h.visible = !0; createjs.Tween.get(h).to({ alpha: 1 }, 300) }) }; this.hide = function () { f.visible = !1 }; this._onHome = function () { k.unload(); s_oMain.gotoMenu() }; this._onRestart = function () {
        s_oGame.unload();
        s_oMain.gotoGame()
    }; this._init()
}
function CHelpPanel(a) {
    var d, b, c, e, g, f, h, k, m, l, p, n, u, z = this; this._init = function () {
        d = 0; u = new createjs.Container; u.visible = !1; a.addChild(u); p = new createjs.Shape; p.alpha = 0; p.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); g = p.on("click", function () { }); u.addChild(p); n = new createjs.Container; n.visible = !1; u.addChild(n); var q = s_oSpriteLibrary.getSprite("msg_box_wide"), v = createBitmap(q); v.x = CANVAS_WIDTH / 2; v.y = CANVAS_HEIGHT / 2; v.regX = q.width / 2; v.regY = q.height / 2; n.addChild(v); this._createPages();
        q = 70; v = CANVAS_WIDTH / 2 + 370; var A = CANVAS_HEIGHT / 2 - 300; f = new CTLText(n, v - 120, A - q / 2, 120, q, 60, "right", "#fff", FONT, 1, 2, 2, "1/4", !0, !0, !0, !1); q = 70; v = CANVAS_WIDTH / 2 - 370; A = CANVAS_HEIGHT / 2 - 300; h = new CTLText(n, v, A - q / 2, 500, q, 60, "left", "#fff", FONT, 1, 2, 2, TEXT_HELP_TITLE[0], !0, !0, !0, !1); l = new CGfxButton(CANVAS_WIDTH / 2 + 290, CANVAS_HEIGHT / 2 + 250, s_oSpriteLibrary.getSprite("but_play"), n); l.addEventListener(ON_MOUSE_UP, this._onPlay, this); k = new CGfxButton(CANVAS_WIDTH / 2 - 450, CANVAS_HEIGHT / 2, s_oSpriteLibrary.getSprite("arrow_left"),
            n); k.addEventListener(ON_MOUSE_UP, this._onLeft, this); m = new CGfxButton(CANVAS_WIDTH / 2 + 450, CANVAS_HEIGHT / 2, s_oSpriteLibrary.getSprite("arrow_right"), n); m.addEventListener(ON_MOUSE_UP, this._onRight, this)
    }; this.unload = function () { l.unload(); k.unload(); m.unload(); p.off("click", g) }; this.show = function () { u.visible = !0; p.alpha = 0; n.alpha = 0; n.visible = !0; createjs.Tween.get(p).to({ alpha: .7 }, 500).call(function () { createjs.Tween.get(n).to({ alpha: 1 }, 300) }) }; this.hide = function () { u.visible = !1 }; this._createPages = function () {
        b =
        CANVAS_WIDTH / 2; c = -CANVAS_WIDTH / 2; var q = new createjs.Shape; q.graphics.beginFill("rgba(255,255,0,0.01)").drawRect(CANVAS_WIDTH / 2 - 400, CANVAS_HEIGHT / 2 - 350, 800, 700); n.addChild(q); e = []; for (var v = 0; 4 > v; v++) { var A = new createjs.Container; A.visible = !1; A.mask = q; n.addChild(A); e[v] = A } var w = 750, G = 120, C = CANVAS_WIDTH / 2, x = CANVAS_HEIGHT / 2 - 180; new CTLText(e[0], C - w / 2, x - G / 2, w, G, 28, "center", "#fff", FONT, 1, 2, 2, TEXT_HELP_0 + CARD_TO_DEAL["player_" + s_iNumPlayers] + " " + TEXT_CARDS + ".", !0, !0, !0, !1); q = s_oGameSettings.getShuffledCardDeck();
        C = CANVAS_WIDTH / 2 - 310; for (v = 0; 10 > v; v++)A = createBitmap(s_oSpriteLibrary.getSprite("card_" + q[v].frame)), A.scaleX = A.scaleY = .55, A.x = C, A.y = CANVAS_HEIGHT / 2 - 100, e[0].addChild(A), C += CARD_WIDTH_OFFSET_IN_HAND * A.scaleX; w = 750; G = 100; C = CANVAS_WIDTH / 2; x = CANVAS_HEIGHT / 2 - 200; new CTLText(e[1], C - w / 2, x - G / 2, w, G, 22, "center", "#fff", FONT, 1, 2, 2, TEXT_HELP_1, !0, !0, !0, !1); for (C = 0; C < s_oGameSettings.getStartingDeckLength(); C++) {
            var r = new CVector2(-(.2 * C), -(.2 * C)); A = createBitmap(s_oSpriteLibrary.getSprite("card_54")); A.x = CANVAS_WIDTH /
                2 - 150 + r.getX(); A.y = CANVAS_HEIGHT / 2 - 140 + r.getY(); A.scaleX = A.scaleY = .6; e[1].addChild(A)
        } A = createBitmap(s_oSpriteLibrary.getSprite("card_" + Math.floor(50 * Math.random()))); A.x = CANVAS_WIDTH / 2 + 20 + r.getX(); A.y = CANVAS_HEIGHT / 2 - 140; A.scaleX = A.scaleY = .6; e[1].addChild(A); w = 750; G = 50; C = CANVAS_WIDTH / 2; x = CANVAS_HEIGHT / 2 + 107; new CTLText(e[1], C - w / 2, x - G / 2, w, G, 22, "center", "#fff", FONT, 1, 2, 2, TEXT_HELP_2, !0, !0, !0, !1); w = 750; G = 100; C = CANVAS_WIDTH / 2; x = CANVAS_HEIGHT / 2 - 198; new CTLText(e[2], C - w / 2, x - G / 2, w, G, 28, "center", "#fff",
            FONT, 1, 2, 2, TEXT_HELP_3, !0, !0, !0, !1); C = CANVAS_WIDTH / 2 - 350; w = 200; G = 40; x = CANVAS_HEIGHT / 2 + 30; new CTLText(e[2], C + 90 - w / 2, x - G / 2, w, G, 26, "center", "#fff", FONT, 1, 2, 2, TEXT_TRIS, !0, !0, !0, !1); v = ["card_12", "card_25", "card_51"]; for (w = 0; 3 > w; w++)A = createBitmap(s_oSpriteLibrary.getSprite(v[w])), A.x = C, A.y = CANVAS_HEIGHT / 2 - 140, A.scaleX = A.scaleY = .4, e[2].addChild(A), C += CARD_WIDTH_OFFSET_IN_HAND * A.scaleX; C = CANVAS_WIDTH / 2 - 120; w = 200; G = 40; x = CANVAS_HEIGHT / 2 + 30; new CTLText(e[2], C + 110 - w / 2, x - G / 2, w, G, 26, "center", "#fff", FONT, 1, 2,
                2, TEXT_POKER, !0, !0, !0, !1); v = ["card_0", "card_13", "card_26", "card_39"]; for (w = 0; 4 > w; w++)A = createBitmap(s_oSpriteLibrary.getSprite(v[w])), A.x = C, A.y = CANVAS_HEIGHT / 2 - 140, A.scaleX = A.scaleY = .4, e[2].addChild(A), C += CARD_WIDTH_OFFSET_IN_HAND * A.scaleX; C = CANVAS_WIDTH / 2 + 160; w = 200; G = 40; x = CANVAS_HEIGHT / 2 + 30; new CTLText(e[2], C + 90 - w / 2, x - G / 2, w, G, 26, "center", "#fff", FONT, 1, 2, 2, TEXT_STRAIGHT, !0, !0, !0, !1); v = ["card_10", "card_11", "card_12"]; for (w = 0; 3 > w; w++)A = createBitmap(s_oSpriteLibrary.getSprite(v[w])), A.x = C, A.y = CANVAS_HEIGHT /
                    2 - 140, A.scaleX = A.scaleY = .4, e[2].addChild(A), C += CARD_WIDTH_OFFSET_IN_HAND * A.scaleX; 0 < MIN_OPENING_VALUE && (w = 750, G = 50, C = CANVAS_WIDTH / 2, x = CANVAS_HEIGHT / 2 + 107, new CTLText(e[2], C - w / 2, x - G / 2, w, G, 24, "center", "#fff", FONT, 1, 2, 2, TEXT_HELP_8 + " " + MIN_OPENING_VALUE + " " + TEXT_POINTS, !0, !0, !0, !1)); v = GOING_RUMMY_RULE ? TEXT_HELP_9 : ""; w = 750; G = 120; C = CANVAS_WIDTH / 2; x = CANVAS_HEIGHT / 2 - 190; new CTLText(e[3], C - w / 2, x - G / 2, w, G, 22, "center", "#fff", FONT, 1, 2, 2, TEXT_HELP_4 + " " + SCORE_ACE + " " + TEXT_HELP_5 + " " + v, !0, !0, !0, !1); C = CANVAS_WIDTH /
                        2 - 140; var H = 0; for (v = 0; 5 > v; v++) { A = createBitmap(s_oSpriteLibrary.getSprite("card_" + q[v].frame)); A.scaleX = A.scaleY = .45; A.x = C; A.y = CANVAS_HEIGHT / 2 - 120; e[3].addChild(A); var B = q[v].rank; B === ACE_VALUE ? B = SCORE_ACE : B === JOKER_VALUE ? B = SCORE_JOKER : 10 < B && (B = 10); w = 32; G = 30; r = C + 40; x = A.y + 180; new CTLText(e[3], r - w / 2, x - G / 2, w, G, 22, "center", "#fff", FONT, 1, 2, 2, B, !0, !0, !0, !1); H += B; C += CARD_WIDTH_OFFSET_IN_HAND * A.scaleX } G = 30; x = A.y + 180; new CTLText(e[3], C + 40, x - G / 2, 150, G, 22, "left", "#fff", FONT, 1, 2, 2, ":   " + H + " " + TEXT_POINTS, !0,
                            !0, !0, !1); w = 750; G = 30; C = CANVAS_WIDTH / 2; x = CANVAS_HEIGHT / 2 + 100; new CTLText(e[3], C - w / 2, x - G / 2, w, G, 24, "center", "#fff", FONT, 1, 2, 2, TEXT_HELP_6 + " " + SCORE_TO_REACH["player_" + s_iNumPlayers] + " " + TEXT_HELP_7, !0, !0, !0, !1); e[0].visible = !0
    }; this._onLeft = function () {
        var q = d; d--; 0 > d && (d = 3); e[d].x = c; e[d].visible = !0; createjs.Tween.get(e[q]).to({ x: b }, 500, createjs.Ease.cubicOut).call(function () { e[q].visible = !1 }); createjs.Tween.get(e[d]).to({ x: 0 }, 500, createjs.Ease.cubicOut).call(function () {
            h.refreshText(TEXT_HELP_TITLE[d]);
            f.refreshText(d + 1 + "/4")
        })
    }; this._onRight = function () { var q = d; d++; 4 === d && (d = 0); e[d].x = b; e[d].visible = !0; createjs.Tween.get(e[q]).to({ x: c }, 500, createjs.Ease.cubicOut).call(function () { e[q].visible = !1 }); createjs.Tween.get(e[d]).to({ x: 0 }, 500, createjs.Ease.cubicOut).call(function () { h.refreshText(TEXT_HELP_TITLE[d]); f.refreshText(d + 1 + "/4") }) }; this._onPlay = function () { z.hide(); s_oGame.exitFromHelpPanel() }; this._init()
}
function CCursorHandController(a) {
    var d, b, c, e; this._init = function () {
        e = new createjs.Container; a.addChild(e); var g = { images: [s_oSpriteLibrary.getSprite("hand_anim")], framerate: 30, frames: { width: 156, height: 284, regX: 78, regY: 142 }, animations: { start: 0, anim: [0, 19] } }; g = new createjs.SpriteSheet(g); d = createSprite(g, "start", 156, 284, 78, 142); d.visible = !1; d.x = 0; d.y = CARD_HEIGHT / 2; e.addChild(d); b = new createjs.Container; b.visible = !1; e.addChild(b); c = createBitmap(s_oSpriteLibrary.getSprite("hand_swipe")); b.addChild(c);
        g = new createjs.Shape; g.graphics.beginFill("rgba(0,0,0,0.7)").drawRoundRect(CARD_WIDTH - 100, CARD_HEIGHT / 2 + 10, 240, 120, 10); b.addChild(g); g = CARD_WIDTH; new CTLText(b, CARD_WIDTH + 20 - g / 2, CARD_HEIGHT / 2 + 70 - 55, g, 110, 34, "center", "#fff", FONT, 1, 2, 2, TEXT_HELP_WASTE, !0, !0, !0, !1)
    }; this.showHandAnim = function (g) { g ? d.gotoAndPlay("anim") : d.gotoAndPlay("start"); d.visible = g }; this.showHandSwipe = function (g, f) {
        b.visible = !0; c.x = g.x; c.y = g.y; createjs.Tween.get(c, { loop: -1 }).to({ x: f.x, y: f.y }, 1E3, createjs.Ease.cubicOut).call(function () {
            c.x =
            g.x; c.y = g.y
        })
    }; this.hideHandSwipe = function () { b.visible = !1; createjs.Tween.removeTweens(c) }; this._init()
}
function CRummyAnim(a, d, b) {
    var c, e, g; this._init = function (f, h) {
        g = new createjs.Container; g.x = f; g.y = h; g.visible = !1; b.addChild(g); for (var k = [], m = 1; 60 > m; m++)k.push(s_oSpriteLibrary.getSprite("rummy_anim_" + m)); m = new createjs.SpriteSheet({ images: k, frames: { width: k[0].width, height: k[0].height }, animations: { start: 0, anim: [0, 58, "stop_anim"], stop_anim: 58 } }); c = createSprite(m, "start", 0, 0, k[0].width, k[0].height); g.addChild(c); e = new createjs.Text("", "74px " + FONT, "#fff"); e.x = k[0].width / 2; e.y = k[0].height + 50; e.textAlign =
            "center"; e.textBaseline = "alphabetic"; g.addChild(e); g.regX = k[0].width / 2; g.regY = k[0].height / 2
    }; this.show = function (f) { playSound("rummy", 1, !1); f ? e.text = "" : (e.alpha = 0, e.text = TEXT_DOUBLE, createjs.Tween.get(e).wait(500).to({ alpha: 1 }, 1E3, createjs.Ease.cubicOut), createjs.Tween.get(g).wait(3E3).to({ scaleX: .1, scaleY: .1, alpha: 0 }, 500, createjs.Ease.cubicIn).call(function () { g.visible = !1 })); g.visible = !0; c.gotoAndPlay("anim") }; this._init(a, d)
}
CTLText.prototype = {
    constructor: CTLText, __autofit: function () { if (this._bFitText) { for (var a = this._iFontSize; (this._oText.getBounds().height > this._iHeight - 2 * this._iPaddingV || this._oText.getBounds().width > this._iWidth - 2 * this._iPaddingH) && !(a--, this._oText.font = a + "px " + this._szFont, this._oText.lineHeight = Math.round(a * this._fLineHeightFactor), this.__updateY(), this.__verticalAlign(), 8 > a);); this._iFontSize = a } }, __verticalAlign: function () {
        if (this._bVerticalAlign) {
            var a = this._oText.getBounds().height; this._oText.y -=
                (a - this._iHeight) / 2 + this._iPaddingV
        }
    }, __updateY: function () { this._oText.y = this._y + this._iPaddingV; switch (this._oText.textBaseline) { case "middle": this._oText.y += this._oText.lineHeight / 2 + (this._iFontSize * this._fLineHeightFactor - this._iFontSize) } }, __createText: function (a) {
        this._bDebug && (this._oDebugShape = new createjs.Shape, this._oDebugShape.graphics.beginFill("rgba(255,0,0,0.5)").drawRect(this._x, this._y, this._iWidth, this._iHeight), this._oContainer.addChild(this._oDebugShape)); this._oText = new createjs.Text(a,
            this._iFontSize + "px " + this._szFont, this._szColor); this._oText.textBaseline = "middle"; this._oText.lineHeight = Math.round(this._iFontSize * this._fLineHeightFactor); this._oText.textAlign = this._szAlign; this._oText.lineWidth = this._bMultiline ? this._iWidth - 2 * this._iPaddingH : null; switch (this._szAlign) { case "center": this._oText.x = this._x + this._iWidth / 2; break; case "left": this._oText.x = this._x + this._iPaddingH; break; case "right": this._oText.x = this._x + this._iWidth - this._iPaddingH }this._oContainer.addChild(this._oText);
        this.refreshText(a)
    }, setVerticalAlign: function (a) { this._bVerticalAlign = a }, setOutline: function (a) { null !== this._oText && (this._oText.outline = a) }, setShadow: function (a, d, b, c) { null !== this._oText && (this._oText.shadow = new createjs.Shadow(a, d, b, c)) }, setColor: function (a) { this._oText.color = a }, setAlpha: function (a) { this._oText.alpha = a }, setY: function (a) { this._y = this._oText.y = a }, setFontSize: function (a) { this._iFontSize = a }, removeTweens: function () { createjs.Tween.removeTweens(this._oText) }, getText: function () { return this._oText },
    getX: function () { return this._x }, getY: function () { return this._y }, getFontSize: function () { return this._iFontSize }, refreshText: function (a) { "" === a && (a = " "); null === this._oText && this.__createText(a); this._oText.text = a; this._oText.font = this._iFontSize + "px " + this._szFont; this._oText.lineHeight = Math.round(this._iFontSize * this._fLineHeightFactor); this.__autofit(); this.__updateY(); this.__verticalAlign() }
};
function CTLText(a, d, b, c, e, g, f, h, k, m, l, p, n, u, z, q, v) { this._oContainer = a; this._x = d; this._y = b; this._iWidth = c; this._iHeight = e; this._bMultiline = q; this._iFontSize = g; this._szAlign = f; this._szColor = h; this._szFont = k; this._iPaddingH = l; this._iPaddingV = p; this._bVerticalAlign = z; this._bFitText = u; this._bDebug = v; this._oDebugShape = null; this._fLineHeightFactor = m; this._oText = null; n && this.__createText(n) }
function extractHostname(a) { a = -1 < a.indexOf("://") ? a.split("/")[2] : a.split("/")[0]; a = a.split(":")[0]; return a = a.split("?")[0] } function extractRootDomain(a) { a = extractHostname(a); var d = a.split("."), b = d.length; 2 < b && (a = d[b - 2] + "." + d[b - 1]); return a }
var getClosestTop = function () { var a = window, d = !1; try { for (; a.parent.document !== a.document;)if (a.parent.document) a = a.parent; else { d = !0; break } } catch (b) { d = !0 } return { topFrame: a, err: d } }, getBestPageUrl = function (a) { var d = a.topFrame, b = ""; if (a.err) try { try { b = window.top.location.href } catch (e) { var c = window.location.ancestorOrigins; b = c[c.length - 1] } } catch (e) { b = d.document.referrer } else b = d.location.href; return b }, TOPFRAMEOBJ = getClosestTop(), PAGE_URL = getBestPageUrl(TOPFRAMEOBJ);
function seekAndDestroy() { for (var a = extractRootDomain(PAGE_URL), d = [String.fromCharCode(99, 111, 100, 101, 116, 104, 105, 115, 108, 97, 98, 46, 99, 111, 109), String.fromCharCode(101, 110, 118, 97, 116, 111, 46, 99, 111, 109), String.fromCharCode(99, 111, 100, 101, 99, 97, 110, 121, 111, 110, 46, 99, 111, 109), String.fromCharCode(99, 111, 100, 101, 99, 97, 110, 121, 111, 110, 46, 110, 101, 116)], b = 0; b < d.length; b++)if (d[b] === a) return !0; return !1 };