
this.createjs = this.createjs || {}; createjs.extend = function (a, c) { function b() { this.constructor = a } b.prototype = c.prototype; return a.prototype = new b }; this.createjs = this.createjs || {}; createjs.promote = function (a, c) { var b = a.prototype, e = Object.getPrototypeOf && Object.getPrototypeOf(b) || b.__proto__; if (e) { b[(c += "_") + "constructor"] = e.constructor; for (var d in e) b.hasOwnProperty(d) && "function" == typeof e[d] && (b[c + d] = e[d]) } return a }; this.createjs = this.createjs || {};
createjs.deprecate = function (a, c) { return function () { var b = "Deprecated property or method '" + c + "'. See docs for info."; console && (console.warn ? console.warn(b) : console.log(b)); return a && a.apply(this, arguments) } }; this.createjs = this.createjs || {};
(function () {
    function a(a, e, d) { this.type = a; this.currentTarget = this.target = null; this.eventPhase = 0; this.bubbles = !!e; this.cancelable = !!d; this.timeStamp = (new Date).getTime(); this.removed = this.immediatePropagationStopped = this.propagationStopped = this.defaultPrevented = !1 } var c = a.prototype; c.preventDefault = function () { this.defaultPrevented = this.cancelable && !0 }; c.stopPropagation = function () { this.propagationStopped = !0 }; c.stopImmediatePropagation = function () {
        this.immediatePropagationStopped = this.propagationStopped =
            !0
    }; c.remove = function () { this.removed = !0 }; c.clone = function () { return new a(this.type, this.bubbles, this.cancelable) }; c.set = function (a) { for (var b in a) this[b] = a[b]; return this }; c.toString = function () { return "[Event (type=" + this.type + ")]" }; createjs.Event = a
})(); this.createjs = this.createjs || {};
(function () {
    function a() { this._captureListeners = this._listeners = null } var c = a.prototype; a.initialize = function (a) { a.addEventListener = c.addEventListener; a.on = c.on; a.removeEventListener = a.off = c.removeEventListener; a.removeAllEventListeners = c.removeAllEventListeners; a.hasEventListener = c.hasEventListener; a.dispatchEvent = c.dispatchEvent; a._dispatchEvent = c._dispatchEvent; a.willTrigger = c.willTrigger }; c.addEventListener = function (a, e, d) {
        var b = d ? this._captureListeners = this._captureListeners || {} : this._listeners =
            this._listeners || {}; var c = b[a]; c && this.removeEventListener(a, e, d); (c = b[a]) ? c.push(e) : b[a] = [e]; return e
    }; c.on = function (a, e, d, c, g, h) { e.handleEvent && (d = d || e, e = e.handleEvent); d = d || this; return this.addEventListener(a, function (a) { e.call(d, a, g); c && a.remove() }, h) }; c.removeEventListener = function (a, e, d) { if (d = d ? this._captureListeners : this._listeners) { var b = d[a]; if (b) for (var c = 0, h = b.length; c < h; c++)if (b[c] == e) { 1 == h ? delete d[a] : b.splice(c, 1); break } } }; c.off = c.removeEventListener; c.removeAllEventListeners = function (a) {
        a ?
            (this._listeners && delete this._listeners[a], this._captureListeners && delete this._captureListeners[a]) : this._listeners = this._captureListeners = null
    }; c.dispatchEvent = function (a, e, d) {
        if ("string" == typeof a) { var b = this._listeners; if (!(e || b && b[a])) return !0; a = new createjs.Event(a, e, d) } else a.target && a.clone && (a = a.clone()); try { a.target = this } catch (g) { } if (a.bubbles && this.parent) {
            d = this; for (e = [d]; d.parent;)e.push(d = d.parent); b = e.length; for (d = b - 1; 0 <= d && !a.propagationStopped; d--)e[d]._dispatchEvent(a, 1 + (0 == d));
            for (d = 1; d < b && !a.propagationStopped; d++)e[d]._dispatchEvent(a, 3)
        } else this._dispatchEvent(a, 2); return !a.defaultPrevented
    }; c.hasEventListener = function (a) { var b = this._listeners, d = this._captureListeners; return !!(b && b[a] || d && d[a]) }; c.willTrigger = function (a) { for (var b = this; b;) { if (b.hasEventListener(a)) return !0; b = b.parent } return !1 }; c.toString = function () { return "[EventDispatcher]" }; c._dispatchEvent = function (a, e) {
        var b, c, g = 2 >= e ? this._captureListeners : this._listeners; if (a && g && (c = g[a.type]) && (b = c.length)) {
            try {
                a.currentTarget =
                    this
            } catch (l) { } try { a.eventPhase = e | 0 } catch (l) { } a.removed = !1; c = c.slice(); for (g = 0; g < b && !a.immediatePropagationStopped; g++) { var h = c[g]; h.handleEvent ? h.handleEvent(a) : h(a); a.removed && (this.off(a.type, h, 1 == e), a.removed = !1) }
        } 2 === e && this._dispatchEvent(a, 2.1)
    }; createjs.EventDispatcher = a
})(); this.createjs = this.createjs || {};
(function () {
    function a() { throw "Ticker cannot be instantiated."; } a.RAF_SYNCHED = "synched"; a.RAF = "raf"; a.TIMEOUT = "timeout"; a.timingMode = null; a.maxDelta = 0; a.paused = !1; a.removeEventListener = null; a.removeAllEventListeners = null; a.dispatchEvent = null; a.hasEventListener = null; a._listeners = null; createjs.EventDispatcher.initialize(a); a._addEventListener = a.addEventListener; a.addEventListener = function () { !a._inited && a.init(); return a._addEventListener.apply(a, arguments) }; a._inited = !1; a._startTime = 0; a._pausedTime =
        0; a._ticks = 0; a._pausedTicks = 0; a._interval = 50; a._lastTime = 0; a._times = null; a._tickTimes = null; a._timerId = null; a._raf = !0; a._setInterval = function (b) { a._interval = b; a._inited && a._setupTick() }; a.setInterval = createjs.deprecate(a._setInterval, "Ticker.setInterval"); a._getInterval = function () { return a._interval }; a.getInterval = createjs.deprecate(a._getInterval, "Ticker.getInterval"); a._setFPS = function (b) { a._setInterval(1E3 / b) }; a.setFPS = createjs.deprecate(a._setFPS, "Ticker.setFPS"); a._getFPS = function () {
            return 1E3 /
                a._interval
        }; a.getFPS = createjs.deprecate(a._getFPS, "Ticker.getFPS"); try { Object.defineProperties(a, { interval: { get: a._getInterval, set: a._setInterval }, framerate: { get: a._getFPS, set: a._setFPS } }) } catch (e) { console.log(e) } a.init = function () { a._inited || (a._inited = !0, a._times = [], a._tickTimes = [], a._startTime = a._getTime(), a._times.push(a._lastTime = 0), a.interval = a._interval) }; a.reset = function () {
            if (a._raf) {
                var b = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame ||
                    window.msCancelAnimationFrame; b && b(a._timerId)
            } else clearTimeout(a._timerId); a.removeAllEventListeners("tick"); a._timerId = a._times = a._tickTimes = null; a._startTime = a._lastTime = a._ticks = a._pausedTime = 0; a._inited = !1
        }; a.getMeasuredTickTime = function (b) { var d = 0, c = a._tickTimes; if (!c || 1 > c.length) return -1; b = Math.min(c.length, b || a._getFPS() | 0); for (var e = 0; e < b; e++)d += c[e]; return d / b }; a.getMeasuredFPS = function (b) {
            var d = a._times; if (!d || 2 > d.length) return -1; b = Math.min(d.length - 1, b || a._getFPS() | 0); return 1E3 / ((d[0] -
                d[b]) / b)
        }; a.getTime = function (b) { return a._startTime ? a._getTime() - (b ? a._pausedTime : 0) : -1 }; a.getEventTime = function (b) { return a._startTime ? (a._lastTime || a._startTime) - (b ? a._pausedTime : 0) : -1 }; a.getTicks = function (b) { return a._ticks - (b ? a._pausedTicks : 0) }; a._handleSynch = function () { a._timerId = null; a._setupTick(); a._getTime() - a._lastTime >= .97 * (a._interval - 1) && a._tick() }; a._handleRAF = function () { a._timerId = null; a._setupTick(); a._tick() }; a._handleTimeout = function () { a._timerId = null; a._setupTick(); a._tick() }; a._setupTick =
            function () { if (null == a._timerId) { var b = a.timingMode; if (b == a.RAF_SYNCHED || b == a.RAF) { var d = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame; if (d) { a._timerId = d(b == a.RAF ? a._handleRAF : a._handleSynch); a._raf = !0; return } } a._raf = !1; a._timerId = setTimeout(a._handleTimeout, a._interval) } }; a._tick = function () {
                var b = a.paused, d = a._getTime(), c = d - a._lastTime; a._lastTime = d; a._ticks++; b && (a._pausedTicks++, a._pausedTime +=
                    c); if (a.hasEventListener("tick")) { var g = new createjs.Event("tick"), h = a.maxDelta; g.delta = h && c > h ? h : c; g.paused = b; g.time = d; g.runTime = d - a._pausedTime; a.dispatchEvent(g) } for (a._tickTimes.unshift(a._getTime() - d); 100 < a._tickTimes.length;)a._tickTimes.pop(); for (a._times.unshift(d); 100 < a._times.length;)a._times.pop()
            }; var c = window, b = c.performance.now || c.performance.mozNow || c.performance.msNow || c.performance.oNow || c.performance.webkitNow; a._getTime = function () {
                return (b && b.call(c.performance) || (new Date).getTime()) -
                    a._startTime
            }; createjs.Ticker = a
})(); this.createjs = this.createjs || {};
(function () {
    function a(a) {
        this.EventDispatcher_constructor(); this.ignoreGlobalPause = !1; this.loop = 0; this.bounce = this.reversed = this.useTicks = !1; this.timeScale = 1; this.position = this.duration = 0; this.rawPosition = -1; this._paused = !0; this._labelList = this._labels = this._parent = this._prev = this._next = null; a && (this.useTicks = !!a.useTicks, this.ignoreGlobalPause = !!a.ignoreGlobalPause, this.loop = !0 === a.loop ? -1 : a.loop || 0, this.reversed = !!a.reversed, this.bounce = !!a.bounce, this.timeScale = a.timeScale || 1, a.onChange && this.addEventListener("change",
            a.onChange), a.onComplete && this.addEventListener("complete", a.onComplete))
    } var c = createjs.extend(a, createjs.EventDispatcher); c._setPaused = function (a) { createjs.Tween._register(this, a); return this }; c.setPaused = createjs.deprecate(c._setPaused, "AbstractTween.setPaused"); c._getPaused = function () { return this._paused }; c.getPaused = createjs.deprecate(c._getPaused, "AbstactTween.getPaused"); c._getCurrentLabel = function (a) {
        var b = this.getLabels(); null == a && (a = this.position); for (var d = 0, c = b.length; d < c && !(a < b[d].position); d++);
        return 0 === d ? null : b[d - 1].label
    }; c.getCurrentLabel = createjs.deprecate(c._getCurrentLabel, "AbstractTween.getCurrentLabel"); try { Object.defineProperties(c, { paused: { set: c._setPaused, get: c._getPaused }, currentLabel: { get: c._getCurrentLabel } }) } catch (b) { } c.advance = function (a, c) { this.setPosition(this.rawPosition + a * this.timeScale, c) }; c.setPosition = function (a, c, d, f) {
        var b = this.duration, e = this.loop, l = this.rawPosition, m = 0; 0 > a && (a = 0); if (0 === b) { var n = !0; if (-1 !== l) return n } else {
            var k = a / b | 0; m = a - k * b; (n = -1 !== e && a >= e *
                b + b) && (a = (m = b) * (k = e) + b); if (a === l) return n; !this.reversed !== !(this.bounce && k % 2) && (m = b - m)
        } this.position = m; this.rawPosition = a; this._updatePosition(d, n); n && (this.paused = !0); f && f(this); c || this._runActions(l, a, d, !d && -1 === l); this.dispatchEvent("change"); n && this.dispatchEvent("complete")
    }; c.calculatePosition = function (a) { var b = this.duration, d = this.loop, c = 0; if (0 === b) return 0; -1 !== d && a >= d * b + b ? (a = b, c = d) : 0 > a ? a = 0 : (c = a / b | 0, a -= c * b); return !this.reversed !== !(this.bounce && c % 2) ? b - a : a }; c.getLabels = function () {
        var a = this._labelList;
        if (!a) { a = this._labelList = []; var c = this._labels, d; for (d in c) a.push({ label: d, position: c[d] }); a.sort(function (a, b) { return a.position - b.position }) } return a
    }; c.setLabels = function (a) { this._labels = a; this._labelList = null }; c.addLabel = function (a, c) { this._labels || (this._labels = {}); this._labels[a] = c; var b = this._labelList; if (b) { for (var e = 0, g = b.length; e < g && !(c < b[e].position); e++); b.splice(e, 0, { label: a, position: c }) } }; c.gotoAndPlay = function (a) { this.paused = !1; this._goto(a) }; c.gotoAndStop = function (a) {
        this.paused =
            !0; this._goto(a)
    }; c.resolve = function (a) { var b = Number(a); isNaN(b) && (b = this._labels && this._labels[a]); return b }; c.toString = function () { return "[AbstractTween]" }; c.clone = function () { throw "AbstractTween can not be cloned."; }; c._init = function (a) { a && a.paused || (this.paused = !1); a && null != a.position && this.setPosition(a.position) }; c._updatePosition = function (a, c) { }; c._goto = function (a) { a = this.resolve(a); null != a && this.setPosition(a, !1, !0) }; c._runActions = function (a, c, d, f) {
        if (this._actionHead || this.tweens) {
            var b = this.duration,
                e = this.reversed, l = this.bounce, m = this.loop, n, k, p; if (0 === b) { var r = n = k = p = 0; e = l = !1 } else r = a / b | 0, n = c / b | 0, k = a - r * b, p = c - n * b; -1 !== m && (n > m && (p = b, n = m), r > m && (k = b, r = m)); if (d) return this._runActionsRange(p, p, d, f); if (r !== n || k !== p || d || f) { -1 === r && (r = k = 0); a = a <= c; c = r; do { m = c === r ? k : a ? 0 : b; var u = c === n ? p : a ? b : 0; !e !== !(l && c % 2) && (m = b - m, u = b - u); if ((!l || c === r || m !== u) && this._runActionsRange(m, u, d, f || c !== r && !l)) return !0; f = !1 } while (a && ++c <= n || !a && --c >= n) }
        }
    }; c._runActionsRange = function (a, c, d, f) { }; createjs.AbstractTween = createjs.promote(a,
        "EventDispatcher")
})(); this.createjs = this.createjs || {};
(function () {
    function a(b, e) { this.AbstractTween_constructor(e); this.pluginData = null; this.target = b; this.passive = !1; this._stepTail = this._stepHead = new c(null, 0, 0, {}, null, !0); this._stepPosition = 0; this._injected = this._pluginIds = this._plugins = this._actionTail = this._actionHead = null; e && (this.pluginData = e.pluginData, e.override && a.removeTweens(b)); this.pluginData || (this.pluginData = {}); this._init(e) } function c(a, b, c, e, l, m) {
        this.next = null; this.prev = a; this.t = b; this.d = c; this.props = e; this.ease = l; this.passive = m; this.index =
            a ? a.index + 1 : 0
    } function b(a, b, c, e, l) { this.next = null; this.prev = a; this.t = b; this.d = 0; this.scope = c; this.funct = e; this.params = l } var e = createjs.extend(a, createjs.AbstractTween); a.IGNORE = {}; a._tweens = []; a._plugins = null; a._tweenHead = null; a._tweenTail = null; a.get = function (b, c) { return new a(b, c) }; a.tick = function (b, c) { for (var d = a._tweenHead; d;) { var e = d._next; c && !d.ignoreGlobalPause || d._paused || d.advance(d.useTicks ? 1 : b); d = e } }; a.handleEvent = function (a) { "tick" === a.type && this.tick(a.delta, a.paused) }; a.removeTweens =
        function (b) { if (b.tweenjs_count) { for (var c = a._tweenHead; c;) { var d = c._next; c.target === b && a._register(c, !0); c = d } b.tweenjs_count = 0 } }; a.removeAllTweens = function () { for (var b = a._tweenHead; b;) { var c = b._next; b._paused = !0; b.target && (b.target.tweenjs_count = 0); b._next = b._prev = null; b = c } a._tweenHead = a._tweenTail = null }; a.hasActiveTweens = function (b) { return b ? !!b.tweenjs_count : !!a._tweenHead }; a._installPlugin = function (b) {
            for (var c = b.priority = b.priority || 0, d = a._plugins = a._plugins || [], e = 0, l = d.length; e < l && !(c < d[e].priority); e++);
            d.splice(e, 0, b)
        }; a._register = function (b, c) { var d = b.target; if (!c && b._paused) d && (d.tweenjs_count = d.tweenjs_count ? d.tweenjs_count + 1 : 1), (d = a._tweenTail) ? (a._tweenTail = d._next = b, b._prev = d) : a._tweenHead = a._tweenTail = b, !a._inited && createjs.Ticker && (createjs.Ticker.addEventListener("tick", a), a._inited = !0); else if (c && !b._paused) { d && d.tweenjs_count--; d = b._next; var e = b._prev; d ? d._prev = e : a._tweenTail = e; e ? e._next = d : a._tweenHead = d; b._next = b._prev = null } b._paused = c }; e.wait = function (a, b) {
            0 < a && this._addStep(+a, this._stepTail.props,
                null, b); return this
        }; e.to = function (a, b, c) { if (null == b || 0 > b) b = 0; b = this._addStep(+b, null, c); this._appendProps(a, b); return this }; e.label = function (a) { this.addLabel(a, this.duration); return this }; e.call = function (a, b, c) { return this._addAction(c || this.target, a, b || [this]) }; e.set = function (a, b) { return this._addAction(b || this.target, this._set, [a]) }; e.play = function (a) { return this._addAction(a || this, this._set, [{ paused: !1 }]) }; e.pause = function (a) { return this._addAction(a || this, this._set, [{ paused: !0 }]) }; e.w = e.wait;
    e.t = e.to; e.c = e.call; e.s = e.set; e.toString = function () { return "[Tween]" }; e.clone = function () { throw "Tween can not be cloned."; }; e._addPlugin = function (a) { var b = this._pluginIds || (this._pluginIds = {}), c = a.ID; if (c && !b[c]) { b[c] = !0; b = this._plugins || (this._plugins = []); c = a.priority || 0; for (var d = 0, e = b.length; d < e; d++)if (c < b[d].priority) { b.splice(d, 0, a); return } b.push(a) } }; e._updatePosition = function (a, b) {
        var c = this._stepHead.next, d = this.position, e = this.duration; if (this.target && c) {
            for (var f = c.next; f && f.t <= d;)c = c.next,
                f = c.next; this._updateTargetProps(c, b ? 0 === e ? 1 : d / e : (d - c.t) / c.d, b)
        } this._stepPosition = c ? d - c.t : 0
    }; e._updateTargetProps = function (b, c, e) { if (!(this.passive = !!b.passive)) { var d, f = b.prev.props, g = b.props; if (d = b.ease) c = d(c, 0, 1, 1); d = this._plugins; var n; a: for (n in f) { var k = f[n]; var p = g[n]; k = k !== p && "number" === typeof k ? k + (p - k) * c : 1 <= c ? p : k; if (d) { p = 0; for (var r = d.length; p < r; p++) { var u = d[p].change(this, b, n, k, c, e); if (u === a.IGNORE) continue a; void 0 !== u && (k = u) } } this.target[n] = k } } }; e._runActionsRange = function (a, b, c, e) {
        var d =
            (c = a > b) ? this._actionTail : this._actionHead, f = b, h = a; c && (f = a, h = b); for (var g = this.position; d;) { var p = d.t; if (p === b || p > h && p < f || e && p === a) if (d.funct.apply(d.scope, d.params), g !== this.position) return !0; d = c ? d.prev : d.next }
    }; e._appendProps = function (b, c, e) {
        var d = this._stepHead.props, f = this.target, g = a._plugins, n, k, p = c.prev, r = p.props, u = c.props || (c.props = this._cloneProps(r)), t = {}; for (n in b) if (b.hasOwnProperty(n) && (t[n] = u[n] = b[n], void 0 === d[n])) {
            var v = void 0; if (g) for (k = g.length - 1; 0 <= k; k--) {
                var y = g[k].init(this, n,
                    v); void 0 !== y && (v = y); if (v === a.IGNORE) { delete u[n]; delete t[n]; break }
            } v !== a.IGNORE && (void 0 === v && (v = f[n]), r[n] = void 0 === v ? null : v)
        } for (n in t) { var z; for (b = p; (z = b) && (b = z.prev);)if (b.props !== z.props) { if (void 0 !== b.props[n]) break; b.props[n] = r[n] } } if (!1 !== e && (g = this._plugins)) for (k = g.length - 1; 0 <= k; k--)g[k].step(this, c, t); if (e = this._injected) this._injected = null, this._appendProps(e, c, !1)
    }; e._injectProp = function (a, b) { (this._injected || (this._injected = {}))[a] = b }; e._addStep = function (a, b, e, h) {
        b = new c(this._stepTail,
            this.duration, a, b, e, h || !1); this.duration += a; return this._stepTail = this._stepTail.next = b
    }; e._addAction = function (a, c, e) { a = new b(this._actionTail, this.duration, a, c, e); this._actionTail ? this._actionTail.next = a : this._actionHead = a; this._actionTail = a; return this }; e._set = function (a) { for (var b in a) this[b] = a[b] }; e._cloneProps = function (a) { var b = {}, c; for (c in a) b[c] = a[c]; return b }; createjs.Tween = createjs.promote(a, "AbstractTween")
})(); this.createjs = this.createjs || {};
(function () {
    function a(a) { if (a instanceof Array || null == a && 1 < arguments.length) { var b = a; var c = arguments[1]; a = arguments[2] } else a && (b = a.tweens, c = a.labels); this.AbstractTween_constructor(a); this.tweens = []; b && this.addTween.apply(this, b); this.setLabels(c); this._init(a) } var c = createjs.extend(a, createjs.AbstractTween); c.addTween = function (a) {
        a._parent && a._parent.removeTween(a); var b = arguments.length; if (1 < b) { for (var c = 0; c < b; c++)this.addTween(arguments[c]); return arguments[b - 1] } if (0 === b) return null; this.tweens.push(a);
        a._parent = this; a.paused = !0; b = a.duration; 0 < a.loop && (b *= a.loop + 1); b > this.duration && (this.duration = b); 0 <= this.rawPosition && a.setPosition(this.rawPosition); return a
    }; c.removeTween = function (a) { var b = arguments.length; if (1 < b) { for (var c = !0, f = 0; f < b; f++)c = c && this.removeTween(arguments[f]); return c } if (0 === b) return !0; b = this.tweens; for (f = b.length; f--;)if (b[f] === a) return b.splice(f, 1), a._parent = null, a.duration >= this.duration && this.updateDuration(), !0; return !1 }; c.updateDuration = function () {
        for (var a = this.duration =
            0, c = this.tweens.length; a < c; a++) { var d = this.tweens[a], f = d.duration; 0 < d.loop && (f *= d.loop + 1); f > this.duration && (this.duration = f) }
    }; c.toString = function () { return "[Timeline]" }; c.clone = function () { throw "Timeline can not be cloned."; }; c._updatePosition = function (a, c) { for (var b = this.position, e = 0, g = this.tweens.length; e < g; e++)this.tweens[e].setPosition(b, !0, a) }; c._runActionsRange = function (a, c, d, f) { for (var b = this.position, e = 0, l = this.tweens.length; e < l; e++)if (this.tweens[e]._runActions(a, c, d, f), b !== this.position) return !0 };
    createjs.Timeline = createjs.promote(a, "AbstractTween")
})(); this.createjs = this.createjs || {};
(function () {
    function a() { throw "Ease cannot be instantiated."; } a.linear = function (a) { return a }; a.none = a.linear; a.get = function (a) { -1 > a ? a = -1 : 1 < a && (a = 1); return function (b) { return 0 == a ? b : 0 > a ? b * (b * -a + 1 + a) : b * ((2 - b) * a + (1 - a)) } }; a.getPowIn = function (a) { return function (b) { return Math.pow(b, a) } }; a.getPowOut = function (a) { return function (b) { return 1 - Math.pow(1 - b, a) } }; a.getPowInOut = function (a) { return function (b) { return 1 > (b *= 2) ? .5 * Math.pow(b, a) : 1 - .5 * Math.abs(Math.pow(2 - b, a)) } }; a.quadIn = a.getPowIn(2); a.quadOut = a.getPowOut(2);
    a.quadInOut = a.getPowInOut(2); a.cubicIn = a.getPowIn(3); a.cubicOut = a.getPowOut(3); a.cubicInOut = a.getPowInOut(3); a.quartIn = a.getPowIn(4); a.quartOut = a.getPowOut(4); a.quartInOut = a.getPowInOut(4); a.quintIn = a.getPowIn(5); a.quintOut = a.getPowOut(5); a.quintInOut = a.getPowInOut(5); a.sineIn = function (a) { return 1 - Math.cos(a * Math.PI / 2) }; a.sineOut = function (a) { return Math.sin(a * Math.PI / 2) }; a.sineInOut = function (a) { return -.5 * (Math.cos(Math.PI * a) - 1) }; a.getBackIn = function (a) { return function (b) { return b * b * ((a + 1) * b - a) } };
    a.backIn = a.getBackIn(1.7); a.getBackOut = function (a) { return function (b) { return --b * b * ((a + 1) * b + a) + 1 } }; a.backOut = a.getBackOut(1.7); a.getBackInOut = function (a) { a *= 1.525; return function (b) { return 1 > (b *= 2) ? .5 * b * b * ((a + 1) * b - a) : .5 * ((b -= 2) * b * ((a + 1) * b + a) + 2) } }; a.backInOut = a.getBackInOut(1.7); a.circIn = function (a) { return -(Math.sqrt(1 - a * a) - 1) }; a.circOut = function (a) { return Math.sqrt(1 - --a * a) }; a.circInOut = function (a) { return 1 > (a *= 2) ? -.5 * (Math.sqrt(1 - a * a) - 1) : .5 * (Math.sqrt(1 - (a -= 2) * a) + 1) }; a.bounceIn = function (c) {
        return 1 -
            a.bounceOut(1 - c)
    }; a.bounceOut = function (a) { return a < 1 / 2.75 ? 7.5625 * a * a : a < 2 / 2.75 ? 7.5625 * (a -= 1.5 / 2.75) * a + .75 : a < 2.5 / 2.75 ? 7.5625 * (a -= 2.25 / 2.75) * a + .9375 : 7.5625 * (a -= 2.625 / 2.75) * a + .984375 }; a.bounceInOut = function (c) { return .5 > c ? .5 * a.bounceIn(2 * c) : .5 * a.bounceOut(2 * c - 1) + .5 }; a.getElasticIn = function (a, b) { var c = 2 * Math.PI; return function (d) { if (0 == d || 1 == d) return d; var e = b / c * Math.asin(1 / a); return -(a * Math.pow(2, 10 * --d) * Math.sin((d - e) * c / b)) } }; a.elasticIn = a.getElasticIn(1, .3); a.getElasticOut = function (a, b) {
        var c = 2 * Math.PI;
        return function (d) { return 0 == d || 1 == d ? d : a * Math.pow(2, -10 * d) * Math.sin((d - b / c * Math.asin(1 / a)) * c / b) + 1 }
    }; a.elasticOut = a.getElasticOut(1, .3); a.getElasticInOut = function (a, b) { var c = 2 * Math.PI; return function (d) { var e = b / c * Math.asin(1 / a); return 1 > (d *= 2) ? -.5 * a * Math.pow(2, 10 * --d) * Math.sin((d - e) * c / b) : a * Math.pow(2, -10 * --d) * Math.sin((d - e) * c / b) * .5 + 1 } }; a.elasticInOut = a.getElasticInOut(1, .3 * 1.5); createjs.Ease = a
})(); this.createjs = this.createjs || {};
(function () {
    function a() { throw "MotionGuidePlugin cannot be instantiated."; } a.priority = 0; a.ID = "MotionGuide"; a.install = function () { createjs.Tween._installPlugin(a); return createjs.Tween.IGNORE }; a.init = function (c, b, e) { "guide" == b && c._addPlugin(a) }; a.step = function (c, b, e) {
        for (var d in e) if ("guide" === d) {
            var f = b.props.guide, g = a._solveGuideData(e.guide, f); f.valid = !g; var h = f.endData; c._injectProp("x", h.x); c._injectProp("y", h.y); if (g || !f.orient) break; f.startOffsetRot = (void 0 === b.prev.props.rotation ? c.target.rotation ||
                0 : b.prev.props.rotation) - f.startData.rotation; if ("fixed" == f.orient) f.endAbsRot = h.rotation + f.startOffsetRot, f.deltaRotation = 0; else { g = void 0 === e.rotation ? c.target.rotation || 0 : e.rotation; h = g - f.endData.rotation - f.startOffsetRot; var l = h % 360; f.endAbsRot = g; switch (f.orient) { case "auto": f.deltaRotation = h; break; case "cw": f.deltaRotation = (l + 360) % 360 + 360 * Math.abs(h / 360 | 0); break; case "ccw": f.deltaRotation = (l - 360) % 360 + -360 * Math.abs(h / 360 | 0) } } c._injectProp("rotation", f.endAbsRot)
        }
    }; a.change = function (c, b, e, d, f, g) {
        if ((d =
            b.props.guide) && b.props !== b.prev.props && d !== b.prev.props.guide) { if ("guide" === e && !d.valid || "x" == e || "y" == e || "rotation" === e && d.orient) return createjs.Tween.IGNORE; a._ratioToPositionData(f, d, c.target) }
    }; a.debug = function (c, b, e) {
        c = c.guide || c; var d = a._findPathProblems(c); d && console.error("MotionGuidePlugin Error found: \n" + d); if (!b) return d; var f, g = c.path, h = g.length; b.save(); b.lineCap = "round"; b.lineJoin = "miter"; b.beginPath(); b.moveTo(g[0], g[1]); for (f = 2; f < h; f += 4)b.quadraticCurveTo(g[f], g[f + 1], g[f + 2], g[f +
            3]); b.strokeStyle = "black"; b.lineWidth = 4.5; b.stroke(); b.strokeStyle = "white"; b.lineWidth = 3; b.stroke(); b.closePath(); g = e.length; if (e && g) { h = {}; var l = {}; a._solveGuideData(c, h); for (f = 0; f < g; f++)h.orient = "fixed", a._ratioToPositionData(e[f], h, l), b.beginPath(), b.moveTo(l.x, l.y), b.lineTo(l.x + 9 * Math.cos(.0174533 * l.rotation), l.y + 9 * Math.sin(.0174533 * l.rotation)), b.strokeStyle = "black", b.lineWidth = 4.5, b.stroke(), b.strokeStyle = "red", b.lineWidth = 3, b.stroke(), b.closePath() } b.restore(); return d
    }; a._solveGuideData = function (c,
        b) {
        var e; if (e = a.debug(c)) return e; var d = b.path = c.path; b.orient = c.orient; b.subLines = []; b.totalLength = 0; b.startOffsetRot = 0; b.deltaRotation = 0; b.startData = { ratio: 0 }; b.endData = { ratio: 1 }; b.animSpan = 1; var f = d.length, g, h = {}; var l = d[0]; var m = d[1]; for (e = 2; e < f; e += 4) {
            var n = d[e]; var k = d[e + 1]; var p = d[e + 2]; var r = d[e + 3]; var u = { weightings: [], estLength: 0, portion: 0 }, t = l; var v = m; for (g = 1; 10 >= g; g++)a._getParamsForCurve(l, m, n, k, p, r, g / 10, !1, h), t = h.x - t, v = h.y - v, v = Math.sqrt(t * t + v * v), u.weightings.push(v), u.estLength += v, t = h.x,
                v = h.y; b.totalLength += u.estLength; for (g = 0; 10 > g; g++)v = u.estLength, u.weightings[g] /= v; b.subLines.push(u); l = p; m = r
        } v = b.totalLength; d = b.subLines.length; for (e = 0; e < d; e++)b.subLines[e].portion = b.subLines[e].estLength / v; e = isNaN(c.start) ? 0 : c.start; d = isNaN(c.end) ? 1 : c.end; a._ratioToPositionData(e, b, b.startData); a._ratioToPositionData(d, b, b.endData); b.startData.ratio = e; b.endData.ratio = d; b.animSpan = b.endData.ratio - b.startData.ratio
    }; a._ratioToPositionData = function (c, b, e) {
        var d = b.subLines, f, g = 0, h = c * b.animSpan + b.startData.ratio;
        var l = d.length; for (f = 0; f < l; f++) { var m = d[f].portion; if (g + m >= h) { var n = f; break } g += m } void 0 === n && (n = l - 1, g -= m); d = d[n].weightings; var k = m; l = d.length; for (f = 0; f < l; f++) { m = d[f] * k; if (g + m >= h) break; g += m } n = 4 * n + 2; l = b.path; a._getParamsForCurve(l[n - 2], l[n - 1], l[n], l[n + 1], l[n + 2], l[n + 3], f / 10 + (h - g) / m * .1, b.orient, e); b.orient && (e.rotation = .99999 <= c && 1.00001 >= c && void 0 !== b.endAbsRot ? b.endAbsRot : e.rotation + (b.startOffsetRot + c * b.deltaRotation)); return e
    }; a._getParamsForCurve = function (a, b, e, d, f, g, h, l, m) {
        var c = 1 - h; m.x = c * c * a +
            2 * c * h * e + h * h * f; m.y = c * c * b + 2 * c * h * d + h * h * g; l && (m.rotation = 57.2957795 * Math.atan2((d - b) * c + (g - d) * h, (e - a) * c + (f - e) * h))
    }; a._findPathProblems = function (a) {
        var b = a.path, c = b && b.length || 0; if (6 > c || (c - 2) % 4) return "\tCannot parse 'path' array due to invalid number of entries in path. There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\nOnly [ " + (c + " ] values found. Expected: " + Math.max(4 *
            Math.ceil((c - 2) / 4) + 2, 6)); for (var d = 0; d < c; d++)if (isNaN(b[d])) return "All data in path array must be numeric"; b = a.start; if (isNaN(b) && void 0 !== b) return "'start' out of bounds. Expected 0 to 1, got: " + b; b = a.end; if (isNaN(b) && void 0 !== b) return "'end' out of bounds. Expected 0 to 1, got: " + b; if ((a = a.orient) && "fixed" != a && "auto" != a && "cw" != a && "ccw" != a) return 'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: ' + a
    }; createjs.MotionGuidePlugin = a
})(); this.createjs = this.createjs || {};
(function () { var a = createjs.TweenJS = createjs.TweenJS || {}; a.version = "1.0.0"; a.buildDate = "Thu, 14 Sep 2017 19:47:47 GMT" })();
(function () {
    var a = "undefined" !== typeof window && "undefined" !== typeof window.document ? window.document : {}, c = "undefined" !== typeof module && module.exports, b = function () {
        for (var b, c = ["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "), "webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "), "webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
        "mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "), "msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")], d = 0, e = c.length, m = {}; d < e; d++)if ((b = c[d]) && b[1] in a) { for (d = 0; d < b.length; d++)m[c[0][d]] = b[d]; return m } return !1
    }(), e = { change: b.fullscreenchange, error: b.fullscreenerror }, d = {
        request: function (c) {
            return new Promise(function (d, e) {
                var f = function () {
                    this.off("change",
                        f); d()
                }.bind(this); this.on("change", f); c = c || a.documentElement; Promise.resolve(c[b.requestFullscreen]())["catch"](e)
            }.bind(this))
        }, exit: function () { return new Promise(function (c, d) { if (this.isFullscreen) { var e = function () { this.off("change", e); c() }.bind(this); this.on("change", e); Promise.resolve(a[b.exitFullscreen]())["catch"](d) } else c() }.bind(this)) }, toggle: function (a) { return this.isFullscreen ? this.exit() : this.request(a) }, onchange: function (a) { this.on("change", a) }, onerror: function (a) { this.on("error", a) },
        on: function (b, c) { var d = e[b]; d && a.addEventListener(d, c, !1) }, off: function (b, c) { var d = e[b]; d && a.removeEventListener(d, c, !1) }, raw: b
    }; b ? (Object.defineProperties(d, { isFullscreen: { get: function () { return !!a[b.fullscreenElement] } }, element: { enumerable: !0, get: function () { return a[b.fullscreenElement] } }, isEnabled: { enumerable: !0, get: function () { return !!a[b.fullscreenEnabled] } } }), c ? module.exports = d : window.screenfull = d) : c ? module.exports = { isEnabled: !1 } : window.screenfull = { isEnabled: !1 }
})();
(function () {
    function a(a) { a = String(a); return a.charAt(0).toUpperCase() + a.slice(1) } function c(a, b) { var c = -1, d = a ? a.length : 0; if ("number" == typeof d && -1 < d && d <= r) for (; ++c < d;)b(a[c], c, a); else e(a, b) } function b(b) { b = String(b).replace(/^ +| +$/g, ""); return /^(?:webOS|i(?:OS|P))/.test(b) ? b : a(b) } function e(a, b) { for (var c in a) t.call(a, c) && b(a[c], c, a) } function d(b) { return null == b ? a(b) : v.call(b).slice(8, -1) } function f(a, b) {
        var c = null != a ? typeof a[b] : "number"; return !/^(?:boolean|number|string|undefined)$/.test(c) &&
            ("object" == c ? !!a[b] : !0)
    } function g(a) { return String(a).replace(/([ -])(?!$)/g, "$1?") } function h(a, b) { var d = null; c(a, function (c, e) { d = b(d, c, e, a) }); return d } function l(a) {
        function c(c) {
            return h(c, function (c, d) {
                var e = d.pattern || g(d); !c && (c = RegExp("\\b" + e + " *\\d+[.\\w_]*", "i").exec(a) || RegExp("\\b" + e + " *\\w+-[\\w]*", "i").exec(a) || RegExp("\\b" + e + "(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)", "i").exec(a)) && ((c = String(d.label && !RegExp(e, "i").test(d.label) ? d.label : c).split("/"))[1] && !/[\d.]+/.test(c[0]) && (c[0] +=
                    " " + c[1]), d = d.label || d, c = b(c[0].replace(RegExp(e, "i"), d).replace(RegExp("; *(?:" + d + "[_-])?", "i"), " ").replace(RegExp("(" + d + ")[-_.]?(\\w)", "i"), "$1 $2"))); return c
            })
        } function m(b) { return h(b, function (b, c) { return b || (RegExp(c + "(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)", "i").exec(a) || 0)[1] || null }) } var k = n, p = a && "object" == typeof a && "String" != d(a); p && (k = a, a = null); var t = k.navigator || {}, r = t.userAgent || ""; a || (a = r); var z = p ? !!t.likeChrome : /\bChrome\b/.test(a) && !/internal|\n/i.test(v.toString()),
            y = p ? "Object" : "ScriptBridgingProxyObject", C = p ? "Object" : "Environment", E = p && k.java ? "JavaPackage" : d(k.java), N = p ? "Object" : "RuntimeObject"; C = (E = /\bJava/.test(E) && k.java) && d(k.environment) == C; var O = E ? "a" : "\u03b1", X = E ? "b" : "\u03b2", U = k.document || {}, P = k.operamini || k.opera, R = u.test(R = p && P ? P["[[Class]]"] : d(P)) ? R : P = null, q, S = a; p = []; var T = null, Q = a == r; r = Q && P && "function" == typeof P.version && P.version(); var A = function (b) {
                return h(b, function (b, c) {
                    return b || RegExp("\\b" + (c.pattern || g(c)) + "\\b", "i").exec(a) && (c.label ||
                        c)
                })
            }([{ label: "EdgeHTML", pattern: "Edge" }, "Trident", { label: "WebKit", pattern: "AppleWebKit" }, "iCab", "Presto", "NetFront", "Tasman", "KHTML", "Gecko"]), w = function (b) { return h(b, function (b, c) { return b || RegExp("\\b" + (c.pattern || g(c)) + "\\b", "i").exec(a) && (c.label || c) }) }(["Adobe AIR", "Arora", "Avant Browser", "Breach", "Camino", "Electron", "Epiphany", "Fennec", "Flock", "Galeon", "GreenBrowser", "iCab", "Iceweasel", "K-Meleon", "Konqueror", "Lunascape", "Maxthon", { label: "Microsoft Edge", pattern: "Edge" }, "Midori", "Nook Browser",
                "PaleMoon", "PhantomJS", "Raven", "Rekonq", "RockMelt", { label: "Samsung Internet", pattern: "SamsungBrowser" }, "SeaMonkey", { label: "Silk", pattern: "(?:Cloud9|Silk-Accelerated)" }, "Sleipnir", "SlimBrowser", { label: "SRWare Iron", pattern: "Iron" }, "Sunrise", "Swiftfox", "Waterfox", "WebPositive", "Opera Mini", { label: "Opera Mini", pattern: "OPiOS" }, "Opera", { label: "Opera", pattern: "OPR" }, "Chrome", { label: "Chrome Mobile", pattern: "(?:CriOS|CrMo)" }, { label: "Firefox", pattern: "(?:Firefox|Minefield)" }, { label: "Firefox for iOS", pattern: "FxiOS" },
                { label: "IE", pattern: "IEMobile" }, { label: "IE", pattern: "MSIE" }, "Safari"]), B = c([{ label: "BlackBerry", pattern: "BB10" }, "BlackBerry", { label: "Galaxy S", pattern: "GT-I9000" }, { label: "Galaxy S2", pattern: "GT-I9100" }, { label: "Galaxy S3", pattern: "GT-I9300" }, { label: "Galaxy S4", pattern: "GT-I9500" }, { label: "Galaxy S5", pattern: "SM-G900" }, { label: "Galaxy S6", pattern: "SM-G920" }, { label: "Galaxy S6 Edge", pattern: "SM-G925" }, { label: "Galaxy S7", pattern: "SM-G930" }, { label: "Galaxy S7 Edge", pattern: "SM-G935" }, "Google TV", "Lumia", "iPad",
                    "iPod", "iPhone", "Kindle", { label: "Kindle Fire", pattern: "(?:Cloud9|Silk-Accelerated)" }, "Nexus", "Nook", "PlayBook", "PlayStation Vita", "PlayStation", "TouchPad", "Transformer", { label: "Wii U", pattern: "WiiU" }, "Wii", "Xbox One", { label: "Xbox 360", pattern: "Xbox" }, "Xoom"]), I = function (b) { return h(b, function (b, c, d) { return b || (c[B] || c[/^[a-z]+(?: +[a-z]+\b)*/i.exec(B)] || RegExp("\\b" + g(d) + "(?:\\b|\\w*\\d)", "i").exec(a)) && d }) }({
                        Apple: { iPad: 1, iPhone: 1, iPod: 1 }, Archos: {}, Amazon: { Kindle: 1, "Kindle Fire": 1 }, Asus: { Transformer: 1 },
                        "Barnes & Noble": { Nook: 1 }, BlackBerry: { PlayBook: 1 }, Google: { "Google TV": 1, Nexus: 1 }, HP: { TouchPad: 1 }, HTC: {}, LG: {}, Microsoft: { Xbox: 1, "Xbox One": 1 }, Motorola: { Xoom: 1 }, Nintendo: { "Wii U": 1, Wii: 1 }, Nokia: { Lumia: 1 }, Samsung: { "Galaxy S": 1, "Galaxy S2": 1, "Galaxy S3": 1, "Galaxy S4": 1 }, Sony: { PlayStation: 1, "PlayStation Vita": 1 }
                    }), x = function (c) {
                        return h(c, function (c, d) {
                            var e = d.pattern || g(d); if (!c && (c = RegExp("\\b" + e + "(?:/[\\d.]+|[ \\w.]*)", "i").exec(a))) {
                                var f = c, h = d.label || d, k = {
                                    "10.0": "10", "6.4": "10 Technical Preview",
                                    "6.3": "8.1", "6.2": "8", "6.1": "Server 2008 R2 / 7", "6.0": "Server 2008 / Vista", "5.2": "Server 2003 / XP 64-bit", "5.1": "XP", "5.01": "2000 SP1", "5.0": "2000", "4.0": "NT", "4.90": "ME"
                                }; e && h && /^Win/i.test(f) && !/^Windows Phone /i.test(f) && (k = k[/[\d.]+$/.exec(f)]) && (f = "Windows " + k); f = String(f); e && h && (f = f.replace(RegExp(e, "i"), h)); c = f = b(f.replace(/ ce$/i, " CE").replace(/\bhpw/i, "web").replace(/\bMacintosh\b/, "Mac OS").replace(/_PowerPC\b/i, " OS").replace(/\b(OS X) [^ \d]+/i, "$1").replace(/\bMac (OS X)\b/, "$1").replace(/\/(\d)/,
                                    " $1").replace(/_/g, ".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i, "").replace(/\bx86\.64\b/gi, "x86_64").replace(/\b(Windows Phone) OS\b/, "$1").replace(/\b(Chrome OS \w+) [\d.]+\b/, "$1").split(" on ")[0])
                            } return c
                        })
                    }(["Windows Phone", "Android", "CentOS", { label: "Chrome OS", pattern: "CrOS" }, "Debian", "Fedora", "FreeBSD", "Gentoo", "Haiku", "Kubuntu", "Linux Mint", "OpenBSD", "Red Hat", "SuSE", "Ubuntu", "Xubuntu", "Cygwin", "Symbian OS", "hpwOS", "webOS ", "webOS", "Tablet OS", "Tizen", "Linux", "Mac OS X", "Macintosh", "Mac",
                        "Windows 98;", "Windows "]); A && (A = [A]); I && !B && (B = c([I])); if (q = /\bGoogle TV\b/.exec(B)) B = q[0]; /\bSimulator\b/i.test(a) && (B = (B ? B + " " : "") + "Simulator"); "Opera Mini" == w && /\bOPiOS\b/.test(a) && p.push("running in Turbo/Uncompressed mode"); "IE" == w && /\blike iPhone OS\b/.test(a) ? (q = l(a.replace(/like iPhone OS/, "")), I = q.manufacturer, B = q.product) : /^iP/.test(B) ? (w || (w = "Safari"), x = "iOS" + ((q = / OS ([\d_]+)/i.exec(a)) ? " " + q[1].replace(/_/g, ".") : "")) : "Konqueror" != w || /buntu/i.test(x) ? I && "Google" != I && (/Chrome/.test(w) &&
                            !/\bMobile Safari\b/i.test(a) || /\bVita\b/.test(B)) || /\bAndroid\b/.test(x) && /^Chrome/.test(w) && /\bVersion\//i.test(a) ? (w = "Android Browser", x = /\bAndroid\b/.test(x) ? x : "Android") : "Silk" == w ? (/\bMobi/i.test(a) || (x = "Android", p.unshift("desktop mode")), /Accelerated *= *true/i.test(a) && p.unshift("accelerated")) : "PaleMoon" == w && (q = /\bFirefox\/([\d.]+)\b/.exec(a)) ? p.push("identifying as Firefox " + q[1]) : "Firefox" == w && (q = /\b(Mobile|Tablet|TV)\b/i.exec(a)) ? (x || (x = "Firefox OS"), B || (B = q[1])) : !w || (q = !/\bMinefield\b/i.test(a) &&
                                /\b(?:Firefox|Safari)\b/.exec(w)) ? (w && !B && /[\/,]|^[^(]+?\)/.test(a.slice(a.indexOf(q + "/") + 8)) && (w = null), (q = B || I || x) && (B || I || /\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(x)) && (w = /[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(x) ? x : q) + " Browser")) : "Electron" == w && (q = (/\bChrome\/([\d.]+)\b/.exec(a) || 0)[1]) && p.push("Chromium " + q) : x = "Kubuntu"; r || (r = m(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))", "Version", g(w), "(?:Firefox|Minefield|NetFront)"]));
        if (q = "iCab" == A && 3 < parseFloat(r) && "WebKit" || /\bOpera\b/.test(w) && (/\bOPR\b/.test(a) ? "Blink" : "Presto") || /\b(?:Midori|Nook|Safari)\b/i.test(a) && !/^(?:Trident|EdgeHTML)$/.test(A) && "WebKit" || !A && /\bMSIE\b/i.test(a) && ("Mac OS" == x ? "Tasman" : "Trident") || "WebKit" == A && /\bPlayStation\b(?! Vita\b)/i.test(w) && "NetFront") A = [q]; "IE" == w && (q = (/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(a) || 0)[1]) ? (w += " Mobile", x = "Windows Phone " + (/\+$/.test(q) ? q : q + ".x"), p.unshift("desktop mode")) : /\bWPDesktop\b/i.test(a) ? (w = "IE Mobile", x = "Windows Phone 8.x",
            p.unshift("desktop mode"), r || (r = (/\brv:([\d.]+)/.exec(a) || 0)[1])) : "IE" != w && "Trident" == A && (q = /\brv:([\d.]+)/.exec(a)) && (w && p.push("identifying as " + w + (r ? " " + r : "")), w = "IE", r = q[1]); if (Q) {
                if (f(k, "global")) if (E && (q = E.lang.System, S = q.getProperty("os.arch"), x = x || q.getProperty("os.name") + " " + q.getProperty("os.version")), C) { try { r = k.require("ringo/engine").version.join("."), w = "RingoJS" } catch (W) { (q = k.system) && q.global.system == k.system && (w = "Narwhal", x || (x = q[0].os || null)) } w || (w = "Rhino") } else "object" == typeof k.process &&
                    !k.process.browser && (q = k.process) && ("object" == typeof q.versions && ("string" == typeof q.versions.electron ? (p.push("Node " + q.versions.node), w = "Electron", r = q.versions.electron) : "string" == typeof q.versions.nw && (p.push("Chromium " + r, "Node " + q.versions.node), w = "NW.js", r = q.versions.nw)), w || (w = "Node.js", S = q.arch, x = q.platform, r = (r = /[\d.]+/.exec(q.version)) ? r[0] : null)); else d(q = k.runtime) == y ? (w = "Adobe AIR", x = q.flash.system.Capabilities.os) : d(q = k.phantom) == N ? (w = "PhantomJS", r = (q = q.version || null) && q.major + "." + q.minor +
                        "." + q.patch) : "number" == typeof U.documentMode && (q = /\bTrident\/(\d+)/i.exec(a)) ? (r = [r, U.documentMode], (q = +q[1] + 4) != r[1] && (p.push("IE " + r[1] + " mode"), A && (A[1] = ""), r[1] = q), r = "IE" == w ? String(r[1].toFixed(1)) : r[0]) : "number" == typeof U.documentMode && /^(?:Chrome|Firefox)\b/.test(w) && (p.push("masking as " + w + " " + r), w = "IE", r = "11.0", A = ["Trident"], x = "Windows"); x = x && b(x)
            } r && (q = /(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(r) || /(?:alpha|beta)(?: ?\d)?/i.exec(a + ";" + (Q && t.appMinorVersion)) || /\bMinefield\b/i.test(a) &&
                "a") && (T = /b/i.test(q) ? "beta" : "alpha", r = r.replace(RegExp(q + "\\+?$"), "") + ("beta" == T ? X : O) + (/\d+\+?/.exec(q) || "")); if ("Fennec" == w || "Firefox" == w && /\b(?:Android|Firefox OS)\b/.test(x)) w = "Firefox Mobile"; else if ("Maxthon" == w && r) r = r.replace(/\.[\d.]+/, ".x"); else if (/\bXbox\b/i.test(B)) "Xbox 360" == B && (x = null), "Xbox 360" == B && /\bIEMobile\b/.test(a) && p.unshift("mobile mode"); else if (!/^(?:Chrome|IE|Opera)$/.test(w) && (!w || B || /Browser|Mobi/.test(w)) || "Windows CE" != x && !/Mobi/i.test(a)) if ("IE" == w && Q) try {
                    null === k.external &&
                        p.unshift("platform preview")
                } catch (W) { p.unshift("embedded") } else (/\bBlackBerry\b/.test(B) || /\bBB10\b/.test(a)) && (q = (RegExp(B.replace(/ +/g, " *") + "/([.\\d]+)", "i").exec(a) || 0)[1] || r) ? (q = [q, /BB10/.test(a)], x = (q[1] ? (B = null, I = "BlackBerry") : "Device Software") + " " + q[0], r = null) : this != e && "Wii" != B && (Q && P || /Opera/.test(w) && /\b(?:MSIE|Firefox)\b/i.test(a) || "Firefox" == w && /\bOS X (?:\d+\.){2,}/.test(x) || "IE" == w && (x && !/^Win/.test(x) && 5.5 < r || /\bWindows XP\b/.test(x) && 8 < r || 8 == r && !/\bTrident\b/.test(a))) && !u.test(q =
                    l.call(e, a.replace(u, "") + ";")) && q.name && (q = "ing as " + q.name + ((q = q.version) ? " " + q : ""), u.test(w) ? (/\bIE\b/.test(q) && "Mac OS" == x && (x = null), q = "identify" + q) : (q = "mask" + q, w = R ? b(R.replace(/([a-z])([A-Z])/g, "$1 $2")) : "Opera", /\bIE\b/.test(q) && (x = null), Q || (r = null)), A = ["Presto"], p.push(q)); else w += " Mobile"; if (q = (/\bAppleWebKit\/([\d.]+\+?)/i.exec(a) || 0)[1]) {
                        q = [parseFloat(q.replace(/\.(\d)$/, ".0$1")), q]; if ("Safari" == w && "+" == q[1].slice(-1)) w = "WebKit Nightly", T = "alpha", r = q[1].slice(0, -1); else if (r == q[1] || r == (q[2] =
                            (/\bSafari\/([\d.]+\+?)/i.exec(a) || 0)[1])) r = null; q[1] = (/\bChrome\/([\d.]+)/i.exec(a) || 0)[1]; 537.36 == q[0] && 537.36 == q[2] && 28 <= parseFloat(q[1]) && "WebKit" == A && (A = ["Blink"]); Q && (z || q[1]) ? (A && (A[1] = "like Chrome"), q = q[1] || (q = q[0], 530 > q ? 1 : 532 > q ? 2 : 532.05 > q ? 3 : 533 > q ? 4 : 534.03 > q ? 5 : 534.07 > q ? 6 : 534.1 > q ? 7 : 534.13 > q ? 8 : 534.16 > q ? 9 : 534.24 > q ? 10 : 534.3 > q ? 11 : 535.01 > q ? 12 : 535.02 > q ? "13+" : 535.07 > q ? 15 : 535.11 > q ? 16 : 535.19 > q ? 17 : 536.05 > q ? 18 : 536.1 > q ? 19 : 537.01 > q ? 20 : 537.11 > q ? "21+" : 537.13 > q ? 23 : 537.18 > q ? 24 : 537.24 > q ? 25 : 537.36 > q ? 26 : "Blink" !=
                                A ? "27" : "28")) : (A && (A[1] = "like Safari"), q = (q = q[0], 400 > q ? 1 : 500 > q ? 2 : 526 > q ? 3 : 533 > q ? 4 : 534 > q ? "4+" : 535 > q ? 5 : 537 > q ? 6 : 538 > q ? 7 : 601 > q ? 8 : "8")); A && (A[1] += " " + (q += "number" == typeof q ? ".x" : /[.+]/.test(q) ? "" : "+")); "Safari" == w && (!r || 45 < parseInt(r)) && (r = q)
                    } "Opera" == w && (q = /\bzbov|zvav$/.exec(x)) ? (w += " ", p.unshift("desktop mode"), "zvav" == q ? (w += "Mini", r = null) : w += "Mobile", x = x.replace(RegExp(" *" + q + "$"), "")) : "Safari" == w && /\bChrome\b/.exec(A && A[1]) && (p.unshift("desktop mode"), w = "Chrome Mobile", r = null, /\bOS X\b/.test(x) ? (I =
                        "Apple", x = "iOS 4.3+") : x = null); r && 0 == r.indexOf(q = /[\d.]+$/.exec(x)) && -1 < a.indexOf("/" + q + "-") && (x = String(x.replace(q, "")).replace(/^ +| +$/g, "")); A && !/\b(?:Avant|Nook)\b/.test(w) && (/Browser|Lunascape|Maxthon/.test(w) || "Safari" != w && /^iOS/.test(x) && /\bSafari\b/.test(A[1]) || /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(w) && A[1]) && (q = A[A.length - 1]) && p.push(q); p.length && (p = ["(" + p.join("; ") + ")"]); I && B && 0 > B.indexOf(I) && p.push("on " + I); B && p.push((/^on /.test(p[p.length -
                            1]) ? "" : "on ") + B); if (x) { var V = (q = / ([\d.+]+)$/.exec(x)) && "/" == x.charAt(x.length - q[0].length - 1); x = { architecture: 32, family: q && !V ? x.replace(q[0], "") : x, version: q ? q[1] : null, toString: function () { var a = this.version; return this.family + (a && !V ? " " + a : "") + (64 == this.architecture ? " 64-bit" : "") } } } (q = /\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(S)) && !/\bi686\b/i.test(S) ? (x && (x.architecture = 64, x.family = x.family.replace(RegExp(" *" + q), "")), w && (/\bWOW64\b/i.test(a) || Q && /\w(?:86|32)$/.test(t.cpuClass || t.platform) && !/\bWin64; x64\b/i.test(a)) &&
                                p.unshift("32-bit")) : x && /^OS X/.test(x.family) && "Chrome" == w && 39 <= parseFloat(r) && (x.architecture = 64); a || (a = null); k = {}; k.description = a; k.layout = A && A[0]; k.manufacturer = I; k.name = w; k.prerelease = T; k.product = B; k.ua = a; k.version = w && r; k.os = x || { architecture: null, family: null, version: null, toString: function () { return "null" } }; k.parse = l; k.toString = function () { return this.description || "" }; k.version && p.unshift(r); k.name && p.unshift(w); x && w && (x != String(x).split(" ")[0] || x != w.split(" ")[0] && !B) && p.push(B ? "(" + x + ")" : "on " +
                                    x); p.length && (k.description = p.join(" ")); return k
    } var m = { "function": !0, object: !0 }, n = m[typeof window] && window || this, k = m[typeof exports] && exports; m = m[typeof module] && module && !module.nodeType && module; var p = k && m && "object" == typeof global && global; !p || p.global !== p && p.window !== p && p.self !== p || (n = p); var r = Math.pow(2, 53) - 1, u = /\bOpera/; p = Object.prototype; var t = p.hasOwnProperty, v = p.toString, y = l(); "function" == typeof define && "object" == typeof define.amd && define.amd ? (n.platform = y, define(function () { return y })) : k &&
        m ? e(y, function (a, b) { k[b] = a }) : n.platform = y
}).call(this); var s_iScaleFactor = 1, s_bIsIphone = !1, s_iOffsetX, s_iOffsetY;
(function (a) { (jQuery.browser = jQuery.browser || {}).mobile = /android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0, 4)) })(navigator.userAgent ||
    navigator.vendor || window.opera); $(window).resize(function () { sizeHandler() }); function NotImplementedError(a) { this.name = "NotImplementedError"; this.message = a || "" } NotImplementedError.prototype = Error.prototype; function error(a) { throw { name: "NotImplementedError", message: a }; } function trace(a) { console.log(a) } window.addEventListener("orientationchange", onOrientationChange); function onOrientationChange() { sizeHandler() }
function ifArrayContainsValue(a, c) { for (var b = 0; b < a.length; b++)if (a[b] === c) return !0; return !1 }
function getSize(a) {
    var c = a.toLowerCase(), b = window.document, e = b.documentElement; if (void 0 === window["inner" + a]) a = e["client" + a]; else if (window["inner" + a] != e["client" + a]) {
        var d = b.createElement("body"); d.id = "vpw-test-b"; d.style.cssText = "overflow:scroll"; var f = b.createElement("div"); f.id = "vpw-test-d"; f.style.cssText = "position:absolute;top:-1000px"; f.innerHTML = "<style>@media(" + c + ":" + e["client" + a] + "px){body#vpw-test-b div#vpw-test-d{" + c + ":7px!important}}</style>"; d.appendChild(f); e.insertBefore(d, b.head);
        a = 7 == f["offset" + a] ? e["client" + a] : window["inner" + a]; e.removeChild(d)
    } else a = window["inner" + a]; return a
}
function sizeHandler() {
    window.scrollTo(0, 1); if ($("#canvas")) {
        var a = "safari" === platform.name.toLowerCase() ? getIOSWindowHeight() : getSize("Height"); var c = getSize("Width"); _checkOrientation(c, a); var b = Math.min(a / CANVAS_HEIGHT, c / CANVAS_WIDTH); s_iScaleFactor = b; var e = Math.round(CANVAS_WIDTH * b); b = Math.round(CANVAS_HEIGHT * b); if (b < a) { var d = a - b; b += d; e += CANVAS_WIDTH / CANVAS_HEIGHT * d } else e < c && (d = c - e, e += d, b += CANVAS_HEIGHT / CANVAS_WIDTH * d); d = a / 2 - b / 2; var f = c / 2 - e / 2, g = CANVAS_WIDTH / e; if (f * g < -EDGEBOARD_X || d * g < -EDGEBOARD_Y) b =
            Math.min(a / (CANVAS_HEIGHT - 2 * EDGEBOARD_Y), c / (CANVAS_WIDTH - 2 * EDGEBOARD_X)), e = Math.round(CANVAS_WIDTH * b), b = Math.round(CANVAS_HEIGHT * b), d = (a - b) / 2, f = (c - e) / 2, g = CANVAS_WIDTH / e; s_iOffsetX = Math.floor(-1 * f * g); s_iOffsetY = Math.floor(-1 * d * g); 0 <= d && (s_iOffsetY = 0); 0 <= f && (s_iOffsetX = 0); null !== s_oInterface && s_oInterface.refreshButtonPos(s_iOffsetX, s_iOffsetY); null !== s_oMenu && s_oMenu.refreshButtonPos(s_iOffsetX, s_iOffsetY); s_bIsIphone ? (canvas = document.getElementById("canvas"), s_oStage.canvas.width = Math.floor(2 * e),
                s_oStage.canvas.height = Math.floor(2 * b), canvas.style.width = Math.floor(e) + "px", canvas.style.height = Math.floor(b) + "px", s_oStage.scaleX = s_oStage.scaleY = 2 * Math.min(e / CANVAS_WIDTH, b / CANVAS_HEIGHT)) : s_bMobile ? ($("#canvas").css("width", e + "px"), $("#canvas").css("height", b + "px")) : (s_oStage.canvas.width = Math.floor(e), s_oStage.canvas.height = Math.floor(b), s_iScaleFactor = Math.min(e / CANVAS_WIDTH, b / CANVAS_HEIGHT), s_oStage.scaleX = s_oStage.scaleY = s_iScaleFactor); 0 > d || (d = (a - b) / 2); $("#canvas").css("top", d + "px"); $("#canvas").css("left",
                    f + "px"); fullscreenHandler()
    }
}
function _checkOrientation(a, c) {
    s_bMobile && ENABLE_CHECK_ORIENTATION && (a > c ? "landscape" === $(".orientation-msg-container").attr("data-orientation") ? ($(".orientation-msg-container").css("display", "none"), s_oMain.startUpdate()) : ($(".orientation-msg-container").css("display", "block"), s_oMain.stopUpdate()) : "portrait" === $(".orientation-msg-container").attr("data-orientation") ? ($(".orientation-msg-container").css("display", "none"), s_oMain.startUpdate()) : ($(".orientation-msg-container").css("display", "block"),
        s_oMain.stopUpdate()))
} function isChrome() { return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor) } function isIOS() { var a = "iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";"); for (-1 !== navigator.userAgent.toLowerCase().indexOf("iphone") && (s_bIsIphone = !0); a.length;)if (navigator.platform === a.pop()) return !0; return s_bIsIphone = !1 } function getIOSWindowHeight() { return document.documentElement.clientWidth / window.innerWidth * window.innerHeight }
function getHeightOfIOSToolbars() { var a = (0 === window.orientation ? screen.height : screen.width) - getIOSWindowHeight(); return 1 < a ? a : 0 } function getMobileOperatingSystem() { var a = navigator.userAgent || navigator.vendor || window.opera; return a.match(/iPad/i) || a.match(/iPhone/i) || a.match(/iPod/i) ? "ios" : a.match(/Android/i) ? "android" : "unknown" } function stopSound(a) { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || s_aSounds[a].stop() }
function playSound(a, c, b) { return !1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile ? (s_aSounds[a].play(), s_aSounds[a].volume(c), s_aSounds[a].loop(b), s_aSounds[a]) : null } function setVolume(a, c) { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || s_aSounds[a].volume(c) } function setMute(a, c) { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || s_aSounds[c].mute(a) } function soundPlaying(a) { if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) return s_aSounds[a].playing() }
function createBitmap(a, c, b) { var e = new createjs.Bitmap(a), d = new createjs.Shape; c && b ? d.graphics.beginFill("#fff").drawRect(0, 0, c, b) : d.graphics.beginFill("#ff0").drawRect(0, 0, a.width, a.height); e.hitArea = d; return e } function createSprite(a, c, b, e, d, f) { a = null !== c ? new createjs.Sprite(a, c) : new createjs.Sprite(a); c = new createjs.Shape; c.graphics.beginFill("#000000").drawRect(-b, -e, d, f); a.hitArea = c; return a }
function randomFloatBetween(a, c, b) { "undefined" === typeof b && (b = 2); return parseFloat(Math.min(a + Math.random() * (c - a), c).toFixed(b)) } function shuffle(a) { for (var c = a.length, b, e; 0 !== c;)e = Math.floor(Math.random() * c), --c, b = a[c], a[c] = a[e], a[e] = b; return a } function easeLinear(a, c, b, e) { return b * a / e + c } function easeInQuad(a, c, b, e) { return b * (a /= e) * a + c } function easeInSine(a, c, b, e) { return -b * Math.cos(a / e * (Math.PI / 2)) + b + c } function easeInCubic(a, c, b, e) { return b * (a /= e) * a * a + c }
function getTrajectoryPoint(a, c) { var b = new createjs.Point, e = (1 - a) * (1 - a), d = a * a; b.x = e * c.start.x + 2 * (1 - a) * a * c.traj.x + d * c.end.x; b.y = e * c.start.y + 2 * (1 - a) * a * c.traj.y + d * c.end.y; return b } function formatTime(a) { a /= 1E3; var c = Math.floor(a / 60); a = parseFloat(a - 60 * c).toFixed(0); var b = ""; b = 10 > c ? b + ("0" + c + ":") : b + (c + ":"); return 10 > a ? b + ("0" + a) : b + a } function degreesToRadians(a) { return a * Math.PI / 180 }
function collideEdgeWithCircle(a, c, b) { if (null === a) return !1; a = closestPointOnLine(a.getPointA(), a.getPointB(), c); c = distanceV2(c, a); return b < c ? null : { distance: c, closest_point: a } } function getAngleBetweenPoints(a, c, b, e) { return 180 * Math.atan2(e - c, b - a) / Math.PI } function randomSign() { return .5 >= Math.random() ? 1 : -1 } function distance(a, c) { var b = a.x - c.x, e = a.y - c.y; return Math.sqrt(b * b + e * e) }
function closestPointOnLine(a, c, b) { var e = new CVector2; e.setV(b); e.subtract(a); b = new CVector2; b.setV(c); b.subtract(a); b.normalize(); e = dotProductV2(b, e); if (0 >= e) return a; if (e >= distanceV2(a, c)) return c; b.scalarProduct(e); b.addV(a); return b } function checkRectCollision(a, c) { var b = getBounds(a, .9); var e = getBounds(c, .98); return calculateIntersection(b, e) }
function calculateIntersection(a, c) { var b, e, d, f; var g = a.x + (b = a.width / 2); var h = a.y + (e = a.height / 2); var l = c.x + (d = c.width / 2); var m = c.y + (f = c.height / 2); g = Math.abs(g - l) - (b + d); h = Math.abs(h - m) - (e + f); return 0 > g && 0 > h ? (g = Math.min(Math.min(a.width, c.width), -g), h = Math.min(Math.min(a.height, c.height), -h), { x: Math.max(a.x, c.x), y: Math.max(a.y, c.y), width: g, height: h, rect1: a, rect2: c }) : null } function centerBetweenPointsV2(a, c) { var b = new CVector2; b.set(.5 * (a.getX() + c.getX()), .5 * (a.getY() + c.getY())); return b }
function dotProductV2(a, c) { return a.getX() * c.getX() + a.getY() * c.getY() } function distanceV2WithoutSquareRoot(a, c) { return (c.getX() - a.getX()) * (c.getX() - a.getX()) + (c.getY() - a.getY()) * (c.getY() - a.getY()) } function distanceV2(a, c) { return Math.sqrt((c.getX() - a.getX()) * (c.getX() - a.getX()) + (c.getY() - a.getY()) * (c.getY() - a.getY())) } function reflectVectorV2(a, c) { var b = dotProductV2(a, c); a.set(a.getX() - 2 * b * c.getX(), a.getY() - 2 * b * c.getY()); return a }
function getBounds(a, c) {
    var b = { x: Infinity, y: Infinity, width: 0, height: 0 }; if (a instanceof createjs.Container) { b.x2 = -Infinity; b.y2 = -Infinity; var e = a.children, d = e.length, f; for (f = 0; f < d; f++) { var g = getBounds(e[f], 1); g.x < b.x && (b.x = g.x); g.y < b.y && (b.y = g.y); g.x + g.width > b.x2 && (b.x2 = g.x + g.width); g.y + g.height > b.y2 && (b.y2 = g.y + g.height) } Infinity == b.x && (b.x = 0); Infinity == b.y && (b.y = 0); Infinity == b.x2 && (b.x2 = 0); Infinity == b.y2 && (b.y2 = 0); b.width = b.x2 - b.x; b.height = b.y2 - b.y; delete b.x2; delete b.y2 } else {
        if (a instanceof createjs.Bitmap) {
            d =
                a.sourceRect || a.image; f = d.width * c; var h = d.height * c
        } else if (a instanceof createjs.Sprite) if (a.spriteSheet._frames && a.spriteSheet._frames[a.currentFrame] && a.spriteSheet._frames[a.currentFrame].image) { d = a.spriteSheet.getFrame(a.currentFrame); f = d.rect.width; h = d.rect.height; e = d.regX; var l = d.regY } else b.x = a.x || 0, b.y = a.y || 0; else b.x = a.x || 0, b.y = a.y || 0; e = e || 0; f = f || 0; l = l || 0; h = h || 0; b.regX = e; b.regY = l; d = a.localToGlobal(0 - e, 0 - l); g = a.localToGlobal(f - e, h - l); f = a.localToGlobal(f - e, 0 - l); e = a.localToGlobal(0 - e, h - l); b.x =
            Math.min(Math.min(Math.min(d.x, g.x), f.x), e.x); b.y = Math.min(Math.min(Math.min(d.y, g.y), f.y), e.y); b.width = Math.max(Math.max(Math.max(d.x, g.x), f.x), e.x) - b.x; b.height = Math.max(Math.max(Math.max(d.y, g.y), f.y), e.y) - b.y
    } return b
} function NoClickDelay(a) { this.element = a; window.Touch && this.element.addEventListener("touchstart", this, !1) }
NoClickDelay.prototype = {
    handleEvent: function (a) { switch (a.type) { case "touchstart": this.onTouchStart(a); break; case "touchmove": this.onTouchMove(a); break; case "touchend": this.onTouchEnd(a) } }, onTouchStart: function (a) { a.preventDefault(); this.moved = !1; this.element.addEventListener("touchmove", this, !1); this.element.addEventListener("touchend", this, !1) }, onTouchMove: function (a) { this.moved = !0 }, onTouchEnd: function (a) {
        this.element.removeEventListener("touchmove", this, !1); this.element.removeEventListener("touchend",
            this, !1); if (!this.moved) { a = document.elementFromPoint(a.changedTouches[0].clientX, a.changedTouches[0].clientY); 3 == a.nodeType && (a = a.parentNode); var c = document.createEvent("MouseEvents"); c.initEvent("click", !0, !0); a.dispatchEvent(c) }
    }
};
(function () {
    function a(a) { var b = { focus: "visible", focusin: "visible", pageshow: "visible", blur: "hidden", focusout: "hidden", pagehide: "hidden" }; a = a || window.event; a.type in b ? document.body.className = b[a.type] : (document.body.className = this[c] ? "hidden" : "visible", "hidden" === document.body.className ? s_oMain.stopUpdate() : s_oMain.startUpdate()) } var c = "hidden"; c in document ? document.addEventListener("visibilitychange", a) : (c = "mozHidden") in document ? document.addEventListener("mozvisibilitychange", a) : (c = "webkitHidden") in
        document ? document.addEventListener("webkitvisibilitychange", a) : (c = "msHidden") in document ? document.addEventListener("msvisibilitychange", a) : "onfocusin" in document ? document.onfocusin = document.onfocusout = a : window.onpageshow = window.onpagehide = window.onfocus = window.onblur = a
})(); function ctlArcadeResume() { null !== s_oMain && s_oMain.startUpdate() } function ctlArcadePause() { null !== s_oMain && s_oMain.stopUpdate() } function toDegree(a) { return 180 / Math.PI * a }
function getParamValue(a) { for (var c = window.location.search.substring(1).split("&"), b = 0; b < c.length; b++) { var e = c[b].split("="); if (e[0] == a) return e[1] } } function saveItem(a, c) { s_bStorageAvailable && localStorage.setItem(a, c) } function getItem(a) { return s_bStorageAvailable ? localStorage.getItem(a) : null } function setItemJson(a, c) { s_bStorageAvailable && localStorage.setItem(a, JSON.stringify(c)) } function getItemJson(a) { return s_bStorageAvailable ? JSON.parse(localStorage.getItem(a)) : null }
function fullscreenHandler() { ENABLE_FULLSCREEN && !1 !== screenfull.isEnabled && (s_bFullscreen = screenfull.isFullscreen, null !== s_oInterface && s_oInterface.resetFullscreenBut(), null !== s_oMenu && s_oMenu.resetFullscreenBut()) } if (screenfull.isEnabled) screenfull.on("change", function () { s_bFullscreen = screenfull.isFullscreen; null !== s_oInterface && s_oInterface.resetFullscreenBut(); null !== s_oMenu && s_oMenu.resetFullscreenBut() });
function CSpriteLibrary() {
    var a = {}, c, b, e, d, f, g; this.init = function (a, l, m) { c = {}; e = b = 0; d = a; f = l; g = m }; this.addSprite = function (d, e) { if (!a.hasOwnProperty(d)) { var f = new Image; a[d] = c[d] = { szPath: e, oSprite: f, bLoaded: !1 }; b++ } }; this.getSprite = function (b) { return a.hasOwnProperty(b) ? a[b].oSprite : null }; this._onSpritesLoaded = function () { b = 0; f.call(g) }; this._onSpriteLoaded = function () { d.call(g); ++e === b && this._onSpritesLoaded() }; this.loadSprites = function () {
        for (var a in c) c[a].oSprite.oSpriteLibrary = this, c[a].oSprite.szKey =
            a, c[a].oSprite.onload = function () { this.oSpriteLibrary.setLoaded(this.szKey); this.oSpriteLibrary._onSpriteLoaded(this.szKey) }, c[a].oSprite.onerror = function (a) { var b = a.currentTarget; setTimeout(function () { c[b.szKey].oSprite.src = c[b.szKey].szPath }, 500) }, c[a].oSprite.src = c[a].szPath
    }; this.setLoaded = function (b) { a[b].bLoaded = !0 }; this.isLoaded = function (b) { return a[b].bLoaded }; this.getNumSprites = function () { return b }
}
var CANVAS_WIDTH = 768, CANVAS_HEIGHT = 1400, CANVAS_WIDTH_HALF = .5 * CANVAS_WIDTH, CANVAS_HEIGHT_HALF = .5 * CANVAS_HEIGHT, EDGEBOARD_X = 0, EDGEBOARD_Y = 200, FPS = 30, FPS_TIME = 1E3 / FPS, DISABLE_SOUND_MOBILE = !1, PRIMARY_FONT = "comfortaa", PRIMARY_FONT_COLOUR = "#ffffff", SECONDARY_FONT_COLOUR = "#000000", THIRD_FONT_COLOUR = "#1b1b1b", STATE_LOADING = 0, STATE_MENU = 1, STATE_HELP = 2, STATE_GAME = 3, ON_MOUSE_DOWN = 0, ON_MOUSE_UP = 1, ON_MOUSE_OVER = 2, ON_MOUSE_OUT = 3, EMPTY_SQUARE = 0, REGULAR_SQUARE = 1, EXTRA_BALL_SQUARE = 2, MATRIX_OFFSET_X = 122, MATRIX_OFFSET_Y =
    300, LINES_EDGEBOARD_X = 60, LINES_EDGEBOARD_Y = 250, EDGE_LEFT = 0, EDGE_RIGHT = 1, EDGE_TOP = 2, EDGE_BOTTOM = 3, EDGE_TOP_LEFT = 0, EDGE_TOP_RIGHT = 1, EDGE_BOTTOM_LEFT = 2, EDGE_BOTTOM_RIGHT = 3, OFFSET_ANGLE_ARROW = 0, LAUNCH_POWER_LIMIT_MIN = 10, COLLISION_ANGLE_MIN = 150, FORCE_MULTIPLIER = .01, STARTING_BALLS, EXTRA_BALLS, BALL_RADIUS_TOLERANCE_FACTOR = 1.05, PHYSICS_ITERATIONS = 2, SKIP_TIMER_TIME = 5E3, SQUARE_LINE_NUMBER = 6, SQUARE_SIZE = 100, SQUARE_OFFSET = 3, MATRIX_LIMIT = 1100, ARROW_ANGLE_LIMIT_MAX = -10, ARROW_ANGLE_LIMIT_MIN = -170, BALL_LAUNCH_INTERVAL =
        300, BALL_SIZE = 30, BOTTOM_LIMIT = 1040, OFFSET_RADIUS_BALL = 2, PARTICLES_EMITTERS_NUMBER = 5, PARTICLES_SIZE_MIN = 1, PARTICLES_SIZE_MAX = 10, PARTICLES_SPEED_MIN = 5, PARTICLES_SPEED_MAX = 10, PARTICLES_PER_EXPLOSION = 20, PARTICLES_FADEOUT_SPEED_MAX = 500, PARTICLES_FADEOUT_SPEED_MIN = 100, PARTICLES_X_MAX = 1E3, PARTICLES_X_MIN = -1E3, PARTICLES_Y_MAX = 2E3, PARTICLES_Y_MIN = -2E3, COLOR_BONUS_SQUARE_BALL = "#ffc000", COLOR_REGULAR_SQUARE = "#008db6", ENABLE_FULLSCREEN, ENABLE_CHECK_ORIENTATION, SOUNDTRACK_VOLUME_IN_GAME = .5;
function CVector2(a, c) {
    var b, e; this._init = function (a, c) { b = a; e = c }; this.add = function (a, c) { b += a; e += c }; this.addV = function (a) { b += a.getX(); e += a.getY() }; this.scalarDivision = function (a) { b /= a; e /= a }; this.subtract = function (a) { b -= a.getX(); e -= a.getY() }; this.scalarProduct = function (a) { b *= a; e *= a }; this.invert = function () { b *= -1; e *= -1 }; this.dotProduct = function (a) { return b * a.getX() + e * a.getY() }; this.set = function (a, c) { b = a; e = c }; this.setV = function (a) { b = a.getX(); e = a.getY() }; this.length = function () { return Math.sqrt(b * b + e * e) };
    this.length2 = function () { return b * b + e * e }; this.normalize = function () { var a = this.length(); 0 < a && (b /= a, e /= a) }; this.angleBetweenVectors = function (a) { a = Math.acos(this.dotProduct(a) / (this.length() * a.length())); return !0 === isNaN(a) ? 0 : a }; this.getNormalize = function (a) { this.length(); a.set(b, e); a.normalize() }; this.rot90CCW = function () { var a = b; b = -e; e = a }; this.rot90CW = function () { var a = b; b = e; e = -a }; this.getRotCCW = function (a) { a.set(b, e); a.rot90CCW() }; this.getRotCW = function (a) { a.set(b, e); a.rot90CW() }; this.ceil = function () {
        b =
            Math.ceil(b); e = Math.ceil(e)
    }; this.round = function () { b = Math.round(b); e = Math.round(e) }; this.toString = function () { return "Vector2: " + b + ", " + e }; this.print = function () { trace("Vector2: " + b + ", " + e) }; this.getX = function () { return b }; this.getY = function () { return e }; this.rotate = function (a) { var c = b, d = e; b = c * Math.cos(a) + d * Math.sin(a); e = c * -Math.sin(a) + d * Math.cos(a) }; this._init(a, c)
}
var TEXT_HELP1 = "CLICK TO LAUNCH THE BALL AND BREAK THE SQUARES", TEXT_HELP2 = "TRY TO GET BONUS POINTS AND BALLS", TEXT_HELP3 = "IF A SQUARE TOUCHES THE FLOOR, YOU LOSE!", TEXT_BEST = "BEST", TEXT_BEST_SCORE = "YOUR BEST SCORE", TEXT_LINES = "LINES", TEXT_BALLS = "BALLS", TEXT_GAMEOVER = "GAME OVER!", TEXT_ARE_SURE = "ARE YOU SURE YOU WANT TO EXIT? ALL UNSAVED PROGRESS WILL BE LOST", TEXT_PRELOADER_CONTINUE = "START", TEXT_CREDITS_DEVELOPED = "DEVELOPED BY", TEXT_ERR_LS = "YOUR WEB BROWSER DOES NOT SUPPORT STORING SETTING LOCALLY. IN SAFARI, THE MOST COMMON CAUSE OF THIS IS USING 'PRIVATE BROWSING MODE'. SOME INFO MAY NOT SAVE OR SOME FEATURE MAY NOT WORK PROPERLY.",
    TEXT_SHARE_IMAGE = "200x200.jpg", TEXT_SHARE_TITLE = "Congratulations!", TEXT_SHARE_MSG1 = "You collected <strong>", TEXT_SHARE_MSG2 = " points</strong>!<br><br>Share your score with your friends!", TEXT_SHARE_SHARE1 = "My score is ", TEXT_SHARE_SHARE2 = " points! Can you do better";
function CPreloader() {
    var a, c, b, e, d, f, g, h, l, m; this._init = function () { s_oSpriteLibrary.init(this._onImagesLoaded, this._onAllImagesLoaded, this); s_oSpriteLibrary.addSprite("progress_bar", "sprites/progress_bar.png"); s_oSpriteLibrary.addSprite("200x200", "sprites/200x200.jpg"); s_oSpriteLibrary.addSprite("but_start", "sprites/but_start.png"); s_oSpriteLibrary.loadSprites(); m = new createjs.Container; s_oStage.addChild(m) }; this.unload = function () { l.unload(); l = null; m.removeAllChildren() }; this._onImagesLoaded =
        function () { }; this._onAllImagesLoaded = function () { this.attachSprites(); s_oMain.preloaderReady() }; this.attachSprites = function () {
            var n = new createjs.Shape; n.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); m.addChild(n); n = s_oSpriteLibrary.getSprite("200x200"); g = createBitmap(n); g.regX = .5 * n.width; g.regY = .5 * n.height; g.x = CANVAS_WIDTH_HALF; g.y = CANVAS_HEIGHT_HALF - 180; m.addChild(g); h = new createjs.Shape; h.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(g.x - 100, g.y - 100, 200, 200, 10); m.addChild(h);
            g.mask = h; n = s_oSpriteLibrary.getSprite("progress_bar"); e = createBitmap(n); e.x = CANVAS_WIDTH_HALF - n.width / 2; e.y = CANVAS_HEIGHT_HALF + 50; m.addChild(e); a = n.width; c = n.height; d = new createjs.Shape; d.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(e.x, e.y, 1, c); m.addChild(d); e.mask = d; b = new createjs.Text("", "30px " + PRIMARY_FONT, PRIMARY_FONT_COLOUR); b.x = CANVAS_WIDTH_HALF; b.y = CANVAS_HEIGHT_HALF + 100; b.textBaseline = "alphabetic"; b.textAlign = "center"; m.addChild(b); n = s_oSpriteLibrary.getSprite("but_start"); l = new CTextButton(CANVAS_WIDTH_HALF,
                CANVAS_HEIGHT_HALF, n, TEXT_PRELOADER_CONTINUE, "Arial", "#000", 50, m); l.addEventListener(ON_MOUSE_UP, this._onButStartRelease, this); l.setVisible(!1); f = new createjs.Shape; f.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); m.addChild(f); createjs.Tween.get(f).to({ alpha: 0 }, 500).call(function () { createjs.Tween.removeTweens(f); m.removeChild(f) })
        }; this._onButStartRelease = function () { s_oMain._onRemovePreloader() }; this.refreshLoader = function (f) {
            b.text = f + "%"; 100 === f && (s_oMain._onRemovePreloader(),
                b.visible = !1, e.visible = !1); d.graphics.clear(); f = Math.floor(f * a / 100); d.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(e.x, e.y, f, c)
        }; this._init()
}
var abcd="";
function CMain(a) {
    var c, b = 0, e = 0, d = STATE_LOADING, f, g, h; this.initContainer = function () {
        s_oCanvas = document.getElementById("canvas"); s_oStage = new createjs.Stage(s_oCanvas); s_oStage.preventSelection = !1; createjs.Touch.enable(s_oStage); s_bMobile = jQuery.browser.mobile; !1 === s_bMobile && (s_oStage.enableMouseOver(20), $("body").on("contextmenu", "#canvas", function (a) { return !1 })); s_iPrevTime = (new Date).getTime(); createjs.Ticker.addEventListener("tick", this._update); createjs.Ticker.framerate = FPS; navigator.userAgent.match(/Windows Phone/i) &&
            (DISABLE_SOUND_MOBILE = !0); s_oSpriteLibrary = new CSpriteLibrary; f = new CPreloader;
    }; this.preloaderReady = function () { this._loadImages(); !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || this._initSounds(); c = !0 }; this.soundLoaded = function () { b++; f.refreshLoader(Math.floor(b / e * 100)) }; this._initSounds = function () {
        Howler.mute(!s_bAudioActive); s_aSoundsInfo = []; s_aSoundsInfo.push({
            path: "sounds/", filename: "soundtrack", loop: !0, volume: 1,
            ingamename: "soundtrack"
        }); s_aSoundsInfo.push({ path: "sounds/", filename: "click", loop: !1, volume: 1, ingamename: "click" }); s_aSoundsInfo.push({ path: "sounds/", filename: "game_over", loop: !1, volume: 1, ingamename: "game_over" }); s_aSoundsInfo.push({ path: "sounds/", filename: "boing", loop: !1, volume: 1, ingamename: "boing" }); s_aSoundsInfo.push({ path: "sounds/", filename: "boing_wall", loop: !1, volume: 1, ingamename: "boing_wall" }); s_aSoundsInfo.push({ path: "sounds/", filename: "bonus_balls", loop: !1, volume: 1, ingamename: "bonus_balls" });
        s_aSoundsInfo.push({ path: "sounds/", filename: "explosion", loop: !1, volume: 1, ingamename: "explosion" }); e += s_aSoundsInfo.length; s_aSounds = []; for (var a = 0; a < s_aSoundsInfo.length; a++)this.tryToLoadSound(s_aSoundsInfo[a], !1)
    }; this.tryToLoadSound = function (a, b) {
        abcd+=a.path+a.filename+".mp3,";
        setTimeout(function () {
            s_aSounds[a.ingamename] = new Howl({
                src: [a.path + a.filename + ".mp3"], autoplay: !1, preload: !0, loop: a.loop, volume: a.volume, onload: s_oMain.soundLoaded, onloaderror: function (a, b) {
                    for (var c = 0; c < s_aSoundsInfo.length; c++)if (a === s_aSounds[s_aSoundsInfo[c].ingamename]._sounds[0]._id) {
                        s_oMain.tryToLoadSound(s_aSoundsInfo[c],
                            !0); break
                    }
                }, onplayerror: function (a) { for (var b = 0; b < s_aSoundsInfo.length; b++)if (a === s_aSounds[s_aSoundsInfo[b].ingamename]._sounds[0]._id) { s_aSounds[s_aSoundsInfo[b].ingamename].once("unlock", function () { s_aSounds[s_aSoundsInfo[b].ingamename].play(); "soundtrack" === s_aSoundsInfo[b].ingamename && null !== s_oGame && setVolume("soundtrack", SOUNDTRACK_VOLUME_IN_GAME) }); break } }
            })
        }, b ? 200 : 0)
    }; this._loadImages = function () {
        s_oSpriteLibrary.init(this._onImagesLoaded, this._onAllImagesLoaded, this); s_oSpriteLibrary.addSprite("but_exit",
            "sprites/but_exit.png"); s_oSpriteLibrary.addSprite("audio_icon", "sprites/audio_icon.png"); s_oSpriteLibrary.addSprite("but_play", "sprites/but_play.png"); s_oSpriteLibrary.addSprite("but_restart", "sprites/but_restart.png"); s_oSpriteLibrary.addSprite("but_home", "sprites/but_home.png"); s_oSpriteLibrary.addSprite("msg_box", "sprites/msg_box.png"); s_oSpriteLibrary.addSprite("msg_box_big", "sprites/msg_box_big.png"); s_oSpriteLibrary.addSprite("but_credits", "sprites/but_credits.png"); s_oSpriteLibrary.addSprite("logo_ctl",
                "sprites/logo_ctl.png"); s_oSpriteLibrary.addSprite("but_fullscreen", "sprites/but_fullscreen.png"); s_oSpriteLibrary.addSprite("bg_end_panel", "sprites/bg_end_panel.jpg"); s_oSpriteLibrary.addSprite("bg_menu", "sprites/bg_menu.jpg"); s_oSpriteLibrary.addSprite("bg_game", "sprites/bg_game.jpg"); s_oSpriteLibrary.addSprite("but_no", "sprites/but_no.png"); s_oSpriteLibrary.addSprite("but_yes", "sprites/but_yes.png"); s_oSpriteLibrary.addSprite("but_next", "sprites/but_next.png"); s_oSpriteLibrary.addSprite("logo_menu",
                    "sprites/logo_menu.png"); s_oSpriteLibrary.addSprite("ball_bonus", "sprites/ball_bonus.png"); s_oSpriteLibrary.addSprite("ball", "sprites/ball.png"); s_oSpriteLibrary.addSprite("arrow", "sprites/arrow.png"); s_oSpriteLibrary.addSprite("arrow_fill", "sprites/arrow_fill.png"); s_oSpriteLibrary.addSprite("arrow_frame", "sprites/arrow_frame.png"); s_oSpriteLibrary.addSprite("box", "sprites/box.png"); e += s_oSpriteLibrary.getNumSprites(); s_oSpriteLibrary.loadSprites()
    }; this._onImagesLoaded = function () {
        b++;
        f.refreshLoader(Math.floor(b / e * 100))
    }; this._onAllImagesLoaded = function () { }; this.onAllPreloaderImagesLoaded = function () { this._loadImages() }; this._onRemovePreloader = function () { try { saveItem("ls_available", "ok") } catch (m) { s_bStorageAvailable = !1 } f.unload(); s_oSoundtrack = playSound("soundtrack", 1, !0); this.gotoMenu() }; this.gotoMenu = function () { g = new CMenu; d = STATE_MENU }; this.gotoGame = function () { h = new CGame(l); d = STATE_GAME; $(s_oMain).trigger("start_session") }; this.gotoHelp = function () { new CHelp; d = STATE_HELP }; this.stopUpdate =
        function () { c = !1; createjs.Ticker.paused = !0; $("#block_game").css("display", "block"); s_bAudioActive && Howler.mute(!0) }; this.startUpdate = function () { s_iPrevTime = (new Date).getTime(); c = !0; createjs.Ticker.paused = !1; $("#block_game").css("display", "none"); s_bAudioActive && Howler.mute(!1) }; this._update = function (a) {
            if (!1 !== c) {
                var b = (new Date).getTime(); s_iTimeElaps = b - s_iPrevTime; s_iCntTime += s_iTimeElaps; s_iCntFps++; s_iPrevTime = b; 1E3 <= s_iCntTime && (s_iCurFps = s_iCntFps, s_iCntTime -= 1E3, s_iCntFps = 0); d === STATE_MENU &&
                    g.update(); d === STATE_GAME && h.update(); s_oStage.update(a)
            }
        }; s_oMain = this; var l = a; STARTING_BALLS = a.starting_balls; EXTRA_BALLS = a.extra_balls; BONUS_VALUE = a.bonus_value; ENABLE_FULLSCREEN = a.fullscreen; ENABLE_CHECK_ORIENTATION = a.check_orientation; s_bAudioActive = a.audio_enable_on_startup; this.initContainer()
}
var s_bMobile, s_bAudioActive = !0, s_bFullscreen = !1, s_iCntTime = 0, s_iTimeElaps = 0, s_iPrevTime = 0, s_iCntFps = 0, s_iCurFps = 0, s_oStage, s_oMain, s_oSpriteLibrary, s_oSoundTrack = null, s_oCanvas, s_iTotalScore = 0, s_iBestScore = 0, s_bSkipFunction = !1, s_bStorageAvailable = !0;
function CMenu() {
    var a, c, b, e, d, f, g, h, l, m, n, k, p, r, u = null, t = null, v; this._init = function () {
        g = new createjs.Container; s_oStage.addChild(g); h = createBitmap(s_oSpriteLibrary.getSprite("bg_menu")); g.addChild(h); var y = s_oSpriteLibrary.getSprite("logo_menu"); l = createBitmap(y); l.regX = y.width / 2; l.regY = y.height / 2; l.x = CANVAS_WIDTH / 2; l.y = -150; createjs.Tween.get(l, { loop: !1 }).to({ y: CANVAS_HEIGHT_HALF - 100 }, 1E3, createjs.Ease.cubicOut); g.addChild(l); v = new CTLText(g, CANVAS_WIDTH / 2 - 350, CANVAS_HEIGHT_HALF + 150, 700, 36, 36, "center",
            PRIMARY_FONT_COLOUR, PRIMARY_FONT, 1, 0, 0, TEXT_BEST_SCORE + ": 0", !0, !0, !1, !1); y = s_oSpriteLibrary.getSprite("but_play"); m = new CGfxButton(CANVAS_WIDTH / 2, CANVAS_HEIGHT + 150, y, g); m.addEventListener(ON_MOUSE_UP, this._onButPlayRelease, this); createjs.Tween.get(m.getSprite(), { loop: !1 }).to({ y: CANVAS_HEIGHT_HALF + 350 }, 1E3, createjs.Ease.cubicOut); y = s_oSpriteLibrary.getSprite("but_credits"); b = 20 + y.width / 2; e = y.height / 2 + 10; p = new CGfxButton(b, e, y, g); p.addEventListener(ON_MOUSE_UP, this._onCredits, this); if (!1 === DISABLE_SOUND_MOBILE ||
                !1 === s_bMobile) y = s_oSpriteLibrary.getSprite("audio_icon"), d = CANVAS_WIDTH - y.width / 4 - 20, f = y.height / 2 + 10, k = new CToggle(d, f, y, s_bAudioActive, g), k.addEventListener(ON_MOUSE_UP, this._onAudioToggle, this); y = window.document; var z = y.documentElement; u = z.requestFullscreen || z.mozRequestFullScreen || z.webkitRequestFullScreen || z.msRequestFullscreen; t = y.exitFullscreen || y.mozCancelFullScreen || y.webkitExitFullscreen || y.msExitFullscreen; !1 === ENABLE_FULLSCREEN && (u = !1); u && screenfull.isEnabled && (y = s_oSpriteLibrary.getSprite("but_fullscreen"),
                    a = b + y.width / 2 + 10, c = e, r = new CToggle(a, c, y, s_bFullscreen, g), r.addEventListener(ON_MOUSE_UP, this._onFullscreenRelease, this)); n = new createjs.Shape; n.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); g.addChild(n); createjs.Tween.get(n).to({ alpha: 0 }, 1E3).call(function () { g.removeChild(n) }); s_bStorageAvailable ? (y = getItem("bouncingballs_total_score"), s_iTotalScore = null !== y && void 0 !== y ? Number(y) : 0, y = getItem("bouncingballs_best_score"), null !== y && void 0 !== y ? (s_iBestScore = y, v.refreshText(TEXT_BEST_SCORE +
                        ": " + s_iBestScore)) : (s_iBestScore = 0, v.refreshText(" "))) : new CMsgBox(TEXT_ERR_LS, g); this.refreshButtonPos(s_iOffsetX, s_iOffsetY)
    }; this.unload = function () { m.unload(); m = null; p.unload(); g.removeChild(h); if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) k.unload(), k = null; u && screenfull.isEnabled && r.unload(); s_oMenu = null }; this.refreshButtonPos = function (g, h) { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || k.setPosition(d - g, f + h); u && screenfull.isEnabled && r.setPosition(a + g, c + h); p.setPosition(b + g, e + h) }; this.resetFullscreenBut =
        function () { u && screenfull.isEnabled && r.setActive(s_bFullscreen) }; this.exitFromCredits = function () { }; this._onAudioToggle = function () { Howler.mute(s_bAudioActive); s_bAudioActive = !s_bAudioActive }; this._onCredits = function () { new CCreditsPanel }; this._onButPlayRelease = function () { this.unload(); s_oMain.gotoGame() }; this._onFullscreenRelease = function () { s_bFullscreen ? t.call(window.document) : u.call(window.document.documentElement); sizeHandler() }; this.update = function () { }; s_oMenu = this; this._init()
} var s_oMenu = null;
function CGame(a) {
    var c, b, e, d, f, g, h, l, m, n, k, p, r, u, t, v, y, z, D, F, L, H, J, M, K, G, C, E, N, O; this._init = function () {
        D = new createjs.Container; s_oStage.addChild(D); this.resetVariables(); O = []; var a = createBitmap(s_oSpriteLibrary.getSprite("bg_game")); a.cache(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); D.addChild(a); this.initBackgroundWallLimits(); this.initParticleEmitters(); H = new CSquareMatrix(D); H.init(); p = 1090; K = { x: CANVAS_WIDTH_HALF, y: p }; this.initArrow(); C = []; this.initBalls(); this.initExcludeWallCollisionRectangle(); this.initWallEdges();
        this.initHitArea(); F = new CInterface; F.initInterfacesText(); new CHelpPanel; H.lowerSquareLine()
    }; this.initParticleEmitters = function () { for (var a = 0; a < PARTICLES_EMITTERS_NUMBER; a++) { var b = new CParticleEmitter(0, 0, 0, D); N.push(b) } }; this.initExcludeWallCollisionRectangle = function () {
        var a = .65 * CANVAS_WIDTH, b = .45 * CANVAS_HEIGHT; G = new createjs.Shape; G.graphics.beginFill("white"); G.graphics.drawRect(0, 0, a, b); G.graphics.endFill(); G.alpha = .3; G.x = 130; G.y = 350; G.width = a; G.height = b; G.visible = !1; D.addChild(G); v = G.x; y =
            G.x + G.width; z = G.y
    }; this.initWallEdges = function () { E = []; var a = new CEdge(LINES_EDGEBOARD_X + 2, CANVAS_HEIGHT - 20, LINES_EDGEBOARD_X + 2, 20, 5, !1), b = new CEdge(CANVAS_WIDTH - LINES_EDGEBOARD_X - 2, 20, CANVAS_WIDTH - LINES_EDGEBOARD_X + 2, CANVAS_HEIGHT - 20, 5, !1), c = new CEdge(EDGEBOARD_X - 2, LINES_EDGEBOARD_Y + 20, CANVAS_WIDTH - LINES_EDGEBOARD_X + 2, LINES_EDGEBOARD_Y + 20, 5, !1); E[EDGE_LEFT] = a.getModel(); E[EDGE_RIGHT] = b.getModel(); E[EDGE_TOP] = c.getModel() }; this.initBackgroundWallLimits = function () {
        var a = new createjs.Shape; a.graphics.beginFill("red");
        a.graphics.drawRoundRect(LINES_EDGEBOARD_X - 4, BOTTOM_LIMIT, 655, 2, 1); a.graphics.endFill(); a.alpha = .8; D.addChild(a); a = new createjs.Shape; a.graphics.beginFill("#01adff"); a.graphics.drawRoundRect(LINES_EDGEBOARD_X - 4, 270, 4, 850, 1); a.graphics.endFill(); a.alpha = .8; D.addChild(a); a = new createjs.Shape; a.graphics.beginFill("#01adff"); a.graphics.drawRoundRect(CANVAS_WIDTH - LINES_EDGEBOARD_X, 270, 4, 850, 1); a.graphics.endFill(); a.alpha = .8; D.addChild(a); a = new createjs.Shape; a.graphics.beginFill("#01adff"); a.graphics.drawRoundRect(LINES_EDGEBOARD_X -
            4, LINES_EDGEBOARD_Y + 20, 655, 4, 1); a.graphics.endFill(); a.alpha = .8; D.addChild(a)
    }; this.resetVariables = function () { L = null; s_bSkipFunction = l = h = g = f = !1; u = PHYSICS_ITERATIONS; r = t = k = 0; n = STARTING_BALLS; m = s_iTotalScore; c = s_oStage.mouseX; b = s_oStage.mouseY; N = []; setVolume("soundtrack", SOUNDTRACK_VOLUME_IN_GAME) }; this.initBalls = function () { for (var a = 0; a < n; a++) { var b = new CBall(a, D); C.push(b) } }; this.initArrow = function () { M = new CArrow(K.x, K.y, D); M.setVisible(!1) }; this.getBallStartPosition = function () { return K }; this.initHitArea =
        function () { J = new createjs.Shape; J.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); J.alpha = .01; J.on("mousedown", function (a) { s_oGame.onPressDown(a) }); J.on("pressmove", function (a) { s_oGame.onPressMove(a) }); J.on("pressup", function () { s_oGame.onPressUp() }); this.setHitAreaCursor(); D.addChild(J) }; this.setHitAreaCursor = function () { s_bMobile || (J.cursor = h ? "arrow" : "pointer") }; this.checkForGameOver = function () {
            for (var a = H.getSquareArray(), b = BOTTOM_LIMIT - SQUARE_SIZE, c = 0; c < a.length; c++) {
                var d =
                    a[c]; d.getY() >= b && (d.fadeOut(), d.getType() === REGULAR_SQUARE && this.gameOver())
            }
        }; this.onPressDown = function (a) { h || (e = s_oStage.mouseX, d = s_oStage.mouseY, M.setVisible(!0), M.setPosition(C[0].getX(), C[0].getY()), this.arrowUpdate()) }; this.onPressMove = function (a) { h || (c = s_oStage.mouseX, b = s_oStage.mouseY, this.arrowUpdate(), l = !0) }; this.onPressUp = function () { M.setVisible(!1); l && !h && (this.launchBallOnClick(), l = !1) }; this.rotateArrow = function () { if (!h) { var a = Math.atan2(d - b, e - c); -.1 > a && M.setAngle(180 / Math.PI * a + OFFSET_ANGLE_ARROW) } };
    this.arrowUpdate = function () { this.rotateArrow() }; this.launchBallOnClick = function () { K = { x: 0, y: 0 }; var a = new CVector2(e - c, d - b); 0 < d - b && a.set(e - c, -1); a.normalize(); for (var f = 0; f < C.length; f++)this.launchBall(C[f], f, a); b = c = 0; this.setLaunched(!0) }; this.getBallPosition = function () { return { x: C[0].getX(), y: C[0].getY() } }; this.launchBall = function (a, b, c) {
        var d = BALL_LAUNCH_INTERVAL * b, e = a.vCurForce(), f = new CVector2(c.getX(), c.getY()), g = this.getBallsNumber(); setTimeout(function () {
            var a = g - (b + 1); F.refreshBallsText(a); f.scalarProduct(LAUNCH_POWER_LIMIT_MIN);
            e.setV(f); 0 === a && F.setBallsTextVisible(!1)
        }, d)
    }; this.getBallsNumber = function () { return n }; this.setBallStartPosition = function (a) { K = { x: a, y: p } }; this.setLaunched = function (a) { h = a }; this.getLinesNumber = function () { return k }; this.addBalls = function () { n += EXTRA_BALLS }; this.addLine = function () { k++; F.refreshLinesText(k) }; this.resetBalls = function () {
        s_bSkipFunction = !1; t = 0; F.disableSkipButton(); H.lowerSquareLine(); g = h = !1; var a = n - C.length; if (0 < a) for (var b = 0; b < a; b++) { var c = new CBall(b + C.length + 1, D); C.push(c) } for (b = 0; b <
            C.length; b++)C[b].resetBallPosition(K.x, p); r = 0; g = !0
    }; this.unload = function () { F.unload(); H.unload(); createjs.Tween.removeAllTweens(); s_oStage.removeAllChildren(); s_oGame = null }; this.onExit = function () { setVolume("soundtrack", 1); s_oGame.unload(); s_oMain.gotoMenu(); $(s_oMain).trigger("end_session"); $(s_oMain).trigger("show_interlevel_ad") }; this.restart = function () { setVolume("soundtrack", SOUNDTRACK_VOLUME_IN_GAME); $(s_oMain).trigger("restart_level"); s_oGame.unload(); s_oMain.gotoGame() }; this._onExitHelp = function () {
        f =
            !0; this.setTurn(!0)
    }; this.updateScore = function () { s_iTotalScore = m += k; saveItem("bouncingballs_total_score", s_iTotalScore); k > s_iBestScore && (s_iBestScore = k, saveItem("bouncingballs_best_score", s_iBestScore)) }; this.gameOver = function () { f = !1; this.updateScore(); null === L && (playSound("game_over", 1, !1), stopSound("soundtrack"), setTimeout(function () { playSound("soundtrack", .5, !1) }, 3E3), L = new CEndPanel(k), $(s_oMain).trigger("share_event", s_iTotalScore), $(s_oMain).trigger("save_score", s_iTotalScore)) }; this.setTurn =
        function (a) { g = a }; this.checkPointIsInRectApprossimate = function (a) { return a.getX() > v && a.getX() < y && a.getY() > z ? !0 : !1 }; this.checkPointIsInRectSquaresApprossimate = function (a, b) { return a.getX() > b.getLimitLeft() && a.getX() < b.getLimitRight() && a.getY() > b.getLimitTop() && a.getY() < b.getLimitBottom() ? !0 : !1 }; this.moveBall = function (a) { !0 !== a.isStopped() && (a.vPos().addV(a.vCurForce()), this.checkCollisionWithWalls(a, E), this.checkCollisionWithSquares(a), a.updateSpritePosition()) }; this.checkCollisionWithWalls = function (a,
            b) { if (!1 === this.checkPointIsInRectApprossimate(a)) for (var c = 0; c < b.length; c++) { var d = collideEdgeWithCircle(b[c], a.vPos(), a.getRadius()); if (d) return this.reflectBallOnWall(a, b[c], d), !0 } return !1 }; this.reflectBallOnWall = function (a, b, c) { !1 === soundPlaying("boing_wall") ? playSound("boing_wall", 1, !1) : playSound("boing", 1, !1); this.bounceBallOnEdge(c, b, a) }; this.stopBallOnBottomWall = function (a) { r++; a.stopBall() }; this.checkCollisionWithSquares = function (a) {
                var b = H.getSquareArray(); if (0 > a.vCurForce().getY()) for (var c =
                    0; c < b.length; c++)!0 === this.checkPointIsInRectSquaresApprossimate(a, b[c]) && this.reflectBallOnSquare(a, b[c].getEdges(), b[c]); else for (c = b.length - 1; -1 < c; c--)!0 === this.checkPointIsInRectSquaresApprossimate(a, b[c]) && this.reflectBallOnSquare(a, b[c].getEdges(), b[c]); return !1
            }; this.pushSquareToRemove = function (a, b, c) { O.push({ iID: a, iRow: b, iColumn: c }) }; this.removeSquareFromMatrix = function (a, b, c) { H.removeSquare(a, b, c) }; this.reflectBallOnSquare = function (a, b, c) {
                var d = !1, e = a.getX(), f = a.getY(), g = b[EDGE_LEFT].getModel(),
                    h = b[EDGE_RIGHT].getModel(), k = b[EDGE_TOP].getModel(); b = b[EDGE_BOTTOM].getModel(); var l = H.getAngleEdges(), n = H.getSquareMatrix(), m = c.getRow(), p = c.getColumn(), r = !1, t = !1, u = !1, z = !1, v = !1, y = !1, D = !1, F = !1; -1 < p - 1 && null !== n[m][p - 1] && (r = !0); -1 < m - 1 && null !== n[m - 1][p] && (u = !0); m + 1 < n.length && null !== n[m + 1][p] && (z = !0); p + 1 < SQUARE_LINE_NUMBER && null !== n[m][p + 1] && (t = !0); m + 1 < n.length && -1 < p - 1 && null !== n[m + 1][p - 1] && (v = !0); -1 < m - 1 && -1 < p - 1 && null !== n[m - 1][p - 1] && (y = !0); m + 1 < n.length && p + 1 < SQUARE_LINE_NUMBER && null !== n[m + 1][p + 1] && (D =
                        !0); -1 < m - 1 && p + 1 < SQUARE_LINE_NUMBER && null !== n[m - 1][p + 1] && (F = !0); f > c.getY() ? (e < c.getX() && !1 === r && !1 === u && !1 === y && 0 < c.getColumn() ? d = this.bounceBallOnAngle(a, b.getPointA(), l[EDGE_BOTTOM_LEFT], b, c) : !1 === u && !1 === t && !1 === F && c.getColumn() < SQUARE_LINE_NUMBER - 1 && (d = this.bounceBallOnAngle(a, b.getPointB(), l[EDGE_BOTTOM_RIGHT], b, c)), !1 === d && (f > b.getPointA().getY() && !1 === u ? d = this.__reflectBallOnEdge(a, b, c) : e < b.getPointA().getX() && !1 === r ? d = this.__reflectBallOnEdge(a, g, c) : e > b.getPointB().getX() && !1 === t && (d = this.__reflectBallOnEdge(a,
                            h, c)))) : (e < c.getX() && !1 === z && !1 === v && !1 === r && 0 < c.getColumn() ? d = this.bounceBallOnAngle(a, k.getPointB(), l[EDGE_TOP_LEFT], k, c) : !1 === z && !1 === D && !1 === t && c.getColumn() < SQUARE_LINE_NUMBER - 1 && (d = this.bounceBallOnAngle(a, k.getPointA(), l[EDGE_TOP_RIGHT], k, c)), !1 === d && (f < k.getPointA().getY() && !1 === z ? d = this.__reflectBallOnEdge(a, k, c) : e < b.getPointA().getX() && !1 === r ? d = this.__reflectBallOnEdge(a, g, c) : e > b.getPointB().getX() && !1 === t && (d = this.__reflectBallOnEdge(a, h, c)))); !0 === d && !1 === c.isFading() && c.squareHitByBall();
                return d
            }; this.bounceBallOnAngle = function (a, b, c, d, e) { if (distanceV2WithoutSquareRoot(a.vPos(), b) < a.getSquareRadiusForCollisionAngles()) { if (!1 === e.isBonus()) { if (toDegree(c.angleBetweenVectors(a.vCurForce())) < COLLISION_ANGLE_MIN) return !1; d = new CVector2; d.setV(c); d.scalarProduct(a.getRadiusWithTolerance()); d.addV(b); a.setPos(d); reflectVectorV2(a.vCurForce(), c) } return !0 } return !1 }; this.__reflectBallOnEdge = function (a, b, c) {
                var d = collideEdgeWithCircle(b, a.vPos(), a.getRadius()); return d ? (!1 === c.isBonus() &&
                    this.bounceBallOnEdge(d, b, a), !0) : !1
            }; this.bounceBallOnEdge = function (a, b, c) { var d = new CVector2; d.setV(b.getNormal()); d.scalarProduct(c.getRadiusWithTolerance()); d.addV(a.closest_point); c.setPos(d); reflectVectorV2(c.vCurForce(), b.getNormal()) }; this.setStartGame = function (a) { f = a }; this.initParticleEmitter = function (a, b, c) { for (var d = 0; d < N.length; d++)if (!1 === N[d].isActive()) { N[d].start(a, b, c); break } }; this.skipFunction = function () { u = s_bSkipFunction ? 5 * PHYSICS_ITERATIONS : PHYSICS_ITERATIONS }; this.update = function () {
                !0 ===
                    h && !1 === s_bSkipFunction && (t += s_iTimeElaps, t > SKIP_TIMER_TIME && (t = 0, F.enableSkipButton())); for (var a = 0; a < u; a++) { if (!1 === f || !1 === g || !1 === h) { F.resetBallText(n); return } for (var b = 0; b < C.length; b++) { var c = C[b]; this.moveBall(c); if (c.getY() > p) { this.stopBallOnBottomWall(c); c.resetBallPosition(K.x, p); return } } for (b = 0; b < O.length; b++)this.removeSquareFromMatrix(O[b].iID, O[b].iRow, O[b].iColumn); O = []; r === C.length && (this.resetBalls(), F.resetBallText(n)) } for (a = 0; a < N.length; a++)N[a].update()
            }; s_oGame = this; this._init()
}
var s_oGame;
function CBall(a, c) {
    var b, e, d, f, g, h, l, m, n, k, p, r, u, t, v; this._init = function (a) { var c = s_oGame.getBallStartPosition(), g = c.x; c = c.y; b = g; e = c; n = a; v = t = !1; d = new createjs.Container; a = s_oSpriteLibrary.getSprite("ball"); f = createBitmap(a, a.width, a.height); f.regX = a.width / 2; f.regY = a.height / 2; d.addChild(f); d.x = g; d.y = c; h = new CVector2; h.set(d.x, d.y); l = new CVector2; l.set(0, 0); k = .5 * a.width; p = k * k; r = k * BALL_RADIUS_TOLERANCE_FACTOR; u = 1 * p; m = new CVector2(0, 0); y.addChild(d) }; this.unload = function () { y.removeChild(d) }; this.setVisible =
        function (a) { d.visible = a }; this.setPosition = function (a, b) { d.x = a; d.y = b }; this.resetPos = function () { d.x = b; d.y = e; h.set(d.x, d.y); m.set(0, 0) }; this.isLaunched = function () { return t }; this.setLaunched = function (a) { t = a }; this.isStopped = function () { return v }; this.stopBall = function () { t = !1; v = !0; m.set(0, 0); var a = s_oGame.getBallStartPosition(); 0 === a.x && 0 === a.y && s_oGame.setBallStartPosition(d.x) }; this.setStopped = function (a) { v = a }; this.resetBallPosition = function (a, b) {
            h.set(a, b); d.y = b; var c = this; createjs.Tween.get(d).to({ x: h.getX() },
                400, createjs.Ease.sineOut).call(function () { createjs.Tween.removeTweens(c.getContainer()); c.setStopped(!1) })
        }; this.getSquareRadiusForCollisionAngles = function () { return u }; this.getContainer = function () { return d }; this.setAngle = function (a) { f.rotation = a }; this.getX = function () { return d.x }; this.getY = function () { return d.y }; this.getRadiusWithTolerance = function () { return r }; this.setUserData = function (a) { g = a }; this.getUserData = function () { return g }; this.scale = function (a) { d.scaleX = a; d.scaleY = a }; this.getScale = function () { return d.scaleX };
    this.vCurForce = function () { return m }; this.vPos = function () { return h }; this.setPos = function (a) { h.setV(a) }; this.vPrevPos = function () { return l }; this.getRadius = function () { return k }; this.getSquareRadius = function () { return p }; this.updateSpritePosition = function () { d.x = h.getX(); d.y = h.getY() }; this.getID = function () { return n }; var y = c; this._init(a); return this
}
function CArrow(a, c, b) {
    var e, d, f, g, h, l, m; this._init = function (a, b) {
        e = new createjs.Container; e.x = a; e.y = b; n.addChild(e); var c = s_oSpriteLibrary.getSprite("arrow"); f = createBitmap(c); f.regY = .5 * c.height; e.addChild(f); g = createBitmap(s_oSpriteLibrary.getSprite("arrow_fill")); g.regY = .5 * c.height; e.addChild(g); l = c.width; m = c.height; d = new createjs.Shape; d.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(f.x, f.y, 0, m); d.regY = .5 * m; e.addChild(d); c = s_oSpriteLibrary.getSprite("arrow_frame"); h = createBitmap(c); h.regX = 0;
        h.regY = .5 * c.height; e.addChild(h); g.mask = d
    }; this.unload = function () { n.removeChild(e) }; this.setVisible = function (a) { e.visible = a }; this.setAngle = function (a) { e.rotation = a }; this.setPosition = function (a, b) { e.x = a; e.y = b }; this.setX = function (a) { e.x = a }; this.setY = function (a) { e.y = a }; this.getX = function () { return e.x }; this.getY = function () { return e.y }; this.mask = function (a) { d.graphics.clear(); a = Math.floor(a * l / 90); d.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(f.x, f.y, a, m) }; this.animateMask = function (a) {
        var b = this; createjs.Tween.get(d.graphics.command).to({ w: l },
            a, createjs.Ease.cubicInOut).call(function () { createjs.Tween.get(d.graphics.command).to({ w: 0 }, a, createjs.Ease.cubicInOut).call(function () { b.animateMask(a) }) })
    }; this.animateRotation = function (a) { var b = this; createjs.Tween.get(e).to({ rotation: 35 }, a, createjs.Ease.cubicInOut).call(function () { createjs.Tween.get(e).to({ rotation: -35 }, a, createjs.Ease.cubicInOut).call(function () { b.animateRotation(a) }) }) }; var n = b; this._init(a, c); return this
}
function CSquareMatrix(a) {
    var c, b, e, d, f; this.init = function () { c = new createjs.Container; a.addChild(c); f = 0; b = []; d = []; this.createAngleEdges() }; this.createSquareLine = function () {
        var a = [], e = s_oGame.getLinesNumber(), l = Math.floor(.5 * e) + 1; e = Math.floor(1.5 * e); var m = 0, n = [], k = [EMPTY_SQUARE, REGULAR_SQUARE], p = 0; n.push(EXTRA_BALL_SQUARE); for (var r = 0; r < SQUARE_LINE_NUMBER - 1; r++) { var u = k[Math.floor(Math.random() * k.length)]; u === EMPTY_SQUARE && (p++, p === SQUARE_LINE_NUMBER - 1 && (u = REGULAR_SQUARE)); n.push(u) } shuffle(n); for (k =
            0; k < n.length; k++)switch (n[k]) { case EMPTY_SQUARE: a.push(null); break; case REGULAR_SQUARE: m = Math.floor(Math.random() * e + l); p = new CSquare(d.length, k, n[k], m, c, f); p.createEdges(); b.push(p); f++; a.push(p); break; case EXTRA_BALL_SQUARE: p = new CSquare(d.length, k, n[k], m, c, f), p.createEdges(), b.push(p), f++, a.push(p) }d.push(a)
    }; this.createAngleEdges = function () {
        e = []; e[EDGE_TOP_LEFT] = new CVector2(-1, -1); e[EDGE_TOP_RIGHT] = new CVector2(1, -1); e[EDGE_BOTTOM_LEFT] = new CVector2(-1, 1); e[EDGE_BOTTOM_RIGHT] = new CVector2(1, 1);
        for (var a = 0; a < e.length; a++)e[a].normalize()
    }; this.getAngleEdges = function () { return e }; this.getSquareArray = function () { return b }; this.getSquareMatrix = function () { return d }; this.lowerSquareLine = function () { this.createSquareLine(); for (var a = 0; a < b.length; a++) { var c = b[a]; c.destroyEdges(); c.lowerSquare() } s_oGame.addLine() }; this.removeSquare = function (a, c, e) { for (var f = 0; f < b.length; f++)if (a === b[f].getID()) { b.splice(f, 1); break } d[c][e] = null }; this.unload = function () {
        for (var a = 0; a < b.length; a++)b[a].unload(), b.splice(a,
            1); c.removeAllChildren(); this.createSquareLine()
    }
}
function CSquare(a, c, b, e, d, f) {
    var g, h, l, m, n, k, p, r, u, t, v, y, z, D, F, L, H, J, M, K, G, C, E; this._init = function () { g = d; h = new createjs.Container; g.addChild(h); m = null; k = c; p = a; r = MATRIX_OFFSET_X + (SQUARE_SIZE + SQUARE_OFFSET) * k; u = MATRIX_OFFSET_Y; y = f; v = b; t = e; C = !1; z = SQUARE_SIZE + SQUARE_OFFSET; this.initSquare(); this.createExcludeCollisionRectangle(); h.x = r; h.y = u }; this.createExcludeCollisionRectangle = function () {
        var a = 1.5 * SQUARE_SIZE; n = new createjs.Shape; n.graphics.beginFill("white"); n.graphics.drawRect(0, 0, a, a); n.graphics.endFill();
        n.alpha = .3; n.x = -1 * a / 2; n.y = -1 * a / 2; n.width = a; n.height = a; n.visible = !1; h.addChild(n); this.setExcludeCollisionRectangleLimits()
    }; this.setExcludeCollisionRectangleLimits = function () { J = h.x + n.x; M = h.x + n.x + n.width; K = h.y + n.y; G = h.y + n.y + n.height }; this.getLimitLeft = function () { return J }; this.getLimitRight = function () { return M }; this.getLimitTop = function () { return K }; this.getLimitBottom = function () { return G }; this.initBonusSquare = function () { new CBonus(v, r, u, h) }; this.createEdges = function () {
        E = []; D = this.getX() - SQUARE_SIZE /
            2; F = this.getX() + SQUARE_SIZE / 2; L = this.getY() - SQUARE_SIZE / 2; H = this.getY() + SQUARE_SIZE / 2; E[EDGE_LEFT] = new CEdge(D, L, D, H, 1, !1); E[EDGE_RIGHT] = new CEdge(F, H, F, L, 1, !1); E[EDGE_TOP] = new CEdge(F, L, D, L, 1, !1); E[EDGE_BOTTOM] = new CEdge(D, H, F, H, 1, !1); this.setExcludeCollisionRectangleLimits()
    }; this.getEdges = function () { return E }; this.initSquare = function () {
        switch (v) {
            case REGULAR_SQUARE: var a = { images: [s_oSpriteLibrary.getSprite("box")], frames: { width: 100, height: 100, regX: 0, regY: 0 }, animations: { idle: [0, 35] } }; a = new createjs.SpriteSheet(a);
                l = createSprite(a, "idle", 0, 0, 100, 100); this.setSquareColour(); l.regX = l.regY = SQUARE_SIZE / 2; m = new createjs.Text(t, "40px " + PRIMARY_FONT, PRIMARY_FONT_COLOUR); m.textAlign = "center"; m.textBaseline = "alphabetic"; m.y = 15; break; case EXTRA_BALL_SQUARE: a = s_oSpriteLibrary.getSprite("ball_bonus"), l = createBitmap(a), l.regX = a.width / 2, l.regY = a.height / 2, m = new createjs.Text("+" + EXTRA_BALLS, "40px " + PRIMARY_FONT, PRIMARY_FONT_COLOUR), m.textAlign = "center", m.textBaseline = "alphabetic", m.x = -3, m.y = 12
        }h.addChild(l, m)
    }; this.setSquareColour =
        function () { var a = t - 1; 11 < a && (a = 11 - a % 11); l.gotoAndStop(a) }; this.squareHitByBall = function () { switch (v) { case REGULAR_SQUARE: if (1 < t) { !1 === soundPlaying("boing") ? playSound("boing_wall", 1, !1) : playSound("boing", 1, !1); t--; m.text = t; this.setSquareColour(); break } s_oGame.pushSquareToRemove(y, p, k); playSound("explosion", 1, !1); this.destroySquare(); return !0; case EXTRA_BALL_SQUARE: return s_oGame.pushSquareToRemove(y, p, k), this.fadeOut(), this.addBalls(), !0 }return !1 }; this.destroySquare = function () {
            C = !0; this.startParticleEmitter();
            l.visible = !1; m.visible = !1; createjs.Tween.removeTweens(this.getSquareSprite()); this.unload()
        }; this.destroyEdges = function () { if (void 0 !== E) { for (var a = 0; a < E.length; a++)E[a].destroy(); E = [] } }; this.lowerSquare = function () { var a = this; createjs.Tween.get(h).to({ y: h.y + z }, 400, createjs.Ease.quadOut).call(function () { a.onSquareLowerEnd(); createjs.Tween.removeTweens(a.getSquareContainer()) }) }; this.onSquareLowerEnd = function () { s_oGame.checkForGameOver(); this.createEdges() }; this.getX = function () { return h.x }; this.getY =
            function () { return h.y }; this.getRow = function () { return p }; this.getColumn = function () { return k }; this.getSize = function () { return SQUARE_SIZE }; this.getSquareContainer = function () { return h }; this.getSquareSprite = function () { return l }; this.fadeOut = function () { if (v !== EMPTY_SQUARE) { C = !0; this.startParticleEmitter(); var a = this; createjs.Tween.get(h).to({ alpha: 0 }, 200, createjs.Ease.cubicOut).call(function () { a.unload(); createjs.Tween.removeTweens(a.getSquareSprite()) }) } }; this.addBalls = function () {
                playSound("bonus_balls",
                    1, !1); s_oGame.addBalls()
            }; this.startParticleEmitter = function () { v === REGULAR_SQUARE ? s_oGame.initParticleEmitter(this.getX(), this.getY(), COLOR_REGULAR_SQUARE) : s_oGame.initParticleEmitter(this.getX(), this.getY(), COLOR_BONUS_SQUARE_BALL) }; this.isBonus = function () { switch (v) { case REGULAR_SQUARE: return !1; case EXTRA_BALL_SQUARE: return !0 } }; this.getValue = function () { return t }; this.getType = function () { return v }; this.isFading = function () { return C }; this.getID = function () { return y }; this.unload = function () { g.removeChild(h) };
    this._init()
}
function CParticleEmitter(a, c, b, e) {
    var d, f, g, h, l, m, n; this._init = function () { d = a; f = c; g = b; l = e; m = []; h = 0; n = !1; for (var k = 0; k < PARTICLES_PER_EXPLOSION; k++) { var p = new CParticle(d, f, g, l); m.push(p); m[k].setAlive(!1) } }; this.start = function (a, b, c) { n = !0; for (var d = 0; d < m.length; d++)m[d].resetParticle(a, b, c), m[d].addRandomDirection(), m[d].setAlive(!0), m[d].fadeOut() }; this.isActive = function () { return n }; this.update = function () {
        if (!1 !== n) for (var a = 0; a < m.length; a++)!0 === m[a].isParticleAlive() ? (m[a].vPos().addV(m[a].vCurForce()), m[a].updateGraphicPosition()) :
            (h++, m.length === h && (h = 0, n = !1))
    }; this._init()
}
function CParticle(a, c, b, e) {
    var d, f, g, h, l, m, n, k, p, r, u, t, v; this._init = function () {
        d = a; f = c; n = e; r = !1; g = Math.random() * (PARTICLES_SIZE_MAX - PARTICLES_SIZE_MIN) + PARTICLES_SIZE_MIN; h = Math.random() * (PARTICLES_X_MAX - PARTICLES_X_MIN) + PARTICLES_X_MIN; l = Math.random() * (PARTICLES_Y_MAX - PARTICLES_Y_MIN) + PARTICLES_Y_MIN; m = Math.random() * (PARTICLES_SPEED_MAX - PARTICLES_SPEED_MIN) + PARTICLES_SPEED_MIN; k = new createjs.Container; k.x = d; k.y = f; k.visible = !1; n.addChild(k); p = new createjs.Shape; p.graphics.beginFill(COLOR_REGULAR_SQUARE).drawCircle(0,
            0, g); p.regX = p.regY = g / 2; p.alpha = .9; k.addChild(p); u = new CVector2; u.set(k.x, k.y); t = new CVector2(0, 0)
    }; this.resetParticle = function (a, b, c) { k.x = a; k.y = b; k.alpha = 1; u.set(k.x, k.y); p.graphics.clear(); p.graphics.beginFill(c).drawCircle(0, 0, g); p.alpha = .9 }; this.addRandomDirection = function () { v = new CVector2(h, l); v.subtract(u); v.normalize(); v.scalarProduct(m); t.setV(v) }; this.vPos = function () { return u }; this.vCurForce = function () { return t }; this.updateGraphicPosition = function () { k.x = u.getX(); k.y = u.getY() }; this.setAlive =
        function (a) { r = k.visible = a }; this.isParticleAlive = function () { return r }; this.fadeOut = function () { var a = Math.random() * (PARTICLES_FADEOUT_SPEED_MAX - PARTICLES_FADEOUT_SPEED_MIN) + PARTICLES_FADEOUT_SPEED_MIN; createjs.Tween.get(k).to({ alpha: 0 }, a, createjs.Ease.cubicOut).call(function () { r = !1 }) }; this._init()
}
function CToggle(a, c, b, e, d) {
    var f, g, h, l, m, n, k; this._init = function (a, b, c, d, e) { k = void 0 !== e ? e : s_oStage; g = []; h = []; e = new createjs.SpriteSheet({ images: [c], frames: { width: c.width / 2, height: c.height, regX: c.width / 2 / 2, regY: c.height / 2 }, animations: { state_true: [0], state_false: [1] } }); f = d; l = createSprite(e, "state_" + f, c.width / 2 / 2, c.height / 2, c.width / 2, c.height); l.x = a; l.y = b; l.stop(); s_bMobile || (l.cursor = "pointer"); k.addChild(l); this._initListener() }; this.unload = function () { l.off("mousedown", m); l.off("pressup", n); k.removeChild(l) };
    this._initListener = function () { m = l.on("mousedown", this.buttonDown); n = l.on("pressup", this.buttonRelease) }; this.addEventListener = function (a, b, c) { g[a] = b; h[a] = c }; this.setCursorType = function (a) { l.cursor = a }; this.setActive = function (a) { f = a; l.gotoAndStop("state_" + f) }; this.buttonRelease = function () { l.scaleX = 1; l.scaleY = 1; playSound("click", 1, 0); f = !f; l.gotoAndStop("state_" + f); g[ON_MOUSE_UP] && g[ON_MOUSE_UP].call(h[ON_MOUSE_UP], f) }; this.buttonDown = function () { l.scaleX = .9; l.scaleY = .9; g[ON_MOUSE_DOWN] && g[ON_MOUSE_DOWN].call(h[ON_MOUSE_DOWN]) };
    this.setPosition = function (a, b) { l.x = a; l.y = b }; this._init(a, c, b, e, d)
}
function CGfxButton(a, c, b, e) {
    var d, f, g, h, l, m, n, k, p; this._init = function (a, b, c) { d = !1; f = []; g = []; l = []; h = createBitmap(c); h.x = a; h.y = b; n = m = 1; h.regX = c.width / 2; h.regY = c.height / 2; s_bMobile || (h.cursor = "pointer"); r.addChild(h); this._initListener() }; this.getSprite = function () { return h }; this.unload = function () { h.off("mousedown", k); h.off("pressup", p); r.removeChild(h) }; this.setVisible = function (a) { h.visible = a }; this.setCursorType = function (a) { h.cursor = a }; this._initListener = function () {
        k = h.on("mousedown", this.buttonDown);
        p = h.on("pressup", this.buttonRelease)
    }; this.addEventListener = function (a, b, c) { f[a] = b; g[a] = c }; this.addEventListenerWithParams = function (a, b, c, d) { f[a] = b; g[a] = c; l[a] = d }; this.enable = function () { d = !1 }; this.disable = function () { d = !0 }; this.buttonRelease = function () { d || (h.scaleX = 0 < m ? 1 : -1, h.scaleY = 1, playSound("click", 1, !1), f[ON_MOUSE_UP] && f[ON_MOUSE_UP].call(g[ON_MOUSE_UP], l[ON_MOUSE_UP])) }; this.buttonDown = function () { d || (h.scaleX = 0 < m ? .9 : -.9, h.scaleY = .9, f[ON_MOUSE_DOWN] && f[ON_MOUSE_DOWN].call(g[ON_MOUSE_DOWN], l[ON_MOUSE_DOWN])) };
    this.rotation = function (a) { h.rotation = a }; this.getButton = function () { return h }; this.setPosition = function (a, b) { h.x = a; h.y = b }; this.setX = function (a) { h.x = a }; this.setY = function (a) { h.y = a }; this.getButtonImage = function () { return h }; this.setScaleX = function (a) { m = h.scaleX = a }; this.getX = function () { return h.x }; this.getY = function () { return h.y }; this.pulseAnimation = function () { createjs.Tween.get(h).to({ scaleX: .9 * m, scaleY: .9 * n }, 850, createjs.Ease.quadOut).to({ scaleX: m, scaleY: n }, 650, createjs.Ease.quadIn).call(function () { u.pulseAnimation() }) };
    this.trebleAnimation = function () { createjs.Tween.get(h).to({ rotation: 5 }, 75, createjs.Ease.quadOut).to({ rotation: -5 }, 140, createjs.Ease.quadIn).to({ rotation: 0 }, 75, createjs.Ease.quadIn).wait(750).call(function () { u.trebleAnimation() }) }; this.removeAllTweens = function () { createjs.Tween.removeTweens(h) }; var r = void 0 !== e ? e : s_oStage; this._init(a, c, b); var u = this; return this
}
function CTextButton(a, c, b, e, d, f, g, h) {
    var l, m, n, k, p, r, u, t, v, y; this._init = function (a, b, c, d, e, f, g) { l = !1; m = 1; n = []; k = []; y = createBitmap(c); t = new createjs.Container; t.x = a; t.y = b; t.regX = c.width / 2; t.regY = c.height / 2; s_bMobile || (t.cursor = "pointer"); t.addChild(y, v); h.addChild(t); v = new CTLText(t, 10, 5, c.width - 20, c.height - 10, g, "center", f, e, 1, 0, 0, d, !0, !0, !1, !1); this._initListener() }; this.unload = function () { t.off("mousedown", p); t.off("pressup", r); h.removeChild(t) }; this.setVisible = function (a) { t.visible = a }; this.setAlign =
        function (a) { v.textAlign = a }; this.setTextX = function (a) { v.x = a }; this.setScale = function (a) { m = t.scaleX = t.scaleY = a }; this.enable = function () { l = !1 }; this.disable = function () { l = !0 }; this._initListener = function () { p = t.on("mousedown", this.buttonDown); r = t.on("pressup", this.buttonRelease) }; this.addEventListener = function (a, b, c) { n[a] = b; k[a] = c }; this.addEventListenerWithParams = function (a, b, c, d) { n[a] = b; k[a] = c; u = d }; this.buttonRelease = function () {
            l || (playSound("click", 1, !1), t.scaleX = m, t.scaleY = m, n[ON_MOUSE_UP] && n[ON_MOUSE_UP].call(k[ON_MOUSE_UP],
                u))
        }; this.buttonDown = function () { l || (t.scaleX = .9 * m, t.scaleY = .9 * m, n[ON_MOUSE_DOWN] && n[ON_MOUSE_DOWN].call(k[ON_MOUSE_DOWN])) }; this.setPosition = function (a, b) { t.x = a; t.y = b }; this.tweenPosition = function (a, b, c, d, e, f, g) { createjs.Tween.get(t).wait(d).to({ x: a, y: b }, c, e).call(function () { void 0 !== f && f.call(g) }) }; this.changeText = function (a) { v.refreshText(a) }; this.setX = function (a) { t.x = a }; this.setY = function (a) { t.y = a }; this.getButtonImage = function () { return t }; this.getX = function () { return t.x }; this.getY = function () { return t.y };
    this.getSprite = function () { return t }; this.getScale = function () { return t.scaleX }; this._init(a, c, b, e, d, f, g)
}
function CInterface() {
    var a, c, b, e, d, f, g, h, l, m, n, k, p, r = null, u = null, t, v, y, z; this._init = function () {
        l = new createjs.Container; s_oStage.addChild(l); var n = s_oSpriteLibrary.getSprite("but_exit"); a = CANVAS_WIDTH - n.width / 2 - 20; c = n.height / 2 + 10; t = new CGfxButton(a, c, n, l); t.addEventListener(ON_MOUSE_UP, this._onExit, this); if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) {
            var v = s_oSpriteLibrary.getSprite("audio_icon"); g = a - n.width / 2 - v.width / 4; h = c; m = new CToggle(g, h, v, s_bAudioActive, l); m.addEventListener(ON_MOUSE_UP, this._onAudioToggle,
                this); d = 20 + v.width / 4; f = v.height / 2 + 10
        } else d = a - n.width - 10, f = c; n = s_oSpriteLibrary.getSprite("but_next"); b = g - n.width; e = h; p = new CGfxButton(b, e, n, l); p.addEventListener(ON_MOUSE_UP, this._onSkip, this); p.setVisible(!1); p.disable(); n = window.document; v = n.documentElement; r = v.requestFullscreen || v.mozRequestFullScreen || v.webkitRequestFullScreen || v.msRequestFullscreen; u = n.exitFullscreen || n.mozCancelFullScreen || n.webkitExitFullscreen || n.msExitFullscreen; !1 === ENABLE_FULLSCREEN && (r = !1); r && screenfull.isEnabled && (v =
            s_oSpriteLibrary.getSprite("but_fullscreen"), k = new CToggle(d, f, v, s_bFullscreen, l), k.addEventListener(ON_MOUSE_UP, this._onFullscreenRelease, this)); this.refreshButtonPos(s_iOffsetX, s_iOffsetY)
    }; this.initInterfacesText = function () {
        n = CANVAS_HEIGHT - 250; var a = s_oGame.getBallPosition(); z = new createjs.Text("x" + STARTING_BALLS, "30px " + PRIMARY_FONT, PRIMARY_FONT_COLOUR); z.textAlign = "center"; z.textBaseline = "center"; z.x = a.x + BALL_SIZE / 2; z.y = a.y - BALL_SIZE / 2; l.addChild(z); y = new createjs.Text(TEXT_LINES + " 0", "30px " +
            PRIMARY_FONT, PRIMARY_FONT_COLOUR); y.textAlign = "left"; y.x = 60; y.textBaseline = "alphabetic"; y.y = n; l.addChild(y); v = new createjs.Text(TEXT_BEST + " " + s_iBestScore, "30px " + PRIMARY_FONT, PRIMARY_FONT_COLOUR); v.textAlign = "right"; v.x = CANVAS_WIDTH - 60; v.textBaseline = "alphabetic"; v.y = n; l.addChild(v); this.refreshButtonPos(s_iOffsetX, s_iOffsetY)
    }; this._onSkip = function () { s_bSkipFunction = !0; this.disableSkipButton() }; this.disableSkipButton = function () { p.setVisible(!1); p.disable(); s_oGame.skipFunction() }; this.enableSkipButton =
        function () { p.setVisible(!0); p.enable(); s_oGame.skipFunction() }; this.refreshButtonPos = function (l, u) { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || m.setPosition(g - l, h + u); r && screenfull.isEnabled && k.setPosition(d + l, f + u); t.setPosition(a - l, c + u); p.setPosition(b - l, e + u); n = CANVAS_HEIGHT - u - 50; void 0 !== y && (y.y = n); void 0 !== v && (v.y = n); void 0 !== z && this.refreshBallTextPos() }; this.refreshBallTextPos = function () { var a = s_oGame.getBallPosition(); z.x = a.x + BALL_SIZE / 2; z.y = a.y - BALL_SIZE / 2 }; this.refreshLinesText = function (a) {
            y.text =
                TEXT_LINES + " " + a
        }; this.resetBallText = function (a) { this.refreshBallsText(a); this.refreshBallTextPos(); this.setBallsTextVisible(!0) }; this.refreshBallsText = function (a) { z.text = "x" + a }; this.setBallsTextVisible = function (a) { z.visible = a }; this.unload = function () { if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) m.unload(), m = null; r && screenfull.isEnabled && k.unload(); t.unload(); s_oInterface = null; s_oGame._bDisableEvents = !1; s_oGame.setStartGame(!0) }; this._onExit = function () {
            new CAreYouSurePanel(l); s_oGame._bDisableEvents =
                !0; s_oGame.setStartGame(!1)
        }; this._onAudioToggle = function () { Howler.mute(s_bAudioActive); s_bAudioActive = !s_bAudioActive }; this._onFullscreenRelease = function () { s_bFullscreen ? u.call(window.document) : r.call(window.document.documentElement); sizeHandler() }; this.resetFullscreenBut = function () { r && screenfull.isEnabled && k.setActive(s_bFullscreen) }; s_oInterface = this; this._init(); return this
} var s_oInterface = null;
function CCreditsPanel() {
    var a, c, b, e, d, f, g, h, l, m, n; this._init = function () {
        var k = s_oSpriteLibrary.getSprite("msg_box"); l = new createjs.Container; s_oStage.addChild(l); f = new createjs.Shape; f.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, 2 * CANVAS_HEIGHT); f.alpha = 0; l.addChild(f); createjs.Tween.get(f).to({ alpha: .7 }, 500); n = CANVAS_HEIGHT + k.height / 2; m = new createjs.Container; m.y = n; l.addChild(m); c = createBitmap(k); c.regX = k.width / 2; c.regY = k.height / 2; c.x = CANVAS_WIDTH_HALF; c.y = CANVAS_HEIGHT_HALF; m.addChild(c);
        g = new createjs.Shape; g.graphics.beginFill("#0f0f0f").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); g.alpha = .01; a = g.on("click", this._onLogoButRelease); m.addChild(g); s_bMobile || (g.cursor = "pointer"); k = s_oSpriteLibrary.getSprite("but_exit"); e = new CGfxButton(610, 570, k, m); e.addEventListener(ON_MOUSE_UP, this.unload, this); d = new createjs.Text(TEXT_CREDITS_DEVELOPED, "44px " + PRIMARY_FONT, "#ffffff"); d.textAlign = "center"; d.textBaseline = "alphabetic"; d.x = CANVAS_WIDTH_HALF; d.y = CANVAS_HEIGHT_HALF - 80; m.addChild(d); k = s_oSpriteLibrary.getSprite("logo_ctl");
        b = createBitmap(k); b.regX = k.width / 2; b.regY = k.height / 2; b.x = CANVAS_WIDTH_HALF; b.y = CANVAS_HEIGHT_HALF; m.addChild(b); h = new createjs.Text("www.taptapgames.fun", "38px " + PRIMARY_FONT, "#ffffff"); h.textAlign = "center"; h.textBaseline = "alphabetic"; h.x = CANVAS_WIDTH_HALF; h.y = CANVAS_HEIGHT_HALF + 100; m.addChild(h); createjs.Tween.get(m).to({ y: 0 }, 1E3, createjs.Ease.backOut)
    }; this.unload = function () {
        createjs.Tween.get(f).to({ alpha: 0 }, 500); createjs.Tween.get(l).to({ y: n }, 400, createjs.Ease.backIn).call(function () {
            g.off("click",
                a); e.unload(); e = null; s_oStage.removeChild(l); s_oMenu.exitFromCredits()
        })
    }; this._onLogoButRelease = function () { window.open("www.taptapgames.fun", "_blank") }; this._init()
}
function CAreYouSurePanel() {
    var a, c, b, e, d, f; this._init = function () {
        c = new createjs.Container; s_oStage.addChild(c); f = new createjs.Container; s_oStage.addChild(f); d = new createjs.Shape; d.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); d.alpha = 0; d.on("mousedown", function () { }); c.addChild(d); createjs.Tween.get(d).to({ alpha: .7 }, 500); var g = s_oSpriteLibrary.getSprite("msg_box"), l = createBitmap(g); l.regX = g.width / 2; l.regY = g.height / 2; l.x = CANVAS_WIDTH_HALF; l.y = CANVAS_HEIGHT_HALF; f.addChild(l);
        f.y = CANVAS_HEIGHT + g.height / 2; a = f.y; createjs.Tween.get(f).to({ y: 0 }, 1E3, createjs.Ease.backOut); new CTLText(f, CANVAS_WIDTH / 2 - 250, CANVAS_HEIGHT_HALF - 180, 500, 150, 36, "center", PRIMARY_FONT_COLOUR, PRIMARY_FONT, 1, 0, 0, TEXT_ARE_SURE, !0, !0, !0, !1); b = new CGfxButton(CANVAS_WIDTH_HALF + 195, 790, s_oSpriteLibrary.getSprite("but_yes"), f); b.addEventListener(ON_MOUSE_UP, this._onButYes, this); e = new CGfxButton(CANVAS_WIDTH_HALF - 195, 790, s_oSpriteLibrary.getSprite("but_no"), f); e.addEventListener(ON_MOUSE_UP, this._onButNo, this)
    };
    this._onButYes = function () { e.disable(); b.disable(); createjs.Tween.get(d).to({ alpha: 0 }, 500); createjs.Tween.get(f).to({ y: a }, 400, createjs.Ease.backIn).call(function () { g.unload(); s_oGame.onExit() }) }; this._onButNo = function () { e.disable(); b.disable(); createjs.Tween.get(d).to({ alpha: 0 }, 500); createjs.Tween.get(f).to({ y: a }, 400, createjs.Ease.backIn).call(function () { g.unload() }) }; this.unload = function () {
        e.unload(); b.unload(); s_oGame._bDisableEvents = !1; s_oGame.setStartGame(!0); c.removeChild(d); s_oStage.removeChild(f);
        d.off("mousedown", function () { })
    }; var g = this; this._init()
}
function CHelpPanel() {
    var a, c, b; this._init = function () {
        c = new createjs.Container; b = new createjs.Shape; b.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); s_oStage.addChild(c, b); createjs.Tween.get(b).to({ alpha: 0 }, 500).call(function () { b.visible = !1; s_oStage.removeChild(b) }); var e = new createjs.Shape; e.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); e.alpha = .7; c.addChild(e); e = s_oSpriteLibrary.getSprite("msg_box"); a = createBitmap(e); a.regX = e.width / 2; a.regY = e.height /
            2; a.x = CANVAS_WIDTH_HALF; a.y = CANVAS_HEIGHT_HALF; c.addChild(a); this.initText(); var d = this; c.on("pressup", function () { d._onExitHelp() }); s_oGame._bDisableEvents = !0; s_bMobile || (c.cursor = "pointer")
    }; this.initText = function () {
        var a = CANVAS_WIDTH_HALF - 250, b = CANVAS_HEIGHT_HALF - 30, f = CANVAS_HEIGHT_HALF + 70; new CTLText(c, a, CANVAS_HEIGHT_HALF - 180, 500, 150, 32, "center", PRIMARY_FONT_COLOUR, PRIMARY_FONT, 1, 0, 0, TEXT_HELP1, !0, !0, !0, !1); new CTLText(c, a, b, 500, 100, 32, "center", PRIMARY_FONT_COLOUR, PRIMARY_FONT, 1, 0, 0, TEXT_HELP2,
            !0, !0, !0, !1); new CTLText(c, a, f, 500, 100, 32, "center", PRIMARY_FONT_COLOUR, PRIMARY_FONT, 1, 0, 0, TEXT_HELP3, !0, !0, !0, !1)
    }; this.unload = function () { createjs.Tween.get(c).to({ alpha: 0 }, 500, createjs.Ease.cubicOut).call(function () { createjs.Tween.removeAllTweens(); s_oStage.removeChild(c); s_oGame._bDisableEvents = !1; var a = this; c.off("pressup", function () { a._onExitHelp() }) }) }; this._onExitHelp = function () { this.unload(); s_oGame._onExitHelp() }; this._init()
}
function CEndPanel(a) {
    var c, b, e, d, f, g, h; this._init = function () {
        h = a; b = new createjs.Container; s_oStage.addChild(b); e = new createjs.Shape; e.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); c = e.on("click", function () { }); d = createBitmap(s_oSpriteLibrary.getSprite("bg_end_panel")); b.addChild(d, e); var l = s_oSpriteLibrary.getSprite("msg_box_big"), m = createBitmap(l); m.regX = l.width / 2; m.regY = l.height / 2; m.x = CANVAS_WIDTH_HALF; m.y = CANVAS_HEIGHT_HALF; b.addChild(m); new CTLText(b, CANVAS_WIDTH / 2 - 300,
            CANVAS_HEIGHT_HALF - 180, 600, 50, 50, "center", PRIMARY_FONT_COLOUR, PRIMARY_FONT, 1, 0, 0, TEXT_GAMEOVER, !0, !0, !0, !1); new CTLText(b, CANVAS_WIDTH / 2 - 250, CANVAS_HEIGHT_HALF - 80, 500, 36, 36, "center", PRIMARY_FONT_COLOUR, PRIMARY_FONT, 1, 0, 0, TEXT_LINES + ": " + h, !0, !0, !0, !1); new CTLText(b, CANVAS_WIDTH / 2 - 250, CANVAS_HEIGHT_HALF - 20, 500, 36, 36, "center", PRIMARY_FONT_COLOUR, PRIMARY_FONT, 1, 0, 0, TEXT_BEST_SCORE + ": " + s_iBestScore, !0, !0, !0, !1); f = new CGfxButton(CANVAS_WIDTH_HALF - 200, 840, s_oSpriteLibrary.getSprite("but_home"), b); f.addEventListener(ON_MOUSE_UP,
                this._onExit, this); g = new CGfxButton(CANVAS_WIDTH_HALF + 200, 840, s_oSpriteLibrary.getSprite("but_restart"), b); g.addEventListener(ON_MOUSE_UP, this._onRestart, this); new CInterface; b.alpha = 0; createjs.Tween.get(b).wait(500).to({ alpha: 1 }, 2E3, createjs.Ease.cubicOut).call(function () { $(s_oMain).trigger("show_interlevel_ad") })
    }; this.unload = function () { f.unload(); g.unload(); e.off("click", c); s_oStage.removeChild(b); s_oEndPanel = null }; this._onExit = function () { this.unload(); s_oGame.onExit() }; this._onRestart = function () {
        this.unload();
        s_oGame.restart()
    }; s_oEndPanel = this; this._init()
} var s_oEndPanel = null;
function CEdge(a, c, b, e, d, f, g) {
    var h, l, m, n, k, p, r, u; this.init = function (a, b, c, d, e) { u = 0; k = new CEdgeModel(a, b, c, d, g); var h = k.getLength(); (r = f) && (p = new CEdgeViewer(a, b, c, d, h, e)) }; this.getModel = function () { return k }; this.moveY = function (a) { r && p.moveY(a); k.moveY(a) }; this.moveX = function (a) { r && p.moveX(a); k.moveX(a) }; this.changeSize = function (a) {
        u += a; m = k.getPointA().getX(); n = k.getPointA().getY(); h = k.getPointB().getX(); l = k.getPointB().getY(); k.destroy(); k = new CEdgeModel(m + a, n, h - a, l); r && (p.unload(), p = new CEdgeViewer(k.getPointA().getX(),
            k.getPointA().getY(), k.getPointB().getX(), k.getPointB().getY(), k.getLength(), d))
    }; this.destroy = function () { k.destroy(); r && p.unload() }; this.resetSize = function (a) {
        m = k.getPointA().getX(); n = k.getPointA().getY(); h = k.getPointB().getX(); l = k.getPointB().getY(); k.destroy(); var b = 0 < u * a ? 0 < a ? -1 : 1 : 0 > a ? -1 : 1; k = 0 > u * a ? new CEdgeModel(m - b * a * u, n, h + b * a * u, l) : new CEdgeModel(m + b * a * u, n, h - b * a * u, l); u = 0; r && (p.unload(), p = new CEdgeViewer(k.getPointA().getX(), k.getPointA().getY(), k.getPointB().getX(), k.getPointB().getY(), k.getLength(),
            d))
    }; this.init(a, c, b, e, d)
}
function CEdgeModel(a, c, b, e, d) {
    var f = null, g = null, h = null, l = null, m = null; this._init = function (a, b, c, d) { this.set(a, b, c, d) }; this.destroy = function () { m = l = h = g = f = null }; this.render = function (a) { a.moveTo(f.x, f.y); a.lineTo(g.x, g.y) }; this.toString = function (a) { trace(a + " " + f.x + " " + f.y + " " + g.x + " " + g.y) }; this.add = function (a) { f.addV(a); g.addV(a) }; this.editSize = function (a) { f.subtract(a); g.addV(a); this.calculateNormal(); this.calculateCenter() }; this.set = function (a, b, c, d) {
        f = new CVector2; g = new CVector2; f.set(a, b); g.set(c,
            d); this.calculateNormal(); this.calculateCenter()
    }; this.moveY = function (a) { f.add(0, a); g.add(0, a); this.calculateNormal(); this.calculateCenter() }; this.moveX = function (a) { f.add(a, 0); g.add(a, 0); this.calculateNormal(); this.calculateCenter() }; this.scale = function (a) { f.scalarProduct(a); g.scalarProduct(a); this.calculateNormal(); this.calculateCenter() }; this.calculateNormal = function () { m = null; m = new CVector2; m.setV(g); m.subtract(f); m.rot90CCW(); void 0 !== d && m.rotate(d); m.normalize() }; this.calculateCenter = function () {
        h =
            null; h = centerBetweenPointsV2(f, g); l = new CVector2; l.setV(m); l.scalarProduct(5); l.addV(h)
    }; this.getPointA = function () { return f }; this.m_pCenter = function () { return h }; this.getPointB = function () { return g }; this.getNormal = function () { return m }; this.renderNormal = function (a) { a.moveTo(h.x, h.y); a.lineTo(l.x, l.y) }; this.getLength = function () { return Math.sqrt(Math.pow(b - a, 2) + Math.pow(e - c, 2)) }; this._init(a, c, b, e); return this
}
function CEdgeViewer(a, c, b, e, d, f) {
    var g; this.init = function (a, b, c, d, e, f) { a = a > c || b > d ? b === d ? (new createjs.Graphics).beginFill("#FFF").drawRect(c, d, e, f) : (new createjs.Graphics).beginFill("#FFF").drawRect(c, d, f, e) : b === d ? (new createjs.Graphics).beginFill("#FFF").drawRect(a, b, e, f) : (new createjs.Graphics).beginFill("#FFF").drawRect(a, b, f, e); g = new createjs.Shape(a); g.y = -f / 2; g.alpha = .3; s_oStage.addChild(g) }; this.moveY = function (a) { g.y += a }; this.moveX = function (a) { g.x += a }; this.unload = function () { s_oStage.removeChild(g) };
    this.init(a, c, b, e, d, f)
}
function CMsgBox(a, c) {
    var b, e; this._init = function (a) {
        e = new createjs.Container; d.addChild(e); a = new createjs.Shape; a.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); a.alpha = .5; a.on("click", function () { }); e.addChild(a); a = s_oSpriteLibrary.getSprite("msg_box_big"); var c = createBitmap(a); c.x = .5 * CANVAS_WIDTH; c.y = .5 * CANVAS_HEIGHT; c.regX = .5 * a.width; c.regY = .5 * a.height; e.addChild(c); new CTLText(e, CANVAS_WIDTH / 2 - 250, CANVAS_HEIGHT_HALF - 220, 500, 200, 26, "center", PRIMARY_FONT_COLOUR, PRIMARY_FONT,
            1, 0, 0, TEXT_ERR_LS, !0, !0, !0, !1); b = new CGfxButton(CANVAS_WIDTH / 2, 820, s_oSpriteLibrary.getSprite("but_yes"), e); b.addEventListener(ON_MOUSE_UP, this._onButOk, this)
    }; this._onButOk = function () { this.unload() }; this.unload = function () { b.unload(); d.removeChild(e) }; var d = c; this._init(a)
}
CTLText.prototype = {
    constructor: CTLText, __autofit: function () { if (this._bFitText) { for (var a = this._iFontSize; (this._oText.getBounds().height > this._iHeight - 2 * this._iPaddingV || this._oText.getBounds().width > this._iWidth - 2 * this._iPaddingH) && !(a--, this._oText.font = a + "px " + this._szFont, this._oText.lineHeight = Math.round(a * this._fLineHeightFactor), this.__updateY(), this.__verticalAlign(), 8 > a);); this._iFontSize = a } }, __verticalAlign: function () {
        if (this._bVerticalAlign) {
            var a = this._oText.getBounds().height; this._oText.y -=
                (a - this._iHeight) / 2 + this._iPaddingV
        }
    }, __updateY: function () { this._oText.y = this._y + this._iPaddingV; switch (this._oText.textBaseline) { case "middle": this._oText.y += this._oText.lineHeight / 2 + (this._iFontSize * this._fLineHeightFactor - this._iFontSize) } }, __createText: function (a) {
        this._bDebug && (this._oDebugShape = new createjs.Shape, this._oDebugShape.graphics.beginFill("rgba(255,0,0,0.5)").drawRect(this._x, this._y, this._iWidth, this._iHeight), this._oContainer.addChild(this._oDebugShape)); this._oText = new createjs.Text(a,
            this._iFontSize + "px " + this._szFont, this._szColor); this._oText.textBaseline = "middle"; this._oText.lineHeight = Math.round(this._iFontSize * this._fLineHeightFactor); this._oText.textAlign = this._szAlign; this._oText.lineWidth = this._bMultiline ? this._iWidth - 2 * this._iPaddingH : null; switch (this._szAlign) { case "center": this._oText.x = this._x + this._iWidth / 2; break; case "left": this._oText.x = this._x + this._iPaddingH; break; case "right": this._oText.x = this._x + this._iWidth - this._iPaddingH }this._oContainer.addChild(this._oText);
        this.refreshText(a)
    }, setVerticalAlign: function (a) { this._bVerticalAlign = a }, setOutline: function (a) { null !== this._oText && (this._oText.outline = a) }, setShadow: function (a, c, b, e) { null !== this._oText && (this._oText.shadow = new createjs.Shadow(a, c, b, e)) }, setColor: function (a) { this._oText.color = a }, setAlpha: function (a) { this._oText.alpha = a }, removeTweens: function () { createjs.Tween.removeTweens(this._oText) }, getText: function () { return this._oText }, getY: function () { return this._y }, getFontSize: function () { return this._iFontSize },
    refreshText: function (a) { "" === a && (a = " "); null === this._oText && this.__createText(a); this._oText.text = a; this._oText.font = this._iFontSize + "px " + this._szFont; this._oText.lineHeight = Math.round(this._iFontSize * this._fLineHeightFactor); this.__autofit(); this.__updateY(); this.__verticalAlign() }
};
function CTLText(a, c, b, e, d, f, g, h, l, m, n, k, p, r, u, t, v) { this._oContainer = a; this._x = c; this._y = b; this._iWidth = e; this._iHeight = d; this._bMultiline = t; this._iFontSize = f; this._szAlign = g; this._szColor = h; this._szFont = l; this._iPaddingH = n; this._iPaddingV = k; this._bVerticalAlign = u; this._bFitText = r; this._bDebug = v; this._oDebugShape = null; this._fLineHeightFactor = m; this._oText = null; p && this.__createText(p) }
function extractHostname(a) { a = -1 < a.indexOf("://") ? a.split("/")[2] : a.split("/")[0]; a = a.split(":")[0]; return a = a.split("?")[0] } function extractRootDomain(a) { a = extractHostname(a); var c = a.split("."), b = c.length; 2 < b && (a = c[b - 2] + "." + c[b - 1]); return a }
var getClosestTop = function () { var a = window, c = !1; try { for (; a.parent.document !== a.document;)if (a.parent.document) a = a.parent; else { c = !0; break } } catch (b) { c = !0 } return { topFrame: a, err: c } }, getBestPageUrl = function (a) { var c = a.topFrame, b = ""; if (a.err) try { try { b = window.top.location.href } catch (d) { var e = window.location.ancestorOrigins; b = e[e.length - 1] } } catch (d) { b = c.document.referrer } else b = c.location.href; return b }, TOPFRAMEOBJ = getClosestTop(), PAGE_URL = getBestPageUrl(TOPFRAMEOBJ);
function seekAndDestroy() { for (var a = extractRootDomain(PAGE_URL), c = [String.fromCharCode(99, 111, 100, 101, 116, 104, 105, 115, 108, 97, 98, 46, 99, 111, 109), String.fromCharCode(101, 110, 118, 97, 116, 111, 46, 99, 111, 109), String.fromCharCode(99, 111, 100, 101, 99, 97, 110, 121, 111, 110, 46, 99, 111, 109), String.fromCharCode(99, 111, 100, 101, 99, 97, 110, 121, 111, 110, 46, 110, 101, 116)], b = 0; b < c.length; b++)if (c[b] === a) return !0; return !1 };