/*
 Platform.js <https://mths.be/platform>
 Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 Copyright 2011-2013 John-David Dalton
 Available under MIT license <https://mths.be/mit>
*/
(function () {
    var a = "undefined" !== typeof window && "undefined" !== typeof window.document ? window.document : {}, c = "undefined" !== typeof module && module.exports, b = "undefined" !== typeof Element && "ALLOW_KEYBOARD_INPUT" in Element, d = function () {
        for (var b, d = ["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "), "webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),
        "webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "), "mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "), "msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")], c = 0, e = d.length, n = {}; c < e; c++)if ((b = d[c]) && b[1] in a) {
            for (c = 0; c < b.length; c++)n[d[0][c]] =
                b[c]; return n
        } return !1
    }(), e = { change: d.fullscreenchange, error: d.fullscreenerror }, k = {
        request: function (c) { var e = d.requestFullscreen; c = c || a.documentElement; if (/5\.1[.\d]* Safari/.test(navigator.userAgent)) c[e](); else c[e](b && Element.ALLOW_KEYBOARD_INPUT) }, exit: function () { a[d.exitFullscreen]() }, toggle: function (a) { this.isFullscreen ? this.exit() : this.request(a) }, onchange: function (a) { this.on("change", a) }, onerror: function (a) { this.on("error", a) }, on: function (b, d) { var c = e[b]; c && a.addEventListener(c, d, !1) }, off: function (b,
            d) { var c = e[b]; c && a.removeEventListener(c, d, !1) }, raw: d
    }; d ? (Object.defineProperties(k, { isFullscreen: { get: function () { return !!a[d.fullscreenElement] } }, element: { enumerable: !0, get: function () { return a[d.fullscreenElement] } }, enabled: { enumerable: !0, get: function () { return !!a[d.fullscreenEnabled] } } }), c ? module.exports = k : window.screenfull = k) : c ? module.exports = !1 : window.screenfull = !1
})();
(function () {
    function a(a) { a = String(a); return a.charAt(0).toUpperCase() + a.slice(1) } function c(a, b) { var c = -1, e = a ? a.length : 0; if ("number" == typeof e && -1 < e && e <= x) for (; ++c < e;)b(a[c], c, a); else d(a, b) } function b(b) { b = String(b).replace(/^ +| +$/g, ""); return /^(?:webOS|i(?:OS|P))/.test(b) ? b : a(b) } function d(a, b) { for (var c in a) z.call(a, c) && b(a[c], c, a) } function e(b) { return null == b ? a(b) : A.call(b).slice(8, -1) } function k(a, b) {
        var c = null != a ? typeof a[b] : "number"; return !/^(?:boolean|number|string|undefined)$/.test(c) &&
            ("object" == c ? !!a[b] : !0)
    } function l(a) { return String(a).replace(/([ -])(?!$)/g, "$1?") } function m(a, b) { var d = null; c(a, function (c, e) { d = b(d, c, e, a) }); return d } function r(a) {
        function c(c) {
            return m(c, function (c, d) {
                var e = d.pattern || l(d); !c && (c = RegExp("\\b" + e + " *\\d+[.\\w_]*", "i").exec(a) || RegExp("\\b" + e + " *\\w+-[\\w]*", "i").exec(a) || RegExp("\\b" + e + "(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)", "i").exec(a)) && ((c = String(d.label && !RegExp(e, "i").test(d.label) ? d.label : c).split("/"))[1] && !/[\d.]+/.test(c[0]) && (c[0] +=
                    " " + c[1]), d = d.label || d, c = b(c[0].replace(RegExp(e, "i"), d).replace(RegExp("; *(?:" + d + "[_-])?", "i"), " ").replace(RegExp("(" + d + ")[-_.]?(\\w)", "i"), "$1 $2"))); return c
            })
        } function f(b) { return m(b, function (b, c) { return b || (RegExp(c + "(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)", "i").exec(a) || 0)[1] || null }) } var h = n, p = a && "object" == typeof a && "String" != e(a); p && (h = a, a = null); var x = h.navigator || {}, u = x.userAgent || ""; a || (a = u); var w = p ? !!x.likeChrome : /\bChrome\b/.test(a) && !/internal|\n/i.test(A.toString()),
            D = p ? "Object" : "ScriptBridgingProxyObject", R = p ? "Object" : "Environment", z = p && h.java ? "JavaPackage" : e(h.java), V = p ? "Object" : "RuntimeObject"; R = (z = /\bJava/.test(z) && h.java) && e(h.environment) == R; var M = z ? "a" : "\u03b1", W = z ? "b" : "\u03b2", S = h.document || {}, I = h.operamini || h.opera, O = v.test(O = p && I ? I["[[Class]]"] : e(I)) ? O : I = null, g, P = a; p = []; var Q = null, J = a == u; u = J && I && "function" == typeof I.version && I.version(); var B = function (b) {
                return m(b, function (b, c) {
                    return b || RegExp("\\b" + (c.pattern || l(c)) + "\\b", "i").exec(a) && (c.label ||
                        c)
                })
            }([{ label: "EdgeHTML", pattern: "Edge" }, "Trident", { label: "WebKit", pattern: "AppleWebKit" }, "iCab", "Presto", "NetFront", "Tasman", "KHTML", "Gecko"]), q = function (b) { return m(b, function (b, c) { return b || RegExp("\\b" + (c.pattern || l(c)) + "\\b", "i").exec(a) && (c.label || c) }) }(["Adobe AIR", "Arora", "Avant Browser", "Breach", "Camino", "Electron", "Epiphany", "Fennec", "Flock", "Galeon", "GreenBrowser", "iCab", "Iceweasel", "K-Meleon", "Konqueror", "Lunascape", "Maxthon", { label: "Microsoft Edge", pattern: "Edge" }, "Midori", "Nook Browser",
                "PaleMoon", "PhantomJS", "Raven", "Rekonq", "RockMelt", { label: "Samsung Internet", pattern: "SamsungBrowser" }, "SeaMonkey", { label: "Silk", pattern: "(?:Cloud9|Silk-Accelerated)" }, "Sleipnir", "SlimBrowser", { label: "SRWare Iron", pattern: "Iron" }, "Sunrise", "Swiftfox", "Waterfox", "WebPositive", "Opera Mini", { label: "Opera Mini", pattern: "OPiOS" }, "Opera", { label: "Opera", pattern: "OPR" }, "Chrome", { label: "Chrome Mobile", pattern: "(?:CriOS|CrMo)" }, { label: "Firefox", pattern: "(?:Firefox|Minefield)" }, { label: "Firefox for iOS", pattern: "FxiOS" },
                { label: "IE", pattern: "IEMobile" }, { label: "IE", pattern: "MSIE" }, "Safari"]), C = c([{ label: "BlackBerry", pattern: "BB10" }, "BlackBerry", { label: "Galaxy S", pattern: "GT-I9000" }, { label: "Galaxy S2", pattern: "GT-I9100" }, { label: "Galaxy S3", pattern: "GT-I9300" }, { label: "Galaxy S4", pattern: "GT-I9500" }, { label: "Galaxy S5", pattern: "SM-G900" }, { label: "Galaxy S6", pattern: "SM-G920" }, { label: "Galaxy S6 Edge", pattern: "SM-G925" }, { label: "Galaxy S7", pattern: "SM-G930" }, { label: "Galaxy S7 Edge", pattern: "SM-G935" }, "Google TV", "Lumia", "iPad",
                    "iPod", "iPhone", "Kindle", { label: "Kindle Fire", pattern: "(?:Cloud9|Silk-Accelerated)" }, "Nexus", "Nook", "PlayBook", "PlayStation Vita", "PlayStation", "TouchPad", "Transformer", { label: "Wii U", pattern: "WiiU" }, "Wii", "Xbox One", { label: "Xbox 360", pattern: "Xbox" }, "Xoom"]), G = function (b) { return m(b, function (b, c, d) { return b || (c[C] || c[/^[a-z]+(?: +[a-z]+\b)*/i.exec(C)] || RegExp("\\b" + l(d) + "(?:\\b|\\w*\\d)", "i").exec(a)) && d }) }({
                        Apple: { iPad: 1, iPhone: 1, iPod: 1 }, Archos: {}, Amazon: { Kindle: 1, "Kindle Fire": 1 }, Asus: { Transformer: 1 },
                        "Barnes & Noble": { Nook: 1 }, BlackBerry: { PlayBook: 1 }, Google: { "Google TV": 1, Nexus: 1 }, HP: { TouchPad: 1 }, HTC: {}, LG: {}, Microsoft: { Xbox: 1, "Xbox One": 1 }, Motorola: { Xoom: 1 }, Nintendo: { "Wii U": 1, Wii: 1 }, Nokia: { Lumia: 1 }, Samsung: { "Galaxy S": 1, "Galaxy S2": 1, "Galaxy S3": 1, "Galaxy S4": 1 }, Sony: { PlayStation: 1, "PlayStation Vita": 1 }
                    }), t = function (c) {
                        return m(c, function (c, d) {
                            var e = d.pattern || l(d); if (!c && (c = RegExp("\\b" + e + "(?:/[\\d.]+|[ \\w.]*)", "i").exec(a))) {
                                var m = c, f = d.label || d, g = {
                                    "10.0": "10", "6.4": "10 Technical Preview",
                                    "6.3": "8.1", "6.2": "8", "6.1": "Server 2008 R2 / 7", "6.0": "Server 2008 / Vista", "5.2": "Server 2003 / XP 64-bit", "5.1": "XP", "5.01": "2000 SP1", "5.0": "2000", "4.0": "NT", "4.90": "ME"
                                }; e && f && /^Win/i.test(m) && !/^Windows Phone /i.test(m) && (g = g[/[\d.]+$/.exec(m)]) && (m = "Windows " + g); m = String(m); e && f && (m = m.replace(RegExp(e, "i"), f)); c = m = b(m.replace(/ ce$/i, " CE").replace(/\bhpw/i, "web").replace(/\bMacintosh\b/, "Mac OS").replace(/_PowerPC\b/i, " OS").replace(/\b(OS X) [^ \d]+/i, "$1").replace(/\bMac (OS X)\b/, "$1").replace(/\/(\d)/,
                                    " $1").replace(/_/g, ".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i, "").replace(/\bx86\.64\b/gi, "x86_64").replace(/\b(Windows Phone) OS\b/, "$1").replace(/\b(Chrome OS \w+) [\d.]+\b/, "$1").split(" on ")[0])
                            } return c
                        })
                    }(["Windows Phone", "Android", "CentOS", { label: "Chrome OS", pattern: "CrOS" }, "Debian", "Fedora", "FreeBSD", "Gentoo", "Haiku", "Kubuntu", "Linux Mint", "OpenBSD", "Red Hat", "SuSE", "Ubuntu", "Xubuntu", "Cygwin", "Symbian OS", "hpwOS", "webOS ", "webOS", "Tablet OS", "Tizen", "Linux", "Mac OS X", "Macintosh", "Mac",
                        "Windows 98;", "Windows "]); B && (B = [B]); G && !C && (C = c([G])); if (g = /\bGoogle TV\b/.exec(C)) C = g[0]; /\bSimulator\b/i.test(a) && (C = (C ? C + " " : "") + "Simulator"); "Opera Mini" == q && /\bOPiOS\b/.test(a) && p.push("running in Turbo/Uncompressed mode"); "IE" == q && /\blike iPhone OS\b/.test(a) ? (g = r(a.replace(/like iPhone OS/, "")), G = g.manufacturer, C = g.product) : /^iP/.test(C) ? (q || (q = "Safari"), t = "iOS" + ((g = / OS ([\d_]+)/i.exec(a)) ? " " + g[1].replace(/_/g, ".") : "")) : "Konqueror" != q || /buntu/i.test(t) ? G && "Google" != G && (/Chrome/.test(q) &&
                            !/\bMobile Safari\b/i.test(a) || /\bVita\b/.test(C)) || /\bAndroid\b/.test(t) && /^Chrome/.test(q) && /\bVersion\//i.test(a) ? (q = "Android Browser", t = /\bAndroid\b/.test(t) ? t : "Android") : "Silk" == q ? (/\bMobi/i.test(a) || (t = "Android", p.unshift("desktop mode")), /Accelerated *= *true/i.test(a) && p.unshift("accelerated")) : "PaleMoon" == q && (g = /\bFirefox\/([\d.]+)\b/.exec(a)) ? p.push("identifying as Firefox " + g[1]) : "Firefox" == q && (g = /\b(Mobile|Tablet|TV)\b/i.exec(a)) ? (t || (t = "Firefox OS"), C || (C = g[1])) : !q || (g = !/\bMinefield\b/i.test(a) &&
                                /\b(?:Firefox|Safari)\b/.exec(q)) ? (q && !C && /[\/,]|^[^(]+?\)/.test(a.slice(a.indexOf(g + "/") + 8)) && (q = null), (g = C || G || t) && (C || G || /\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(t)) && (q = /[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(t) ? t : g) + " Browser")) : "Electron" == q && (g = (/\bChrome\/([\d.]+)\b/.exec(a) || 0)[1]) && p.push("Chromium " + g) : t = "Kubuntu"; u || (u = f(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))", "Version", l(q), "(?:Firefox|Minefield|NetFront)"]));
        if (g = "iCab" == B && 3 < parseFloat(u) && "WebKit" || /\bOpera\b/.test(q) && (/\bOPR\b/.test(a) ? "Blink" : "Presto") || /\b(?:Midori|Nook|Safari)\b/i.test(a) && !/^(?:Trident|EdgeHTML)$/.test(B) && "WebKit" || !B && /\bMSIE\b/i.test(a) && ("Mac OS" == t ? "Tasman" : "Trident") || "WebKit" == B && /\bPlayStation\b(?! Vita\b)/i.test(q) && "NetFront") B = [g]; "IE" == q && (g = (/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(a) || 0)[1]) ? (q += " Mobile", t = "Windows Phone " + (/\+$/.test(g) ? g : g + ".x"), p.unshift("desktop mode")) : /\bWPDesktop\b/i.test(a) ? (q = "IE Mobile", t = "Windows Phone 8.x",
            p.unshift("desktop mode"), u || (u = (/\brv:([\d.]+)/.exec(a) || 0)[1])) : "IE" != q && "Trident" == B && (g = /\brv:([\d.]+)/.exec(a)) && (q && p.push("identifying as " + q + (u ? " " + u : "")), q = "IE", u = g[1]); if (J) {
                if (k(h, "global")) if (z && (g = z.lang.System, P = g.getProperty("os.arch"), t = t || g.getProperty("os.name") + " " + g.getProperty("os.version")), R) { try { u = h.require("ringo/engine").version.join("."), q = "RingoJS" } catch (U) { (g = h.system) && g.global.system == h.system && (q = "Narwhal", t || (t = g[0].os || null)) } q || (q = "Rhino") } else "object" == typeof h.process &&
                    !h.process.browser && (g = h.process) && ("object" == typeof g.versions && ("string" == typeof g.versions.electron ? (p.push("Node " + g.versions.node), q = "Electron", u = g.versions.electron) : "string" == typeof g.versions.nw && (p.push("Chromium " + u, "Node " + g.versions.node), q = "NW.js", u = g.versions.nw)), q || (q = "Node.js", P = g.arch, t = g.platform, u = (u = /[\d.]+/.exec(g.version)) ? u[0] : null)); else e(g = h.runtime) == D ? (q = "Adobe AIR", t = g.flash.system.Capabilities.os) : e(g = h.phantom) == V ? (q = "PhantomJS", u = (g = g.version || null) && g.major + "." + g.minor +
                        "." + g.patch) : "number" == typeof S.documentMode && (g = /\bTrident\/(\d+)/i.exec(a)) ? (u = [u, S.documentMode], (g = +g[1] + 4) != u[1] && (p.push("IE " + u[1] + " mode"), B && (B[1] = ""), u[1] = g), u = "IE" == q ? String(u[1].toFixed(1)) : u[0]) : "number" == typeof S.documentMode && /^(?:Chrome|Firefox)\b/.test(q) && (p.push("masking as " + q + " " + u), q = "IE", u = "11.0", B = ["Trident"], t = "Windows"); t = t && b(t)
            } u && (g = /(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(u) || /(?:alpha|beta)(?: ?\d)?/i.exec(a + ";" + (J && x.appMinorVersion)) || /\bMinefield\b/i.test(a) &&
                "a") && (Q = /b/i.test(g) ? "beta" : "alpha", u = u.replace(RegExp(g + "\\+?$"), "") + ("beta" == Q ? W : M) + (/\d+\+?/.exec(g) || "")); if ("Fennec" == q || "Firefox" == q && /\b(?:Android|Firefox OS)\b/.test(t)) q = "Firefox Mobile"; else if ("Maxthon" == q && u) u = u.replace(/\.[\d.]+/, ".x"); else if (/\bXbox\b/i.test(C)) "Xbox 360" == C && (t = null), "Xbox 360" == C && /\bIEMobile\b/.test(a) && p.unshift("mobile mode"); else if (!/^(?:Chrome|IE|Opera)$/.test(q) && (!q || C || /Browser|Mobi/.test(q)) || "Windows CE" != t && !/Mobi/i.test(a)) if ("IE" == q && J) try {
                    null === h.external &&
                        p.unshift("platform preview")
                } catch (U) { p.unshift("embedded") } else (/\bBlackBerry\b/.test(C) || /\bBB10\b/.test(a)) && (g = (RegExp(C.replace(/ +/g, " *") + "/([.\\d]+)", "i").exec(a) || 0)[1] || u) ? (g = [g, /BB10/.test(a)], t = (g[1] ? (C = null, G = "BlackBerry") : "Device Software") + " " + g[0], u = null) : this != d && "Wii" != C && (J && I || /Opera/.test(q) && /\b(?:MSIE|Firefox)\b/i.test(a) || "Firefox" == q && /\bOS X (?:\d+\.){2,}/.test(t) || "IE" == q && (t && !/^Win/.test(t) && 5.5 < u || /\bWindows XP\b/.test(t) && 8 < u || 8 == u && !/\bTrident\b/.test(a))) && !v.test(g =
                    r.call(d, a.replace(v, "") + ";")) && g.name && (g = "ing as " + g.name + ((g = g.version) ? " " + g : ""), v.test(q) ? (/\bIE\b/.test(g) && "Mac OS" == t && (t = null), g = "identify" + g) : (g = "mask" + g, q = O ? b(O.replace(/([a-z])([A-Z])/g, "$1 $2")) : "Opera", /\bIE\b/.test(g) && (t = null), J || (u = null)), B = ["Presto"], p.push(g)); else q += " Mobile"; if (g = (/\bAppleWebKit\/([\d.]+\+?)/i.exec(a) || 0)[1]) {
                        g = [parseFloat(g.replace(/\.(\d)$/, ".0$1")), g]; if ("Safari" == q && "+" == g[1].slice(-1)) q = "WebKit Nightly", Q = "alpha", u = g[1].slice(0, -1); else if (u == g[1] || u == (g[2] =
                            (/\bSafari\/([\d.]+\+?)/i.exec(a) || 0)[1])) u = null; g[1] = (/\bChrome\/([\d.]+)/i.exec(a) || 0)[1]; 537.36 == g[0] && 537.36 == g[2] && 28 <= parseFloat(g[1]) && "WebKit" == B && (B = ["Blink"]); J && (w || g[1]) ? (B && (B[1] = "like Chrome"), g = g[1] || (g = g[0], 530 > g ? 1 : 532 > g ? 2 : 532.05 > g ? 3 : 533 > g ? 4 : 534.03 > g ? 5 : 534.07 > g ? 6 : 534.1 > g ? 7 : 534.13 > g ? 8 : 534.16 > g ? 9 : 534.24 > g ? 10 : 534.3 > g ? 11 : 535.01 > g ? 12 : 535.02 > g ? "13+" : 535.07 > g ? 15 : 535.11 > g ? 16 : 535.19 > g ? 17 : 536.05 > g ? 18 : 536.1 > g ? 19 : 537.01 > g ? 20 : 537.11 > g ? "21+" : 537.13 > g ? 23 : 537.18 > g ? 24 : 537.24 > g ? 25 : 537.36 > g ? 26 : "Blink" !=
                                B ? "27" : "28")) : (B && (B[1] = "like Safari"), g = (g = g[0], 400 > g ? 1 : 500 > g ? 2 : 526 > g ? 3 : 533 > g ? 4 : 534 > g ? "4+" : 535 > g ? 5 : 537 > g ? 6 : 538 > g ? 7 : 601 > g ? 8 : "8")); B && (B[1] += " " + (g += "number" == typeof g ? ".x" : /[.+]/.test(g) ? "" : "+")); "Safari" == q && (!u || 45 < parseInt(u)) && (u = g)
                    } "Opera" == q && (g = /\bzbov|zvav$/.exec(t)) ? (q += " ", p.unshift("desktop mode"), "zvav" == g ? (q += "Mini", u = null) : q += "Mobile", t = t.replace(RegExp(" *" + g + "$"), "")) : "Safari" == q && /\bChrome\b/.exec(B && B[1]) && (p.unshift("desktop mode"), q = "Chrome Mobile", u = null, /\bOS X\b/.test(t) ? (G =
                        "Apple", t = "iOS 4.3+") : t = null); u && 0 == u.indexOf(g = /[\d.]+$/.exec(t)) && -1 < a.indexOf("/" + g + "-") && (t = String(t.replace(g, "")).replace(/^ +| +$/g, "")); B && !/\b(?:Avant|Nook)\b/.test(q) && (/Browser|Lunascape|Maxthon/.test(q) || "Safari" != q && /^iOS/.test(t) && /\bSafari\b/.test(B[1]) || /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(q) && B[1]) && (g = B[B.length - 1]) && p.push(g); p.length && (p = ["(" + p.join("; ") + ")"]); G && C && 0 > C.indexOf(G) && p.push("on " + G); C && p.push((/^on /.test(p[p.length -
                            1]) ? "" : "on ") + C); if (t) { var T = (g = / ([\d.+]+)$/.exec(t)) && "/" == t.charAt(t.length - g[0].length - 1); t = { architecture: 32, family: g && !T ? t.replace(g[0], "") : t, version: g ? g[1] : null, toString: function () { var a = this.version; return this.family + (a && !T ? " " + a : "") + (64 == this.architecture ? " 64-bit" : "") } } } (g = /\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(P)) && !/\bi686\b/i.test(P) ? (t && (t.architecture = 64, t.family = t.family.replace(RegExp(" *" + g), "")), q && (/\bWOW64\b/i.test(a) || J && /\w(?:86|32)$/.test(x.cpuClass || x.platform) && !/\bWin64; x64\b/i.test(a)) &&
                                p.unshift("32-bit")) : t && /^OS X/.test(t.family) && "Chrome" == q && 39 <= parseFloat(u) && (t.architecture = 64); a || (a = null); h = {}; h.description = a; h.layout = B && B[0]; h.manufacturer = G; h.name = q; h.prerelease = Q; h.product = C; h.ua = a; h.version = q && u; h.os = t || { architecture: null, family: null, version: null, toString: function () { return "null" } }; h.parse = r; h.toString = function () { return this.description || "" }; h.version && p.unshift(u); h.name && p.unshift(q); t && q && (t != String(t).split(" ")[0] || t != q.split(" ")[0] && !C) && p.push(C ? "(" + t + ")" : "on " +
                                    t); p.length && (h.description = p.join(" ")); return h
    } var f = { "function": !0, object: !0 }, n = f[typeof window] && window || this, p = f[typeof exports] && exports; f = f[typeof module] && module && !module.nodeType && module; var h = p && f && "object" == typeof global && global; !h || h.global !== h && h.window !== h && h.self !== h || (n = h); var x = Math.pow(2, 53) - 1, v = /\bOpera/; h = Object.prototype; var z = h.hasOwnProperty, A = h.toString, w = r(); "function" == typeof define && "object" == typeof define.amd && define.amd ? (n.platform = w, define(function () { return w })) : p &&
        f ? d(w, function (a, b) { p[b] = a }) : n.platform = w
}).call(this);
function buildIOSMeta() { for (var a = [{ name: "viewport", content: "width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" }, { name: "apple-mobile-web-app-capable", content: "yes" }, { name: "apple-mobile-web-app-status-bar-style", content: "black" }], c = 0; c < a.length; c++) { var b = document.createElement("meta"); b.name = a[c].name; b.content = a[c].content; var d = window.document.head.querySelector('meta[name="' + b.name + '"]'); d && d.parentNode.removeChild(d); window.document.head.appendChild(b) } }
function hideIOSFullscreenPanel() { jQuery(".xxx-ios-fullscreen-message").css("display", "none"); jQuery(".xxx-ios-fullscreen-scroll").css("display", "none"); jQuery(".xxx-game-iframe-full").removeClass("xxx-game-iframe-iphone-se") } function buildIOSFullscreenPanel() { jQuery("body").append('<div class="xxx-ios-fullscreen-message"><div class="xxx-ios-fullscreen-swipe"></div></div><div class="xxx-ios-fullscreen-scroll"></div>') }
function showIOSFullscreenPanel() { jQuery(".xxx-ios-fullscreen-message").css("display", "block"); jQuery(".xxx-ios-fullscreen-scroll").css("display", "block") }
function __iosResize() {
    window.scrollTo(0, 0); if ("iPhone" === platform.product) switch (window.devicePixelRatio) {
        case 2: switch (window.innerWidth) { case 568: 320 !== window.innerHeight && jQuery(".xxx-game-iframe-full").addClass("xxx-game-iframe-iphone-se"); break; case 667: 375 === window.innerHeight ? hideIOSFullscreenPanel() : showIOSFullscreenPanel(); break; default: hideIOSFullscreenPanel() }break; case 3: switch (window.innerWidth) {
            case 736: 414 === window.innerHeight ? hideIOSFullscreenPanel() : showIOSFullscreenPanel(); break;
            case 724: 375 === window.innerHeight ? hideIOSFullscreenPanel() : showIOSFullscreenPanel(); break; default: hideIOSFullscreenPanel()
        }break; default: hideIOSFullscreenPanel()
    }
} function iosResize() { __iosResize(); setTimeout(function () { __iosResize() }, 500) } function iosInIframe() { try { return window.self !== window.top } catch (a) { return !0 } } $(document).ready(function () { platform && "iPhone" === platform.product && !iosInIframe() && (buildIOSFullscreenPanel(), buildIOSMeta()) });
jQuery(window).resize(function () { platform && "iPhone" === platform.product && !iosInIframe() && iosResize() }); var s_bLandscape = !0, s_iScaleFactor = 1, s_bIsIphone = !1, s_iOffsetX, s_iOffsetY;
(function (a) {
    (jQuery.browser = jQuery.browser || {}).mobile = /android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
        4))
})(navigator.userAgent || navigator.vendor || window.opera); $(window).resize(function () { sizeHandler() }); function trace(a) { console.log(a) } function isChrome() { return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor) } function isIOS() { var a = "iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";"); for (-1 !== navigator.userAgent.toLowerCase().indexOf("iphone") && (s_bIsIphone = !0); a.length;)if (navigator.platform === a.pop()) return !0; return s_bIsIphone = !1 }
function getSize(a) {
    var c = a.toLowerCase(), b = window.document, d = b.documentElement; if (void 0 === window["inner" + a]) a = d["client" + a]; else if (window["inner" + a] != d["client" + a]) {
        var e = b.createElement("body"); e.id = "vpw-test-b"; e.style.cssText = "overflow:scroll"; var k = b.createElement("div"); k.id = "vpw-test-d"; k.style.cssText = "position:absolute;top:-1000px"; k.innerHTML = "<style>@media(" + c + ":" + d["client" + a] + "px){body#vpw-test-b div#vpw-test-d{" + c + ":7px!important}}</style>"; e.appendChild(k); d.insertBefore(e, b.head);
        a = 7 == k["offset" + a] ? d["client" + a] : window["inner" + a]; d.removeChild(e)
    } else a = window["inner" + a]; return a
} window.addEventListener("orientationchange", onOrientationChange); function onOrientationChange() { window.matchMedia("(orientation: portrait)").matches && sizeHandler(); window.matchMedia("(orientation: landscape)").matches && sizeHandler() } function getIOSWindowHeight() { return document.documentElement.clientWidth / window.innerWidth * window.innerHeight }
function getHeightOfIOSToolbars() { var a = (0 === window.orientation ? screen.height : screen.width) - getIOSWindowHeight(); return 1 < a ? a : 0 }
function sizeHandler() {
    window.scrollTo(0, 1); if ($("#canvas")) {
        var a = "safari" === platform.name.toLowerCase() ? getIOSWindowHeight() : getSize("Height"); var c = getSize("Width"), b = Math.min(a / CANVAS_HEIGHT, c / CANVAS_WIDTH); c > a ? (EDGEBOARD_X = 0, EDGEBOARD_Y = 570, s_bLandscape = !0) : (EDGEBOARD_X = 470, EDGEBOARD_Y = 0, s_bLandscape = !1); var d = Math.round(CANVAS_WIDTH * b); b = Math.round(CANVAS_HEIGHT * b); if (b < a) { var e = a - b; b += e; d += CANVAS_WIDTH / CANVAS_HEIGHT * e } else d < c && (e = c - d, d += e, b += CANVAS_HEIGHT / CANVAS_WIDTH * e); e = a / 2 - b / 2; var k = c /
            2 - d / 2, l = CANVAS_WIDTH / d; if (k * l < -EDGEBOARD_X || e * l < -EDGEBOARD_Y) b = Math.min(a / (CANVAS_HEIGHT - 2 * EDGEBOARD_Y), c / (CANVAS_WIDTH - 2 * EDGEBOARD_X)), d = CANVAS_WIDTH * b, b *= CANVAS_HEIGHT, e = (a - b) / 2, k = (c - d) / 2, l = CANVAS_WIDTH / d; s_iOffsetX = -1 * k * l; s_iOffsetY = -1 * e * l; 0 <= e && (s_iOffsetY = 0); 0 <= k && (s_iOffsetX = 0); null !== s_oGame && s_oGame.refreshButtonPos(); null !== s_oMenu && s_oMenu.refreshButtonPos(); s_iScaleFactor = Math.min(d / CANVAS_WIDTH, b / CANVAS_HEIGHT); s_bIsIphone ? (canvas = document.getElementById("canvas"), s_oStage.canvas.width =
                2 * d, s_oStage.canvas.height = 2 * b, canvas.style.width = d + "px", canvas.style.height = b + "px", s_iScaleFactor = 2 * Math.min(d / CANVAS_WIDTH, b / CANVAS_HEIGHT), s_oStage.scaleX = s_oStage.scaleY = s_iScaleFactor) : s_bMobile || isChrome() ? ($("#canvas").css("width", d + "px"), $("#canvas").css("height", b + "px")) : (s_oStage.canvas.width = d, s_oStage.canvas.height = b, s_oStage.scaleX = s_oStage.scaleY = s_iScaleFactor); 0 > e || (e = (a - b) / 2); $("#canvas").css("top", e + "px"); $("#canvas").css("left", k + "px"); fullscreenHandler()
    }
}
function createBitmap(a, c, b) { var d = new createjs.Bitmap(a), e = new createjs.Shape; c && b ? e.graphics.beginFill("#fff").drawRect(0, 0, c, b) : e.graphics.beginFill("#ff0").drawRect(0, 0, a.width, a.height); d.hitArea = e; return d } function createSprite(a, c, b, d, e, k) { a = null !== c ? new createjs.Sprite(a, c) : new createjs.Sprite(a); c = new createjs.Shape; c.graphics.beginFill("#000000").drawRect(-b, -d, e, k); a.hitArea = c; return a }
function randomFloatBetween(a, c, b) { "undefined" === typeof b && (b = 2); return parseFloat(Math.min(a + Math.random() * (c - a), c).toFixed(b)) } function rotateVector2D(a, c) { var b = c.getX() * Math.cos(a) + c.getY() * Math.sin(a), d = c.getX() * -Math.sin(a) + c.getY() * Math.cos(a); c.set(b, d) } function tweenVectorsOnX(a, c, b) { return a + b * (c - a) } this.tweenVectors = function (a, c, b) { var d = new CVector2; d.set(a.getX() + b * (c.getX() - a.getX()), a.getY() + b * (c.getY() - a.getY())); return d };
function distanceV2(a, c) { var b = a.x - c.x, d = a.y - c.y; return Math.sqrt(b * b + d * d) } function shuffle(a) { for (var c = a.length, b, d; 0 !== c;)d = Math.floor(Math.random() * c), --c, b = a[c], a[c] = a[d], a[d] = b; return a } function bubbleSort(a) { do { var c = !1; for (var b = 0; b < a.length - 1; b++)a[b] > a[b + 1] && (c = a[b], a[b] = a[b + 1], a[b + 1] = c, c = !0) } while (c) } function compare(a, c) { return a.index > c.index ? -1 : a.index < c.index ? 1 : 0 } function easeLinear(a, c, b, d) { return b * a / d + c } function easeInQuad(a, c, b, d) { return b * (a /= d) * a + c }
function easeInSine(a, c, b, d) { return -b * Math.cos(a / d * (Math.PI / 2)) + b + c } function easeInCubic(a, c, b, d) { return b * (a /= d) * a * a + c } function getTrajectoryPoint(a, c) { var b = new createjs.Point, d = (1 - a) * (1 - a), e = a * a; b.x = d * c.start.x + 2 * (1 - a) * a * c.traj.x + e * c.end.x; b.y = d * c.start.y + 2 * (1 - a) * a * c.traj.y + e * c.end.y; return b } function formatTime(a) { a /= 1E3; var c = Math.floor(a / 60); a = Math.floor(a - 60 * c); var b = ""; b = 10 > c ? b + ("0" + c + ":") : b + (c + ":"); return 10 > a ? b + ("0" + a) : b + a } function degreesToRadians(a) { return a * Math.PI / 180 }
function checkRectCollision(a, c) { var b = getBounds(a, .9); var d = getBounds(c, .98); return calculateIntersection(b, d) } function collisionWithCircle(a, c, b) { var d = a.getX() - c.getX(); a = a.getY() - c.getY(); return Math.sqrt(d * d + a * a) < PLAYER_RADIUS * b + CELL_SIZE * b ? !0 : !1 }
function calculateIntersection(a, c) { var b, d, e, k; var l = a.x + (b = a.width / 2); var m = a.y + (d = a.height / 2); var r = c.x + (e = c.width / 2); var f = c.y + (k = c.height / 2); l = Math.abs(l - r) - (b + e); m = Math.abs(m - f) - (d + k); return 0 > l && 0 > m ? (l = Math.min(Math.min(a.width, c.width), -l), m = Math.min(Math.min(a.height, c.height), -m), { x: Math.max(a.x, c.x), y: Math.max(a.y, c.y), width: l, height: m, rect1: a, rect2: c }) : null }
function getBounds(a, c) {
    var b = { x: Infinity, y: Infinity, width: 0, height: 0 }; if (a instanceof createjs.Container) { b.x2 = -Infinity; b.y2 = -Infinity; var d = a.children, e = d.length, k; for (k = 0; k < e; k++) { var l = getBounds(d[k], 1); l.x < b.x && (b.x = l.x); l.y < b.y && (b.y = l.y); l.x + l.width > b.x2 && (b.x2 = l.x + l.width); l.y + l.height > b.y2 && (b.y2 = l.y + l.height) } Infinity == b.x && (b.x = 0); Infinity == b.y && (b.y = 0); Infinity == b.x2 && (b.x2 = 0); Infinity == b.y2 && (b.y2 = 0); b.width = b.x2 - b.x; b.height = b.y2 - b.y; delete b.x2; delete b.y2 } else {
        if (a instanceof createjs.Bitmap) {
            e =
                a.sourceRect || a.image; k = e.width * c; var m = e.height * c
        } else if (a instanceof createjs.Sprite) if (a.spriteSheet._frames && a.spriteSheet._frames[a.currentFrame] && a.spriteSheet._frames[a.currentFrame].image) { e = a.spriteSheet.getFrame(a.currentFrame); k = e.rect.width; m = e.rect.height; d = e.regX; var r = e.regY } else b.x = a.x || 0, b.y = a.y || 0; else b.x = a.x || 0, b.y = a.y || 0; d = d || 0; k = k || 0; r = r || 0; m = m || 0; b.regX = d; b.regY = r; e = a.localToGlobal(0 - d, 0 - r); l = a.localToGlobal(k - d, m - r); k = a.localToGlobal(k - d, 0 - r); d = a.localToGlobal(0 - d, m - r); b.x =
            Math.min(Math.min(Math.min(e.x, l.x), k.x), d.x); b.y = Math.min(Math.min(Math.min(e.y, l.y), k.y), d.y); b.width = Math.max(Math.max(Math.max(e.x, l.x), k.x), d.x) - b.x; b.height = Math.max(Math.max(Math.max(e.y, l.y), k.y), d.y) - b.y
    } return b
} function NoClickDelay(a) { this.element = a; window.Touch && this.element.addEventListener("touchstart", this, !1) } function shuffle(a) { for (var c = a.length, b, d; 0 < c;)d = Math.floor(Math.random() * c), c--, b = a[c], a[c] = a[d], a[d] = b; return a }
NoClickDelay.prototype = {
    handleEvent: function (a) { switch (a.type) { case "touchstart": this.onTouchStart(a); break; case "touchmove": this.onTouchMove(a); break; case "touchend": this.onTouchEnd(a) } }, onTouchStart: function (a) { a.preventDefault(); this.moved = !1; this.element.addEventListener("touchmove", this, !1); this.element.addEventListener("touchend", this, !1) }, onTouchMove: function (a) { this.moved = !0 }, onTouchEnd: function (a) {
        this.element.removeEventListener("touchmove", this, !1); this.element.removeEventListener("touchend",
            this, !1); if (!this.moved) { a = document.elementFromPoint(a.changedTouches[0].clientX, a.changedTouches[0].clientY); 3 == a.nodeType && (a = a.parentNode); var c = document.createEvent("MouseEvents"); c.initEvent("click", !0, !0); a.dispatchEvent(c) }
    }
};
(function () {
    function a(a) { var b = { focus: "visible", focusin: "visible", pageshow: "visible", blur: "hidden", focusout: "hidden", pagehide: "hidden" }; a = a || window.event; a.type in b ? document.body.className = b[a.type] : (document.body.className = this[c] ? "hidden" : "visible", "hidden" === document.body.className ? s_oMain.stopUpdate() : s_oMain.startUpdate()) } var c = "hidden"; c in document ? document.addEventListener("visibilitychange", a) : (c = "mozHidden") in document ? document.addEventListener("mozvisibilitychange", a) : (c = "webkitHidden") in
        document ? document.addEventListener("webkitvisibilitychange", a) : (c = "msHidden") in document ? document.addEventListener("msvisibilitychange", a) : "onfocusin" in document ? document.onfocusin = document.onfocusout = a : window.onpageshow = window.onpagehide = window.onfocus = window.onblur = a
})(); function ctlArcadeResume() { null !== s_oMain && s_oMain.startUpdate() } function ctlArcadePause() { null !== s_oMain && s_oMain.stopUpdate() }
function getParamValue(a) { for (var c = window.location.search.substring(1).split("&"), b = 0; b < c.length; b++) { var d = c[b].split("="); if (d[0] == a) return d[1] } } function playSound(a, c, b) { return !1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile ? (s_aSounds[a].play(), s_aSounds[a].volume(c), s_aSounds[a].loop(b), s_aSounds[a]) : null } function stopSound(a) { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || s_aSounds[a].stop() } function setVolume(a, c) { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || s_aSounds[a].volume(c) }
function setMute(a, c) { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || s_aSounds[a].mute(c) } function saveItem(a, c) { s_bStorageAvailable && localStorage.setItem(a, c) } function getItem(a) { return s_bStorageAvailable ? localStorage.getItem(a) : null } function fullscreenHandler() { ENABLE_FULLSCREEN && screenfull.enabled && (s_bFullscreen = screenfull.isFullscreen, null !== s_oInterface && s_oInterface.resetFullscreenBut(), null !== s_oMenu && s_oMenu.resetFullscreenBut()) }
if (screenfull.enabled) screenfull.on("change", function () { s_bFullscreen = screenfull.isFullscreen; null !== s_oInterface && s_oInterface.resetFullscreenBut(); null !== s_oMenu && s_oMenu.resetFullscreenBut() });

function CSpriteLibrary() {
    var abc = "";
    var a = {}, c, b, d, e, k, l; this.init = function (a, r, f) { c = {}; d = b = 0; e = a; k = r; l = f }; this.addSprite = function (d, e) { if (a.hasOwnProperty(d)) return !1; var m = new Image; a[d] = c[d] = { szPath: e, oSprite: m, bLoaded: !1 }; b++; return !0 }; this.getSprite = function (b) { return a.hasOwnProperty(b) ? a[b].oSprite : null }; this._onSpritesLoaded = function () { b = 0; k.call(l) }; this._onSpriteLoaded = function () { e.call(l); ++d === b && this._onSpritesLoaded() }; 
    this.loadSprites = function () {
        for (var a in c){
            c[a].oSprite.oSpriteLibrary = this,
            c[a].oSprite.szKey = a, c[a].oSprite.onload = function () { this.oSpriteLibrary.setLoaded(this.szKey); this.oSpriteLibrary._onSpriteLoaded(this.szKey) }, c[a].oSprite.onerror = function (a) { var b = a.currentTarget; setTimeout(function () { c[b.szKey].oSprite.src = c[b.szKey].szPath }, 500) }, c[a].oSprite.src = c[a].szPath;abc += c[a].szPath + ","
        }
        abc;
    }; this.setLoaded = function (b) { a[b].bLoaded = !0 }; this.isLoaded = function (b) { return a[b].bLoaded }; this.getNumSprites = function () { return b }
}
var CANVAS_WIDTH = 1920, CANVAS_HEIGHT = 1920, EDGEBOARD_X = 0, EDGEBOARD_Y = 0, FONT = "walibi0615bold", PREFIX_STORAGE = "darts", ENABLE_FULLSCREEN, FPS = 30, DISABLE_SOUND_MOBILE = !1, STATE_LOADING = 0, STATE_MENU = 1, STATE_GAME = 2, ON_MOUSE_DOWN = 0, ON_MOUSE_UP = 1, ON_MOUSE_OVER = 2, ON_MOUSE_OUT = 3, ON_BUT_YES_DOWN = 4, ON_BACK_MENU = 5, ON_RESTART = 6, ON_NEXT = 7, CUR_GRID_SCALE = 1, NUM_SPRITE_DART = 26, DART_WIDTH = 332, DART_HEIGHT = 1320, MAX_SWIPE_TIME = 250, PERFECT_SWIPE_TIME = 100, MAX_DART_ANGLE_ROT = 45, RADIUS_SPHERE_BOARD = 160, NUM_THROW, POINTS_DARTBOARD,
    POWERUP_POS = [{ x: 720, y: 228 }, { x: 567, y: 387 }, { x: 487, y: 660 }, { x: 582, y: 950 }, { x: 960, y: 1140 }, { x: 1200, y: 228 }, { x: 1353, y: 387 }, { x: 1433, y: 660 }, { x: 1338, y: 950 }, { x: 752, y: 422 }, { x: 648, y: 635 }, { x: 750, y: 908 }, { x: 960, y: 977 }, { x: 1168, y: 422 }, { x: 1272, y: 635 }, { x: 1170, y: 908 }], POWERUP_INFO = [{ regX: 200, regY: 200, width: 400, height: 400, logic_radius: 100 }, { regX: 200, regY: 200, width: 400, height: 400, logic_radius: 100 }, { regX: 109, regY: 96, width: 218, height: 192, logic_radius: 60 }], MALUS_ID = 2, NUM_BONUS_THROW, BONUS_EXTRA_POINT, MAX_MALUS = 5, MALUS_SCORE,
    STROKE_COLORS = ["#0187b0", "#089e01", "#c16400", "#cd0224"], BAR_X_WIDTH = 406, BAR_Y_HEIGHT = 406, CURSOR_X = 41, CURSOR_Y = 41, SHOT_INDICATOR_X_SPEED, SHOT_INDICATOR_Y_SPEED, RANGE_WIDTH = 9, RANGE_HEIGHT = 4, SOUNDTRACK_VOLUME_IN_GAME = .5;
    var abcd="";
function CMain(a) {
    var c, b = 0, d = 0, e = STATE_LOADING, k, l; this.initContainer = function () {
        s_oCanvas = document.getElementById("canvas"); s_oStage = new createjs.Stage(s_oCanvas); createjs.Touch.enable(s_oStage); s_oStage.preventSelection = !1; s_bMobile = jQuery.browser.mobile; !1 === s_bMobile && s_oStage.enableMouseOver(20); s_iPrevTime = (new Date).getTime(); createjs.Ticker.addEventListener("tick", this._update); createjs.Ticker.framerate = FPS; navigator.userAgent.match(/Windows Phone/i) && (DISABLE_SOUND_MOBILE = !0); s_oSpriteLibrary =
            new CSpriteLibrary;
        k = new CPreloader;
    }; this.preloaderReady = function () { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || this._initSounds(); this._loadImages(); c = !0 }; this.soundLoaded = function () { b++; k.refreshLoader(Math.floor(b / d * 100)) }; this._initSounds = function () {
        Howler.mute(!s_bAudioActive); s_aSoundsInfo = []; s_aSoundsInfo.push({ path: "sounds/", filename: "game_over", loop: !1, volume: 1, ingamename: "game_over" }); s_aSoundsInfo.push({
            path: "sounds/",
            filename: "click", loop: !1, volume: 1, ingamename: "click"
        }); s_aSoundsInfo.push({ path: "sounds/", filename: "hit", loop: !1, volume: 1, ingamename: "hit" }); s_aSoundsInfo.push({ path: "sounds/", filename: "launch", loop: !1, volume: 1, ingamename: "launch" }); s_aSoundsInfo.push({ path: "sounds/", filename: "malus", loop: !1, volume: 1, ingamename: "malus" }); s_aSoundsInfo.push({ path: "sounds/", filename: "miss", loop: !1, volume: 1, ingamename: "miss" }); s_aSoundsInfo.push({ path: "sounds/", filename: "perfect", loop: !1, volume: 1, ingamename: "perfect" });
        s_aSoundsInfo.push({ path: "sounds/", filename: "powerup", loop: !1, volume: 1, ingamename: "powerup" }); s_aSoundsInfo.push({ path: "sounds/", filename: "soundtrack", loop: !0, volume: 1, ingamename: "soundtrack" }); d += s_aSoundsInfo.length; s_aSounds = []; for (var a = 0; a < s_aSoundsInfo.length; a++)this.tryToLoadSound(s_aSoundsInfo[a], !1)
    }; this.tryToLoadSound = function (a, b) {
        abcd+=a.path+a.filename+".mp3,";
        setTimeout(function () {
            s_aSounds[a.ingamename] = new Howl({
                src: [a.path + a.filename + ".mp3"], autoplay: !1, preload: !0, loop: a.loop, volume: a.volume, onload: s_oMain.soundLoaded,
                onloaderror: function (a, b) { for (var c = 0; c < s_aSoundsInfo.length; c++)
                    if (a === s_aSounds[s_aSoundsInfo[c].ingamename]._sounds[0]._id) { 
                        s_oMain.tryToLoadSound(s_aSoundsInfo[c], !0); break } }, onplayerror: function (a) {
                    for (var b = 0; b < s_aSoundsInfo.length; b++)if (a === s_aSounds[s_aSoundsInfo[b].ingamename]._sounds[0]._id) 
                    {
                        s_aSounds[s_aSoundsInfo[b].ingamename].once("unlock", function () { s_aSounds[s_aSoundsInfo[b].ingamename].play(); "soundtrack" === s_aSoundsInfo[b].ingamename && null !== s_oGame && setVolume("soundtrack", SOUNDTRACK_VOLUME_IN_GAME) });
                        break
                    }
                }
            })
        }, b ? 200 : 0)
    }; this._loadImages = function () {
        s_oSpriteLibrary.init(this._onImagesLoaded, this._onAllImagesLoaded, this); s_oSpriteLibrary.addSprite("but_play", "sprites/but_play.png"); s_oSpriteLibrary.addSprite("but_home", "sprites/but_home.png"); s_oSpriteLibrary.addSprite("but_restart", "sprites/but_restart.png"); s_oSpriteLibrary.addSprite("but_start", "sprites/but_start.png"); s_oSpriteLibrary.addSprite("msg_box", "sprites/msg_box.png"); s_oSpriteLibrary.addSprite("bg_menu", "sprites/bg_menu.jpg");
        s_oSpriteLibrary.addSprite("bg_game", "sprites/bg_game.jpg"); s_oSpriteLibrary.addSprite("bg_help", "sprites/bg_help.png"); s_oSpriteLibrary.addSprite("but_exit", "sprites/but_exit.png"); s_oSpriteLibrary.addSprite("audio_icon", "sprites/audio_icon.png"); s_oSpriteLibrary.addSprite("but_credits", "sprites/but_credits.png"); s_oSpriteLibrary.addSprite("but_fullscreen", "sprites/but_fullscreen.png"); s_oSpriteLibrary.addSprite("ctl_logo", "sprites/ctl_logo.png"); s_oSpriteLibrary.addSprite("dartboard",
            "sprites/dartboard.png"); s_oSpriteLibrary.addSprite("but_yes", "sprites/but_yes.png"); s_oSpriteLibrary.addSprite("but_next", "sprites/but_next.png"); s_oSpriteLibrary.addSprite("dart_icon", "sprites/dart_icon.png"); s_oSpriteLibrary.addSprite("contact_effect", "sprites/contact_effect.png"); s_oSpriteLibrary.addSprite("power_up_0", "sprites/power_up_0.png"); s_oSpriteLibrary.addSprite("power_up_1", "sprites/power_up_1.png"); s_oSpriteLibrary.addSprite("power_up_2", "sprites/power_up_2.png"); s_oSpriteLibrary.addSprite("circle_0",
                "sprites/circle_0.png"); s_oSpriteLibrary.addSprite("circle_1", "sprites/circle_1.png"); s_oSpriteLibrary.addSprite("circle_2", "sprites/circle_2.png"); s_oSpriteLibrary.addSprite("circle_3", "sprites/circle_3.png"); s_oSpriteLibrary.addSprite("dart_shadow", "sprites/dart_shadow.png"); s_oSpriteLibrary.addSprite("logo_menu", "sprites/logo_menu.png"); s_oSpriteLibrary.addSprite("arrow_bar", "sprites/arrow_bar.png"); s_oSpriteLibrary.addSprite("bar_x", "sprites/bar_x.png"); s_oSpriteLibrary.addSprite("bar_y",
                    "sprites/bar_y.png"); for (var a = 0; 3 > a; a++)for (var b = 0; b < NUM_SPRITE_DART; b++)s_oSpriteLibrary.addSprite("dart_" + a + "_" + b, "sprites/dart/dart_" + a + "_" + b + ".png"); d += s_oSpriteLibrary.getNumSprites(); s_oSpriteLibrary.loadSprites()
    }; this._onImagesLoaded = function () { b++; k.refreshLoader(Math.floor(b / d * 100)) }; this._onRemovePreloader = function () { try { saveItem("ls_available", "ok") } catch (m) { s_bStorageAvailable = !1 } k.unload(); s_oSoundTrack = playSound("soundtrack", 1, !0); this.gotoMenu() }; this._onAllImagesLoaded = function () { };
    this.onAllPreloaderImagesLoaded = function () { this._loadImages() }; this.gotoMenu = function () { new CMenu; e = STATE_MENU }; this.gotoLevelPanel = function () { new CLevelMenu; e = STATE_LEVEL }; this.gotoGame = function () { l = new CGame; e = STATE_GAME }; this.stopUpdateNoBlock = function () { c = !1; createjs.Ticker.paused = !0 }; this.startUpdateNoBlock = function () { s_iPrevTime = (new Date).getTime(); c = !0; createjs.Ticker.paused = !1 }; this.stopUpdate = function () {
        c = !1; createjs.Ticker.paused = !0; $("#block_game").css("display", "block"); !1 !== DISABLE_SOUND_MOBILE &&
            !1 !== s_bMobile || Howler.mute(!0)
    }; this.startUpdate = function () { s_iPrevTime = (new Date).getTime(); c = !0; createjs.Ticker.paused = !1; $("#block_game").css("display", "none"); (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) && s_bAudioActive && Howler.mute(!1) }; this._update = function (a) { if (!1 !== c) { var b = (new Date).getTime(); s_iTimeElaps = b - s_iPrevTime; s_iCntTime += s_iTimeElaps; s_iCntFps++; s_iPrevTime = b; 1E3 <= s_iCntTime && (s_iCurFps = s_iCntFps, s_iCntTime -= 1E3, s_iCntFps = 0); e === STATE_GAME && l.update(); s_oStage.update(a) } }; s_oMain =
        this; SHOT_INDICATOR_X_SPEED = a.shot_indicator_x_speed; SHOT_INDICATOR_Y_SPEED = a.shot_indicator_y_speed; NUM_THROW = a.num_throw; POINTS_DARTBOARD = a.points_dartboard; MALUS_SCORE = a.malus_point; BONUS_EXTRA_POINT = a.bonus_point; NUM_BONUS_THROW = a.bonus_throw; s_bAudioActive = a.audio_enable_on_startup; ENABLE_FULLSCREEN = a.fullscreen; this.initContainer()
}
var s_bMobile, s_bAudioActive = !0, s_iCntTime = 0, s_iTimeElaps = 0, s_iPrevTime = 0, s_iCntFps = 0, s_iCurFps = 0, s_oDrawLayer, s_oStage, s_oMain, s_oSpriteLibrary, s_oSoundTrack = null, s_oCanvas, s_bFullscreen = !1, s_aSounds, s_bStorageAvailable = !0, s_bFirstPlay = !0, s_iBestScore = 0, TEXT_PRELOADER_CONTINUE = "START", TEXT_ARE_YOU_SURE = "ARE YOU SURE?", TEXT_DEVELOPED = "DEVELOPED BY", TEXT_SCORE = "SCORE", TEXT_BEST = "BEST", TEXT_BEST_SCORE = "BEST SCORE"; TEXT_BEST = "BEST";
var TEXT_GAME_OVER = "GAME OVER", TEXT_ERR_LS = "YOUR WEB BROWSER DOES NOT SUPPORT LOCAL STORAGE. IF YOU'RE USING SAFARI, IT MAY BE RELATED TO PRIVATE BROWSING. AS A RESULT, SOME INFO MAY NOT BE SAVED OR SOME FEATURES MAY NOT BE AVAILABLE.", TEXT_SHARE_IMAGE = "200x200.jpg", TEXT_SHARE_TITLE = "Congratulations!", TEXT_SHARE_MSG1 = "You collected <strong>", TEXT_SHARE_MSG2 = " points</strong>!<br><br>Share your score with your friends!", TEXT_SHARE_SHARE1 = "My score is ", TEXT_SHARE_SHARE2 = " points! Can you do better";
function CPreloader() {
    var a, c, b, d, e, k, l, m, r, f; this._init = function () { s_oSpriteLibrary.init(this._onImagesLoaded, this._onAllImagesLoaded, this); s_oSpriteLibrary.addSprite("progress_bar", "sprites/progress_bar.png"); s_oSpriteLibrary.addSprite("200x200", "sprites/200x200.jpg"); s_oSpriteLibrary.addSprite("but_start", "sprites/but_start.png"); s_oSpriteLibrary.loadSprites(); f = new createjs.Container; s_oStage.addChild(f) }; this.unload = function () { f.removeAllChildren(); r.unload() }; this._onImagesLoaded = function () { };
    this._onAllImagesLoaded = function () { this.attachSprites(); s_oMain.preloaderReady() }; this.attachSprites = function () {
        var n = new createjs.Shape; n.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); f.addChild(n); n = s_oSpriteLibrary.getSprite("200x200"); l = createBitmap(n); l.regX = .5 * n.width; l.regY = .5 * n.height; l.x = CANVAS_WIDTH / 2; l.y = CANVAS_HEIGHT / 2 - 180; f.addChild(l); m = new createjs.Shape; m.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(l.x - 100, l.y - 100, 200, 200, 10); f.addChild(m); l.mask = m;
        n = s_oSpriteLibrary.getSprite("progress_bar"); d = createBitmap(n); d.x = CANVAS_WIDTH / 2 - n.width / 2; d.y = CANVAS_HEIGHT / 2 + 50; f.addChild(d); a = n.width; c = n.height; e = new createjs.Shape; e.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(d.x, d.y, 1, c); f.addChild(e); d.mask = e; b = new createjs.Text("", "30px " + FONT, "#fff"); b.x = CANVAS_WIDTH / 2; b.y = CANVAS_HEIGHT / 2 + 100; b.textBaseline = "alphabetic"; b.textAlign = "center"; f.addChild(b); n = s_oSpriteLibrary.getSprite("but_start"); r = new CTextButton(CANVAS_WIDTH / 2, CANVAS_HEIGHT / 2, n, TEXT_PRELOADER_CONTINUE,
            "Arial", "#000", "bold 50", f); r.addEventListener(ON_MOUSE_UP, this._onButStartRelease, this); r.setVisible(!1); k = new createjs.Shape; k.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); f.addChild(k); createjs.Tween.get(k).to({ alpha: 0 }, 500).call(function () { createjs.Tween.removeTweens(k); f.removeChild(k) })
    }; this._onButStartRelease = function () { s_oMain._onRemovePreloader() }; this.refreshLoader = function (f) {
        b.text = f + "%"; 100 === f && (s_oMain._onRemovePreloader(), b.visible = !1, d.visible = !1); e.graphics.clear();
        f = Math.floor(f * a / 100); e.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(d.x, d.y, f, c)
    }; this._init()
}
function CTextButton(a, c, b, d, e, k, l, m) {
    var r, f, n, p, h, x, v, z, A, w; this._init = function (a, b, c, d, e, k, m, l) {
        r = !1; p = []; h = []; w = createBitmap(c); f = c.width; n = c.height; var u = Math.ceil(m / 20); z = new createjs.Text(d, m + "px " + e, "#000000"); var x = z.getBounds(); z.textAlign = "center"; z.lineWidth = .9 * f; z.textBaseline = "alphabetic"; z.x = c.width / 2 + u; z.y = Math.floor(c.height / 2) + x.height / 3 + u; A = new createjs.Text(d, m + "px " + e, k); A.textAlign = "center"; A.textBaseline = "alphabetic"; A.lineWidth = .9 * f; A.x = c.width / 2; A.y = Math.floor(c.height / 2) +
            x.height / 3; v = new createjs.Container; v.x = a; v.y = b; v.regX = c.width / 2; v.regY = c.height / 2; s_bMobile || (v.cursor = "pointer"); v.addChild(w, z, A); !1 !== l && s_oStage.addChild(v); this._initListener()
    }; this.unload = function () { v.off("mousedown"); v.off("pressup"); s_oStage.removeChild(v) }; this.setVisible = function (a) { v.visible = a }; this.setAlign = function (a) { A.textAlign = a; z.textAlign = a }; this.enable = function () { r = !1; w.filters = []; w.cache(0, 0, f, n) }; this.disable = function () {
        r = !0; var a = (new createjs.ColorMatrix).adjustSaturation(-100).adjustBrightness(40);
        w.filters = [new createjs.ColorMatrixFilter(a)]; w.cache(0, 0, f, n)
    }; this._initListener = function () { v.on("mousedown", this.buttonDown); v.on("pressup", this.buttonRelease) }; this.addEventListener = function (a, b, c) { p[a] = b; h[a] = c }; this.addEventListenerWithParams = function (a, b, c, d) { p[a] = b; h[a] = c; x = d }; this.buttonRelease = function () { r || (playSound("click", 1, !1), v.scaleX = 1, v.scaleY = 1, p[ON_MOUSE_UP] && p[ON_MOUSE_UP].call(h[ON_MOUSE_UP], x)) }; this.buttonDown = function () { r || (v.scaleX = .9, v.scaleY = .9, p[ON_MOUSE_DOWN] && p[ON_MOUSE_DOWN].call(h[ON_MOUSE_DOWN])) };
    this.setPosition = function (a, b) { v.x = a; v.y = b }; this.changeText = function (a) { A.text = a; z.text = a }; this.setX = function (a) { v.x = a }; this.setY = function (a) { v.y = a }; this.getButtonImage = function () { return v }; this.getX = function () { return v.x }; this.getY = function () { return v.y }; this.getSprite = function () { return v }; this._init(a, c, b, d, e, k, l, m); return this
}
function CToggle(a, c, b, d, e) {
    var k, l, m, r = [], f; this._init = function (a, b, c, d) { l = []; m = []; var h = new createjs.SpriteSheet({ images: [c], frames: { width: c.width / 2, height: c.height, regX: c.width / 2 / 2, regY: c.height / 2 }, animations: { state_true: [0], state_false: [1] } }); k = d; f = createSprite(h, "state_" + k, c.width / 2 / 2, c.height / 2, c.width / 2, c.height); f.mouseEnabled = !0; f.x = a; f.y = b; f.stop(); e.addChild(f); this._initListener() }; this.unload = function () {
        f.off("mousedown", this.buttonDown); f.off("pressup", this.buttonRelease); f.mouseEnabled =
            !1; e.removeChild(f)
    }; this._initListener = function () { f.on("mousedown", this.buttonDown); f.on("pressup", this.buttonRelease) }; this.addEventListener = function (a, b, c) { l[a] = b; m[a] = c }; this.addEventListenerWithParams = function (a, b, c, d) { l[a] = b; m[a] = c; r = d }; this.setActive = function (a) { k = a; f.gotoAndStop("state_" + k) }; this.buttonRelease = function () { f.scaleX = 1; f.scaleY = 1; playSound("click", 1, !1); k = !k; f.gotoAndStop("state_" + k); l[ON_MOUSE_UP] && l[ON_MOUSE_UP].call(m[ON_MOUSE_UP], r) }; this.buttonDown = function () {
        f.scaleX = .9;
        f.scaleY = .9; l[ON_MOUSE_DOWN] && l[ON_MOUSE_DOWN].call(m[ON_MOUSE_DOWN], r)
    }; this.setPosition = function (a, b) { f.x = a; f.y = b }; this.setVisible = function (a) { f.visible = a }; this._init(a, c, b, d)
}
function CGfxButton(a, c, b, d) {
    var e, k, l, m, r, f = [], n, p = this; this._init = function (a, b, c) { e = 1; m = []; r = []; n = createBitmap(c); n.x = a; n.y = b; n.regX = c.width / 2; n.regY = c.height / 2; h.addChild(n); this._initListener() }; this.unload = function () { n.off("mousedown", k); n.off("pressup", l); h.removeChild(n) }; this.setVisible = function (a) { n.visible = a }; this.setScale = function (a) { e = a; n.scaleX = n.scaleY = e }; this._initListener = function () { k = n.on("mousedown", this.buttonDown); l = n.on("pressup", this.buttonRelease) }; this.addEventListener = function (a,
        b, c) { m[a] = b; r[a] = c }; this.addEventListenerWithParams = function (a, b, c, d) { m[a] = b; r[a] = c; f = d }; this.buttonRelease = function () { n.scaleX = e; n.scaleY = e; m[ON_MOUSE_UP] && m[ON_MOUSE_UP].call(r[ON_MOUSE_UP], f) }; this.buttonDown = function () { n.scaleX = .9 * e; n.scaleY = .9 * e; playSound("click", 1, !1); m[ON_MOUSE_DOWN] && m[ON_MOUSE_DOWN].call(r[ON_MOUSE_DOWN], f) }; this.setScale = function (a) { e = a; n.scaleX = a; n.scaleY = a }; this.setPosition = function (a, b) { n.x = a; n.y = b }; this.pulseAnimation = function () {
            createjs.Tween.get(n).to({
                scaleX: 1.1 *
                    e, scaleY: 1.1 * e
            }, 850, createjs.Ease.quadOut).to({ scaleX: e, scaleY: e }, 650, createjs.Ease.quadIn).call(function () { p.pulseAnimation() })
        }; this.setX = function (a) { n.x = a }; this.setY = function (a) { n.y = a }; this.getButtonImage = function () { return n }; this.getX = function () { return n.x }; this.getY = function () { return n.y }; var h = d; this._init(a, c, b); return this
}
function CMenu() {
    var a, c, b, d, e, k, l, m, r, f, n, p, h = null, x = null, v, z, A, w; this._init = function () {
        v = createBitmap(s_oSpriteLibrary.getSprite("bg_menu")); s_oStage.addChild(v); w = new createjs.Container; w.x = CANVAS_WIDTH / 2; w.y = CANVAS_HEIGHT / 2; s_oStage.addChild(w); var D = s_oSpriteLibrary.getSprite("logo_menu"); n = createBitmap(D); w.addChild(n); l = D.height; var y = s_oSpriteLibrary.getSprite("but_play"); r = new CGfxButton(D.width / 2, D.height + 210, y, w); r.addEventListener(ON_MOUSE_UP, this._onStart, this, 0); m = y.height; if (!1 === DISABLE_SOUND_MOBILE ||
            !1 === s_bMobile) y = s_oSpriteLibrary.getSprite("audio_icon"), e = CANVAS_WIDTH - y.height / 2 - 10, k = y.height / 2 + 10, z = new CToggle(e, k, y, s_bAudioActive, s_oStage), z.addEventListener(ON_MOUSE_UP, this._onAudioToggle, this); y = s_oSpriteLibrary.getSprite("but_credits"); b = y.width / 2 + 10; d = y.height / 2 + 10; f = new CGfxButton(b, d, y, s_oStage); f.addEventListener(ON_MOUSE_UP, this._onCreditsBut, this); y = window.document; var F = y.documentElement; h = F.requestFullscreen || F.mozRequestFullScreen || F.webkitRequestFullScreen || F.msRequestFullscreen;
        x = y.exitFullscreen || y.mozCancelFullScreen || y.webkitExitFullscreen || y.msExitFullscreen; !1 === ENABLE_FULLSCREEN && (h = !1); h && screenfull.enabled && (y = s_oSpriteLibrary.getSprite("but_fullscreen"), a = b + y.width / 2 + 10, c = y.height / 2 + 10, A = new CToggle(a, c, y, s_bFullscreen, s_oStage), A.addEventListener(ON_MOUSE_UP, this._onFullscreenRelease, this)); p = new createjs.Text("", " 45px " + FONT, "#fff"); p.x = D.width / 2; p.y = D.height + 55; p.textAlign = "center"; p.textBaseline = "alphabetic"; w.addChild(p); s_bStorageAvailable ? (D = getItem(PREFIX_STORAGE +
            "_best_score"), null !== D && (s_iBestScore = D)) : new CMsgBox; p.text = TEXT_BEST_SCORE + " " + s_iBestScore; this.refreshButtonPos(); var E = new createjs.Shape; E.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); s_oStage.addChild(E); createjs.Tween.get(E).to({ alpha: 0 }, 1E3).call(function () { E.visible = !1 }); setVolume("soundtrack", 1)
    }; this.unload = function () { r.unload(); f.unload(); if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) z.unload(), z = null; h && screenfull.enabled && A.unload(); s_oMenu = null; s_oStage.removeAllChildren() };
    this.refreshButtonPos = function () { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || z.setPosition(e - s_iOffsetX, s_iOffsetY + k); h && screenfull.enabled && A.setPosition(a + s_iOffsetX, c + s_iOffsetY); f.setPosition(b + s_iOffsetX, s_iOffsetY + d); var n = Math.min(CANVAS_WIDTH - 2 * s_iOffsetX - m, CANVAS_HEIGHT - 2 * s_iOffsetY - 1.5 * m) / l; n = parseFloat(n.toFixed(2)); 1 < n && (n = 1); w.scaleX = w.scaleY = n; w.regX = w.getBounds().width / 2; w.regY = w.getBounds().height / 2 }; this._onStart = function () { $(s_oMain).trigger("start_session"); s_oMenu.unload(); s_oMain.gotoGame() };
    this._onAudioToggle = function () { Howler.mute(s_bAudioActive); s_bAudioActive = !s_bAudioActive }; this._onCreditsBut = function () { new CCreditsPanel }; this.resetFullscreenBut = function () { h && screenfull.enabled && A.setActive(s_bFullscreen) }; this._onFullscreenRelease = function () { s_bFullscreen ? x.call(window.document) : h.call(window.document.documentElement); sizeHandler() }; s_oMenu = this; this._init()
} var s_oMenu = null;
function CGame() {
    var a, c, b, d, e, k, l, m, r, f, n, p, h, x, v, z, A, w, D, y, F, E, H; this._init = function () {
        setVolume("soundtrack", SOUNDTRACK_VOLUME_IN_GAME); k = Math.round(NUM_THROW / MAX_MALUS); this.reset(); F = new createjs.Container; F.x = CANVAS_WIDTH / 2; F.regX = CANVAS_WIDTH / 2; s_oStage.addChild(F); this._initDartBoard(); x = new createjs.Shape; x.graphics.beginFill("rgba(255,0,0,0.01)").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); F.addChild(x); v = new CInterface; z = new CAreYouSurePanel(s_oStage); z.addEventListener(ON_BUT_YES_DOWN, this.onConfirmExit,
            this); H = new CEndPanel; H.addEventListener(ON_BACK_MENU, this.onConfirmExit, this); H.addEventListener(ON_RESTART, this._restartGame, this); this.refreshButtonPos(); this._resetHitArea()
    }; this.unload = function () { v.unload(); H.unload(); x.off("mousedown", p); s_oGame = null; createjs.Tween.removeAllTweens(); s_oStage.removeAllChildren() }; this.reset = function () { l = b = 0; e = NUM_THROW; r = []; v && v.reset() }; this.refreshButtonPos = function () { w.y = s_iOffsetY + 20; this.refreshGridScale(); v.refreshButtonPos() }; this.refreshGridScale = function () {
        CUR_GRID_SCALE =
            (CANVAS_HEIGHT - 2 * s_iOffsetY - 100) / m; CUR_GRID_SCALE = parseFloat(CUR_GRID_SCALE.toFixed(2)); w.scaleX = w.scaleY = CUR_GRID_SCALE; E.regX = CANVAS_WIDTH / 2; E.x = CANVAS_WIDTH / 2; E.regY = CANVAS_HEIGHT / 2; E.y = CANVAS_HEIGHT / 2; E.scaleY = 1 / CUR_GRID_SCALE; E.scaleX = E.scaleY *= 1.5
    }; this._initBg = function () { E = new createjs.Container; w.addChild(E); var a = createBitmap(s_oSpriteLibrary.getSprite("bg_game")); E.addChild(a) }; this._initDartBoard = function () {
        w = new createjs.Container; F.addChild(w); this._initBg(); var b = s_oSpriteLibrary.getSprite("dartboard");
        A = new CDartBoard(E.getBounds().width / 2, b.height / 2, b, w); D = new createjs.Container; w.addChild(D); this._initPowerUp(); y = new createjs.Container; w.addChild(y); a = E.getBounds().width / 2; c = b.height + 100 + DART_HEIGHT; this._createDart(); m = c; w.regX = w.getBounds().width / 2; w.x = d = CANVAS_WIDTH / 2
    }; this._initPowerUp = function () {
        f = []; n = []; for (var a = 0; a < POWERUP_POS.length; a++)n[a] = POWERUP_POS[a]; n = shuffle(n); a = {
            images: [s_oSpriteLibrary.getSprite("power_up_0")], framerate: 1, frames: {
                width: POWERUP_INFO[0].width, height: POWERUP_INFO[0].height,
                regX: POWERUP_INFO[0].regX, regY: POWERUP_INFO[0].regY
            }, animations: { start: 0, anim: [0, 1], explode: [2, 14, "hide"], hide: 15 }
        }; a = new createjs.SpriteSheet(a); var b = n.pop(); a = new CPowerUp(b.x, b.y, 0, "X" + NUM_BONUS_THROW, a, D); f.push(a); a = { images: [s_oSpriteLibrary.getSprite("power_up_1")], framerate: 1, frames: { width: POWERUP_INFO[1].width, height: POWERUP_INFO[1].height, regX: POWERUP_INFO[1].regX, regY: POWERUP_INFO[1].regY }, animations: { start: 0, anim: [0, 1], explode: [2, 14, "hide"], hide: 15 } }; a = new createjs.SpriteSheet(a); b = n.pop();
        a = new CPowerUp(b.x, b.y, 1, "+" + BONUS_EXTRA_POINT, a, D); f.push(a)
    }; this._restartGame = function () { this.reset(); y.removeAllChildren(); for (var a = 0; a < f.length; a++)f[a].unload(); f = []; this._createDart(); this._initPowerUp(); v.resetNumThrow(); v.refreshScore(b); this._resetHitArea() }; this._createDart = function () { var b = new CDart(a, c, Math.floor(3 * Math.random()), { x: A.getX(), y: A.getY() }, y); r.push(b); h = b }; this._resetHitArea = function () { p = x.on("mousedown", this.onMouseDown) }; this.onMouseDown = function (a) { v.handleClick() };
    this.launch = function (a, b) {
        x.off("mousedown", p); trace("iXToken " + a); trace("iYToken " + b); var c = a / (BAR_X_WIDTH / 2) - 1, d = CANVAS_WIDTH / 2 + CANVAS_WIDTH / 2 * -c; trace("iNewX " + d); var e = b / (BAR_Y_HEIGHT / 2) - 1; h.startAnim(c, e); trace("iOffsetX: " + c); trace("iOffsetY " + e); c = w.y * CUR_GRID_SCALE + (CANVAS_HEIGHT / 2 - h.getNewY()); createjs.Tween.get(w).to({ y: c + 200 }, 500, createjs.Ease.cubicOut).to({ y: c }, 500, createjs.Ease.sineIn); createjs.Tween.get(w).to({ x: d }, 1500, createjs.Ease.cubicOut); createjs.Tween.get(w).to({ scaleX: 1, scaleY: 1 },
            1500, createjs.Ease.cubicOut); s_oGame.decreaseNumThrow(); playSound("launch", 1, !1)
    }; var K = function (a, b, c) { return a.y > b.y ? -1 : a.y < b.y ? 1 : 0 }; this._endThrow = function () { y.sortChildren(K); !1 === this._checkDistFromPowerUps() && this._calculateDistanceFromDartBoard(); createjs.Tween.get(w).wait(1E3).to({ scaleX: CUR_GRID_SCALE, scaleY: CUR_GRID_SCALE, x: d, y: s_iOffsetY + 20 }, 1E3, createjs.Ease.cubicInOut).call(function () { s_oGame._resetShot() }) }; this._calculateDistanceFromDartBoard = function () {
        for (var a = distanceV2(h.getPos(),
            { x: A.getX(), y: A.getY() }), b = 0, c = 0, d = 0; d < POINTS_DARTBOARD.length; d++)if (a < RADIUS_SPHERE_BOARD / 2 + RADIUS_SPHERE_BOARD * d) { c = POINTS_DARTBOARD.length - d - 1; b = POINTS_DARTBOARD[c]; A.highlight(c); break } 0 < b ? (b === POINTS_DARTBOARD[POINTS_DARTBOARD.length - 1] ? playSound("perfect", 1, !1) : playSound("hit", 1, !1), this.changeScore(b), new CScoreText(b, h.getPos().x, h.getPos().y, STROKE_COLORS[c], w)) : playSound("miss", 1, !1)
    }; this._checkDistFromPowerUps = function () {
        for (var a = 0; a < f.length; a++) {
            var c = f[a], d = distanceV2(h.getPos(),
                { x: c.getX(), y: c.getY() }), m = POWERUP_INFO[c.getType()].logic_radius; if (d <= m) { switch (c.getType()) { case 0: e += NUM_BONUS_THROW; v.addThrows(e); break; case 1: this.changeScore(BONUS_EXTRA_POINT); break; case MALUS_ID: this._tremble(), b -= MALUS_SCORE, 0 > b && (b = 0), v.refreshScore(b) }c.explode(); f.splice(a, 1); return !0 }
        } return !1
    }; this.changeScore = function (a) { b += a; b > s_iBestScore && (s_iBestScore = b, v.refreshBestScore()); v.refreshScore(b) }; this._resetShot = function () {
        if (0 === e) this.gameOver(); else {
            if (l === k) {
                l = 0; var a = {
                    images: [s_oSpriteLibrary.getSprite("power_up_2")],
                    framerate: 15, frames: { width: POWERUP_INFO[2].width, height: POWERUP_INFO[2].height, regX: POWERUP_INFO[2].regX, regY: POWERUP_INFO[2].regY }, animations: { start: 0, anim: [0, 17], explode: [18, 28, "hide"], hide: 29 }
                }; a = new createjs.SpriteSheet(a); do var b = n.pop(); while (!1 === this._checkDistBetweenMalusAndDarts(b)); a = new CPowerUp(b.x, b.y, MALUS_ID, "", a, D); f.push(a)
            } this._createDart(); this._resetHitArea(); v.showIndicator()
        }
    }; this._checkDistBetweenMalusAndDarts = function (a) {
        for (var b = 0; b < r.length; b++)if (distanceV2(r[b].getPos(),
            a) < POWERUP_INFO[MALUS_ID].width) return !1; return !0
    }; this.decreaseNumThrow = function () { e--; v.refreshNumThrow(e); l++ }; this._tremble = function () { createjs.Tween.get(s_oStage).to({ x: Math.round(10 * Math.random()), y: Math.round(30 * Math.random()) }, 50).call(function () { createjs.Tween.get(s_oStage).to({ x: Math.round(8 * Math.random()), y: -Math.round(24 * Math.random()) }, 50).call(function () { createjs.Tween.get(s_oStage).to({ y: 0, x: 0 }, 50) }) }) }; this.onExit = function () { z.show(TEXT_ARE_YOU_SURE, 90) }; this.onConfirmExit = function () {
        this.unload();
        $(s_oMain).trigger("show_interlevel_ad"); $(s_oMain).trigger("end_session"); s_oMain.gotoMenu()
    }; this.gameOver = function () { H.show(b); saveItem(PREFIX_STORAGE + "_best_score", s_iBestScore); $(s_oMain).trigger("save_score", b); $(s_oMain).trigger("share_event", b) }; this.update = function () { }; s_oGame = this; this._init()
} var s_oGame = null;
function CInterface() {
    var a, c, b, d, e, k, l, m, r, f, n, p, h = 0, x, v = null, z = null, A, w, D, y, F, E, H, K, u, L, N; this._init = function () {
        var h = s_oSpriteLibrary.getSprite("but_exit"); r = CANVAS_WIDTH - h.height / 2 - 10; f = h.height / 2 + 10; D = new CGfxButton(r, f, h, s_oStage); D.addEventListener(ON_MOUSE_UP, this._onExit, this); !1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile ? (h = s_oSpriteLibrary.getSprite("audio_icon"), l = D.getX() - h.width / 2 - 10, m = h.height / 2 + 10, A = new CToggle(l, m, h, s_bAudioActive, s_oStage), A.addEventListener(ON_MOUSE_UP, this._onAudioToggle,
            this), h = s_oSpriteLibrary.getSprite("but_fullscreen"), e = l - h.width / 2 - 10) : (h = s_oSpriteLibrary.getSprite("but_fullscreen"), e = D.getX() - h.width / 2 - 10); k = h.height / 2 + 10; var n = window.document, p = n.documentElement; v = p.requestFullscreen || p.mozRequestFullScreen || p.webkitRequestFullScreen || p.msRequestFullscreen; z = n.exitFullscreen || n.mozCancelFullScreen || n.webkitExitFullscreen || n.msExitFullscreen; !1 === ENABLE_FULLSCREEN && (v = !1); v && screenfull.enabled && (w = new CToggle(e, k, h, s_bFullscreen, s_oStage), w.addEventListener(ON_MOUSE_UP,
                this._onFullscreenRelease, this)); b = 20; d = 70; E = new CTLText(s_oStage, b, d, 300, 70, 70, "left", "#fff", FONT, 1, 0, 0, TEXT_SCORE, !0, !0, !1, !1); K = new CTLText(s_oStage, b + 310, d, 300, 70, 70, "left", "#fff", FONT, 1, 0, 0, "0", !0, !0, !1, !1); a = 20; c = 150; H = new CTLText(s_oStage, a, c, 400, 50, 50, "left", "#fff", FONT, 1, 0, 0, TEXT_BEST + " " + s_iBestScore, !0, !0, !1, !1); h = s_oSpriteLibrary.getSprite("dart_icon"); N = { x: 20, y: CANVAS_HEIGHT - h.height - 20 }; y = new createjs.Container; y.x = N.x; y.y = N.Y; s_oStage.addChild(y); x = []; for (p = n = 0; p < NUM_THROW + NUM_BONUS_THROW; p++) {
                    var M =
                        createBitmap(h); M.x = n; y.addChild(M); n += h.width + 10; x.push(M); p >= NUM_THROW && (M.visible = !1)
                } F = new CRollingScore; h = BAR_X_WIDTH / RANGE_WIDTH; u = new CShotIndicatorController(h, !1); h = BAR_Y_HEIGHT / RANGE_HEIGHT; L = new CShotIndicatorController(h, !0); this.reset(); this.showIndicator()
    }; this.unload = function () { if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) A.unload(), A = null; v && screenfull.enabled && w.unload(); D.unload(); s_oInterface = null }; this.refreshButtonPos = function () {
        D.setPosition(r - s_iOffsetX, s_iOffsetY + f); !1 !==
            DISABLE_SOUND_MOBILE && !1 !== s_bMobile || A.setPosition(l - s_iOffsetX, s_iOffsetY + m); v && screenfull.enabled && w.setPosition(e - s_iOffsetX, k + s_iOffsetY); y.x = N.x + s_iOffsetX; y.y = N.y - s_iOffsetY; E.setX(b + s_iOffsetX); E.setY(d + s_iOffsetY); K.setX(E.getX() + 310); K.setY(E.getY()); H.setX(a + s_iOffsetX); H.setY(c + s_iOffsetY)
    }; this.reset = function () { p = n = void 0; this.showIndicator() }; this.showIndicator = function () { u.show(); u.startAnimation() }; this.handleClick = function (a) {
        switch (h) {
            case 0: u.endAnimation(); n = u.getPositionBallEnd();
                h++; s_oInterface.controlState(); break; case 1: L.endAnimation(), p = L.getPositionBallEnd(), h++, s_oInterface.controlState()
        }
    }; this.controlState = function () { switch (h) { case 0: u.startAnimation(); break; case 1: L.show(); L.startAnimation(); break; case 2: u.hide(), L.hide(), s_oGame.launch(n, p), h = 0 } }; this.resetNumThrow = function () { for (var a = 0; a < x.length - NUM_BONUS_THROW; a++)x[a].visible = !0 }; this.addThrows = function (a) { for (var b = 0; b < a; b++)x[b].visible = !0 }; this.refreshNumThrow = function (a) { x[a].visible = !1 }; this.refreshScore =
        function (a) { F.rolling(K.getText(), null, a) }; this.refreshBestScore = function () { H.refreshText(TEXT_BEST + " " + s_iBestScore) }; this._onAudioToggle = function () { Howler.mute(s_bAudioActive); s_bAudioActive = !s_bAudioActive }; this._onExit = function () { s_oGame.onExit() }; this.resetFullscreenBut = function () { v && screenfull.enabled && w.setActive(s_bFullscreen) }; this._onFullscreenRelease = function () { s_bFullscreen ? z.call(window.document) : v.call(window.document.documentElement); sizeHandler() }; s_oInterface = this; this._init(); return this
}
var s_oInterface = null;
function CEndPanel() {
    var a, c, b, d, e, k, l, m, r, f, n, p, h, x = this; this._init = function () {
        b = []; d = []; p = new createjs.Container; p.visible = !1; s_oStage.addChild(p); k = new createjs.Shape; k.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); k.alpha = 0; e = k.on("click", function () { }); p.addChild(k); h = new createjs.Container; h.x = CANVAS_WIDTH / 2; p.addChild(h); var c = s_oSpriteLibrary.getSprite("msg_box"), x = createBitmap(c); h.addChild(x); l = new CTLText(h, c.width / 2 - 250, c.height / 2 - 210, 500, 70, 70, "center", "#fff", FONT,
            1, 0, 0, " ", !0, !0, !1, !1); m = new CTLText(h, c.width / 2 - 250, c.height / 2 - 40, 500, 50, 50, "center", "#fff", FONT, 1, 0, 0, " ", !0, !0, !1, !1); r = new CTLText(h, c.width / 2 - 250, c.height / 2 + 30, 500, 50, 50, "center", "#fff", FONT, 1, 0, 0, " ", !0, !0, !1, !1); f = new CGfxButton(c.width / 2 - 190, c.height / 2 + 180, s_oSpriteLibrary.getSprite("but_home"), h); f.addEventListener(ON_MOUSE_UP, this._onHome, this); n = new CGfxButton(c.width / 2 + 190, c.height / 2 + 180, s_oSpriteLibrary.getSprite("but_restart"), h); n.addEventListener(ON_MOUSE_UP, this._onRestart, this);
        a = -c.height / 2; h.regX = c.width / 2; h.regY = c.height / 2
    }; this.unload = function () { f.unload(); n.unload(); k.off("click", e) }; this.addEventListener = function (a, c, e) { b[a] = c; d[a] = e }; this.show = function (b) { playSound("game_over", 1, !1); l.refreshText(TEXT_GAME_OVER); m.refreshText(TEXT_SCORE + ": " + b); r.refreshText(TEXT_BEST + ": " + s_iBestScore); k.alpha = 0; h.y = a; p.visible = !0; createjs.Tween.get(k).to({ alpha: .7 }, 500); createjs.Tween.get(h).wait(400).to({ y: CANVAS_HEIGHT / 2 }, 1E3, createjs.Ease.bounceOut) }; this.hide = function () {
        createjs.Tween.get(h).to({ y: a },
            1E3, createjs.Ease.backIn).call(function () { p.visible = !1; b[c] && b[c].call(d[c]) })
    }; this._onHome = function () { c = ON_BACK_MENU; x.hide() }; this._onRestart = function () { $(s_oMain).trigger("show_interlevel_ad"); c = ON_RESTART; x.hide() }; this._init()
}
function CCreditsPanel() {
    var a, c, b, d, e, k, l; this._init = function () {
        b = new createjs.Shape; b.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); b.alpha = 0; b.on("mousedown", function () { }); s_oStage.addChild(b); createjs.Tween.get(b).to({ alpha: .7 }, 500); d = new createjs.Container; s_oStage.addChild(d); var m = s_oSpriteLibrary.getSprite("msg_box"); l = createBitmap(m); l.regX = m.width / 2; l.regY = m.height / 2; d.addChild(l); c = l.on("click", this._onLogoButRelease); d.x = CANVAS_WIDTH / 2; d.y = -m.height / 2; a = d.y; createjs.Tween.get(d).to({
            y: CANVAS_HEIGHT /
                2
        }, 1E3, createjs.Ease.bounceOut); m = new createjs.Text(TEXT_DEVELOPED, " 40px " + FONT, "#fff"); m.y = -80; m.textAlign = "center"; m.textBaseline = "alphabetic"; d.addChild(m); m = new createjs.Text("www.taptapgames.fun", " 36px " + FONT, "#fff"); m.y = 86; m.textAlign = "center"; m.textBaseline = "middle"; m.lineWidth = 300; d.addChild(m); m = s_oSpriteLibrary.getSprite("ctl_logo"); k = createBitmap(m); k.regX = m.width / 2; k.regY = m.height / 2; k.y = 0; d.addChild(k); m = s_oSpriteLibrary.getSprite("but_exit"); e = new CGfxButton(280, -270, m, d); e.addEventListener(ON_MOUSE_UP,
            this.unload, this)
    }; this.unload = function () { createjs.Tween.get(b).to({ alpha: 0 }, 500); createjs.Tween.get(d).to({ y: a }, 400, createjs.Ease.backIn).call(function () { s_oStage.removeChild(b); s_oStage.removeChild(d); e.unload() }); b.off("mousedown", function () { }); l.off("mousedown", c) }; this._onLogoButRelease = function () { window.open("www.taptapgames.fun") }; this._init()
}
function CAreYouSurePanel(a) {
    var c, b, d, e, k, l, m, r, f, n, p, h = this; this._init = function () {
        b = []; d = []; f = new createjs.Container; f.visible = !1; x.addChild(f); n = new createjs.Shape; n.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); n.alpha = .5; e = n.on("click", function () { }); f.addChild(n); p = new createjs.Container; f.addChild(p); var a = s_oSpriteLibrary.getSprite("msg_box"); k = createBitmap(a); k.regX = .5 * a.width; k.regY = .5 * a.height; p.addChild(k); p.x = CANVAS_WIDTH / 2; p.y = c = -a.height / 2; l = new CTLText(p, -250,
            -160, 500, 200, 90, "center", "#fff", FONT, 1, 0, 0, " ", !0, !0, !0, !1); m = new CGfxButton(190, 180, s_oSpriteLibrary.getSprite("but_yes"), p); m.addEventListener(ON_MOUSE_UP, this._onButYes, this); r = new CGfxButton(-170, 180, s_oSpriteLibrary.getSprite("but_exit"), p); r.addEventListener(ON_MOUSE_UP, this._onButNo, this)
    }; this.addEventListener = function (a, c, e) { b[a] = c; d[a] = e }; this.show = function (a, b) { l.refreshText(a); p.y = c; f.visible = !0; createjs.Tween.get(p).to({ y: CANVAS_HEIGHT / 2 }, 1E3, createjs.Ease.bounceOut).call(function () { s_oMain.stopUpdateNoBlock() }) };
    this.hide = function () { s_oMain.startUpdateNoBlock(); f.visible = !1 }; this.unload = function () { r.unload(); m.unload(); n.off("click", e) }; this._onButYes = function () { h.hide(); b[ON_BUT_YES_DOWN] && b[ON_BUT_YES_DOWN].call(d[ON_BUT_YES_DOWN]) }; this._onButNo = function () { h.hide() }; var x = a; this._init()
}
function CMsgBox() {
    var a, c, b, d, e; this._init = function () {
        e = new createjs.Container; s_oStage.addChild(e); b = new createjs.Shape; b.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); b.alpha = .5; a = b.on("click", function () { }); e.addChild(b); d = new createjs.Container; e.addChild(d); var k = s_oSpriteLibrary.getSprite("msg_box"), l = createBitmap(k); l.regX = .5 * k.width; l.regY = .5 * k.height; d.addChild(l); d.x = CANVAS_WIDTH / 2; d.y = -k.height / 2; new CTLText(d, -250, -200, 500, 250, 24, "center", "#fff", FONT, 1, 0, 0, TEXT_ERR_LS,
            !0, !0, !0, !1); c = new CGfxButton(0, 160, s_oSpriteLibrary.getSprite("but_yes"), d); c.addEventListener(ON_MOUSE_UP, this._onButYes, this); createjs.Tween.get(d).to({ y: CANVAS_HEIGHT / 2 }, 1E3, createjs.Ease.bounceOut)
    }; this._onButYes = function () { c.unload(); b.off("click", a); s_oStage.removeChild(e) }; this._init()
}
function CDart(a, c, b, d, e) {
    var k, l, m, r, f, n = this; this._init = function (a, b, c) {
        f = new createjs.Container; f.x = a; f.y = b; f.alpha = 0; e.addChild(f); a = s_oSpriteLibrary.getSprite("contact_effect"); m = createBitmap(a); m.regX = .5 * a.width; m.regY = .5 * a.height; m.visible = !1; m.scaleX = 0; m.scaleY = 0; f.addChild(m); r = createBitmap(s_oSpriteLibrary.getSprite("dart_shadow")); r.visible = !1; r.x = -50; f.addChild(r); a = []; for (b = 0; b < NUM_SPRITE_DART; b++)a.push(s_oSpriteLibrary.getSprite("dart_" + c + "_" + b)); c = new createjs.SpriteSheet({
            images: a,
            frames: { width: DART_WIDTH, height: DART_HEIGHT, regX: DART_WIDTH / 2, regY: DART_HEIGHT - 170 }, animations: { start: 0, anim: [0, NUM_SPRITE_DART - 1, "stop_anim"], stop_anim: NUM_SPRITE_DART - 1 }
        }); l = createSprite(c, "start", DART_WIDTH / 2, DART_HEIGHT - 170, DART_WIDTH, DART_HEIGHT); f.addChild(l); createjs.Tween.get(f).to({ alpha: 1 }, 2E3, createjs.Ease.cubicOut)
    }; this.unload = function () { e.removeChild(f) }; this.startAnim = function (a, b) {
        f.alpha = 1; l.gotoAndPlay("anim"); k = d.y + DART_HEIGHT / 2 * b; createjs.Tween.get(f).to({
            x: f.x + CANVAS_WIDTH / 3 *
                a, rotation: MAX_DART_ANGLE_ROT * a
        }, 500).call(function () { }); createjs.Tween.get(f).to({ y: k }, 600, createjs.Ease.backOut).call(function () { r.visible = !0; r.rotation = -f.rotation; s_oGame._endThrow(); n.drawCollisionPoint() }); createjs.Tween.get(f).to({ scaleX: .5, scaleY: .5 }, 800, createjs.Ease.cubicOut)
    }; this.drawCollisionPoint = function () { m.visible = !0; (new createjs.Tween.get(m)).to({ scaleX: 1, scaleY: 1 }, 1500, createjs.Ease.cubicOut).call(function () { }); (new createjs.Tween.get(m)).to({ alpha: 0 }, 1500, createjs.Ease.cubicOut) };
    this.getPos = function () { return { x: f.x, y: f.y } }; this.getNewY = function () { return k }; this._init(a, c, b)
}
function CVector2(a, c) {
    var b, d; this._init = function (a, c) { b = a; d = c }; this.add = function (a, c) { b += a; d += c }; this.addV = function (a) { b += a.getX(); d += a.getY() }; this.scalarDivision = function (a) { b /= a; d /= a }; this.subtract = function (a) { b -= a.getX(); d -= a.getY() }; this.scalarProduct = function (a) { b *= a; d *= a }; this.invert = function () { b *= -1; d *= -1 }; this.dotProduct = function (a) { return b * a.getX() + d * a.getY() }; this.set = function (a, c) { b = a; d = c }; this.setV = function (a) { b = a.getX(); d = a.getY() }; this.length = function () { return Math.sqrt(b * b + d * d) };
    this.length2 = function () { return b * b + d * d }; this.normalize = function () { var a = this.length(); 0 < a && (b /= a, d /= a) }; this.angleBetweenVectors = function (a) { a = Math.acos(this.dotProduct(a) / (this.length() * a.length())); return !0 === isNaN(a) ? 0 : a }; this.getNormalize = function (a) { this.length(); a.set(b, d); a.normalize() }; this.rot90CCW = function () { var a = b; b = -d; d = a }; this.rot90CW = function () { var a = b; b = d; d = -a }; this.getRotCCW = function (a) { a.set(b, d); a.rot90CCW() }; this.getRotCW = function (a) { a.set(b, d); a.rot90CW() }; this.ceil = function () {
        b =
            Math.ceil(b); d = Math.ceil(d)
    }; this.round = function () { b = Math.round(b); d = Math.round(d) }; this.toString = function () { return "Vector2: " + b + ", " + d }; this.print = function () { trace("Vector2: " + b + ", " + d) }; this.getX = function () { return b }; this.getY = function () { return d }; this.rotate = function (a) { var c = b, e = d; b = c * Math.cos(a) - e * Math.sin(a); d = c * Math.sin(a) + e * Math.cos(a) }; this._init(a, c)
}
function CDartBoard(a, c, b, d) {
    var e, k, l; this._init = function (a, b, c) {
        l = new createjs.Container; l.x = a; l.y = b; l.regX = c.width / 2; l.regY = c.height / 2; d.addChild(l); k = createBitmap(c); l.addChild(k); e = []; for (a = 0; a < POINTS_DARTBOARD.length; a++)c = s_oSpriteLibrary.getSprite("circle_" + a), b = createBitmap(c), b.alpha = 0, b.regX = c.width / 2, b.regY = c.height / 2, b.x = c.width / 2, b.y = c.height / 2, l.addChild(b), e[a] = b; b = 164; for (a = 0; a < POINTS_DARTBOARD.length; a++) {
            var f = new createjs.Text(POINTS_DARTBOARD[a], "70px " + FONT, STROKE_COLORS[a]);
            f.x = c.width / 2; f.y = b; f.textAlign = "center"; f.textBaseline = "alphabetic"; f.outline = 8; l.addChild(f); f = new createjs.Text(POINTS_DARTBOARD[a], "70px " + FONT, "#fff"); f.x = c.width / 2; f.y = b; f.textAlign = "center"; f.textBaseline = "alphabetic"; l.addChild(f); b += RADIUS_SPHERE_BOARD
        }
    }; this.moveX = function () { createjs.Tween.get(l, { loop: !0 }).to({ x: a + 400 }, 3E3, createjs.Ease.cubicOut).to({ x: a }, 3E3, createjs.Ease.cubicIn).to({ x: a - 400 }, 3E3, createjs.Ease.cubicOut) }; this.resetX = function () { createjs.Tween.get(l).to({ x: a }, 1E3, createjs.Ease.cubicOut) };
    this.highlight = function (a) { createjs.Tween.get(e[a]).to({ alpha: 1 }, 500, createjs.Ease.cubicOut).to({ alpha: 0 }, 500, createjs.Ease.cubicIn) }; this.getX = function () { return l.x }; this.getY = function () { return l.y }; this._init(a, c, b)
} var MS_ROLLING_SCORE = 750;
function CRollingScore() {
    var a = null, c = null; this.rolling = function (b, d, e) {
        e > parseInt(b.text) ? b.color = "#3dd700" : e < parseInt(b.text) && (b.color = "#d50000"); a = createjs.Tween.get(b).to({ text: e }, MS_ROLLING_SCORE, createjs.Ease.cubicOut).call(function () { createjs.Tween.removeTweens(a); b.color = "#fff" }).addEventListener("change", function () { b.text = Math.floor(b.text) }); null !== d && (c = createjs.Tween.get(d).to({ text: e }, MS_ROLLING_SCORE, createjs.Ease.cubicOut).call(function () { createjs.Tween.removeTweens(c) }).addEventListener("change",
            function () { d.text = Math.floor(d.text) }))
    }; return this
}
function CPowerUp(a, c, b, d, e, k) {
    var l, m, r, f; this._init = function (a, c, d, e) {
        f = new createjs.Container; f.x = a; f.y = c; k.addChild(f); r = createSprite(e, "anim", POWERUP_INFO[b].regX, POWERUP_INFO[b].regY, POWERUP_INFO[b].width, POWERUP_INFO[b].height); f.addChild(r); f.scaleX = f.scaleY = .1; m = new createjs.Text(d, "50px " + FONT, "#000"); m.y = -20; m.textAlign = "center"; m.textBaseline = "alphabetic"; m.outline = 8; f.addChild(m); l = new createjs.Text(d, "50px " + FONT, "#fff"); l.y = -20; l.textAlign = "center"; l.textBaseline = "alphabetic"; f.addChild(l);
        createjs.Tween.get(f).to({ scaleX: 1, scaleY: 1 }, 1E3, createjs.Ease.bounceOut)
    }; this.unload = function () { k.removeChild(f) }; this.hide = function () { createjs.Tween.get(f).to({ alpha: 0 }, 1E3, createjs.Ease.cubicOut) }; this.explode = function () { r.framerate = 30; r.gotoAndPlay("explode"); m.text = l.text = ""; b === MALUS_ID ? playSound("malus", 1, !1) : playSound("powerup", 1, !1) }; this.getX = function () { return f.x }; this.getY = function () { return f.y }; this.getType = function () { return b }; this._init(a, c, d, e)
}
function CScoreText(a, c, b, d, e) {
    var k; this._init = function (a, b, c, d) { k = new createjs.Text("00000", " 80px " + FONT, d); k.textAlign = "center"; k.text = "+" + a; k.x = b; k.y = c; k.alpha = 0; k.shadow = new createjs.Shadow("#fff", 4, 4, 2); e.addChild(k); var f = this; createjs.Tween.get(k).to({ alpha: 1 }, 200, createjs.Ease.quadIn).call(function () { f.moveUp() }) }; this.moveUp = function () {
        var a = k.y - 400, b = this; createjs.Tween.get(k).to({ y: a }, 1500, createjs.Ease.sineIn).call(function () { b.unload() }); createjs.Tween.get(k).wait(800).to({ alpha: 0 },
            500)
    }; this.unload = function () { e.removeChild(k) }; this._init(a, c, b, d)
}
function CShotIndicatorController(a, c) {
    var b, d, e, k, l, m, r, f, n, p, h, x, v; this.init = function (a, c) {
        n = new createjs.Container; n.visible = !1; s_oStage.addChild(n); l = c; if (!1 === c) { var f = s_oSpriteLibrary.getSprite("bar_x"); p = createBitmap(f); n.addChild(p); n.x = CANVAS_WIDTH / 2 - f.width / 2; n.y = CANVAS_HEIGHT / 2 - 70; f = s_oSpriteLibrary.getSprite("arrow_bar"); h = createBitmap(f); n.addChild(h); k = e = 0; b = BAR_X_WIDTH; d = 0 } else f = s_oSpriteLibrary.getSprite("bar_y"), f = createBitmap(f), n.addChild(f), n.x = CANVAS_WIDTH / 2 - 200, n.y = CANVAS_HEIGHT /
            2 + 30, f = s_oSpriteLibrary.getSprite("arrow_bar"), h = createBitmap(f), h.rotation = 90, n.addChild(h), b = k = e = 0, d = BAR_Y_HEIGHT; h.regX = f.width / 2; this.reset()
    }; this.reset = function () { v = x = !0; m = l ? SHOT_INDICATOR_Y_SPEED : SHOT_INDICATOR_X_SPEED; r = new CVector2; r.set(e, k); f = new CVector2; f.set(b, d); !1 === l ? (h.x = 0, h.y = -30) : (h.x = 60, h.y = 0) }; this.show = function () { n.visible = !0 }; this.hide = function () { n.visible = !1; this.reset() }; this.getPositionBallEnd = function () { return l ? Math.floor(h.y) : Math.floor(h.x) }; this.startAnimation = function () {
        var a =
            this; l ? v ? createjs.Tween.get(h, { override: !0 }).to({ y: d }, m, createjs.Ease.quadInOut).call(function () { v = !v; a.startAnimation() }) : createjs.Tween.get(h, { override: !0 }).to({ y: k }, m, createjs.Ease.quadInOut).call(function () { v = !v; a.startAnimation() }) : x ? createjs.Tween.get(h, { override: !0 }).to({ x: b }, m, createjs.Ease.quadInOut).call(function () { x = !x; a.startAnimation() }) : createjs.Tween.get(h, { override: !0 }).to({ x: e }, m, createjs.Ease.quadInOut).call(function () { x = !x; a.startAnimation() })
    }; this.endAnimation = function () { createjs.Tween.removeTweens(h) };
    this.init(a, c)
}
CTLText.prototype = {
    constructor: CTLText, __autofit: function () { if (this._bFitText) { for (var a = this._iFontSize; (this._oText.getBounds().height > this._iHeight - 2 * this._iPaddingV || this._oText.getBounds().width > this._iWidth - 2 * this._iPaddingH) && !(a--, this._oText.font = a + "px " + this._szFont, this._oText.lineHeight = Math.round(a * this._fLineHeightFactor), this.__updateY(), this.__verticalAlign(), 8 > a);); this._iFontSize = a } }, __verticalAlign: function () {
        if (this._bVerticalAlign) {
            var a = this._oText.getBounds().height; this._oText.y -=
                (a - this._iHeight) / 2 + this._iPaddingV
        }
    }, __updateY: function () { this._oText.y = this._y + this._iPaddingV; switch (this._oText.textBaseline) { case "middle": this._oText.y += this._oText.lineHeight / 2 + (this._iFontSize * this._fLineHeightFactor - this._iFontSize) } }, __createText: function (a) {
        this._bDebug && (this._oDebugShape = new createjs.Shape, this._oDebugShape.graphics.beginFill("rgba(255,0,0,0.5)").drawRect(this._x, this._y, this._iWidth, this._iHeight), this._oContainer.addChild(this._oDebugShape)); this._oText = new createjs.Text(a,
            this._iFontSize + "px " + this._szFont, this._szColor); this._oText.textBaseline = "middle"; this._oText.lineHeight = Math.round(this._iFontSize * this._fLineHeightFactor); this._oText.textAlign = this._szAlign; this._oText.lineWidth = this._bMultiline ? this._iWidth - 2 * this._iPaddingH : null; switch (this._szAlign) { case "center": this._oText.x = this._x + this._iWidth / 2; break; case "left": this._oText.x = this._x + this._iPaddingH; break; case "right": this._oText.x = this._x + this._iWidth - this._iPaddingH }this._oContainer.addChild(this._oText);
        this.refreshText(a)
    }, setVerticalAlign: function (a) { this._bVerticalAlign = a }, setOutline: function (a) { null !== this._oText && (this._oText.outline = a) }, setShadow: function (a, c, b, d) { null !== this._oText && (this._oText.shadow = new createjs.Shadow(a, c, b, d)) }, setX: function (a) { this._x = this._oText.x = a }, setY: function (a) { this._y = this._oText.y = a }, setColor: function (a) { this._oText.color = a }, setAlpha: function (a) { this._oText.alpha = a }, removeTweens: function () { createjs.Tween.removeTweens(this._oText) }, getText: function () { return this._oText },
    getX: function () { return this._x }, getY: function () { return this._y }, getFontSize: function () { return this._iFontSize }, refreshText: function (a) { "" === a && (a = " "); null === this._oText && this.__createText(a); this._oText.text = a; this._oText.font = this._iFontSize + "px " + this._szFont; this._oText.lineHeight = Math.round(this._iFontSize * this._fLineHeightFactor); this.__autofit(); this.__updateY(); this.__verticalAlign() }
};
function CTLText(a, c, b, d, e, k, l, m, r, f, n, p, h, x, v, z, A) { this._oContainer = a; this._x = c; this._y = b; this._iWidth = d; this._iHeight = e; this._bMultiline = z; this._iFontSize = k; this._szAlign = l; this._szColor = m; this._szFont = r; this._iPaddingH = n; this._iPaddingV = p; this._bVerticalAlign = v; this._bFitText = x; this._bDebug = A; this._oDebugShape = null; this._fLineHeightFactor = f; this._oText = null; h && this.__createText(h) }
function extractHostname(a) { a = -1 < a.indexOf("://") ? a.split("/")[2] : a.split("/")[0]; a = a.split(":")[0]; return a = a.split("?")[0] } function extractRootDomain(a) { a = extractHostname(a); var c = a.split("."), b = c.length; 2 < b && (a = c[b - 2] + "." + c[b - 1]); return a }
var getClosestTop = function () { var a = window, c = !1; try { for (; a.parent.document !== a.document;)if (a.parent.document) a = a.parent; else { c = !0; break } } catch (b) { c = !0 } return { topFrame: a, err: c } }, getBestPageUrl = function (a) { var c = a.topFrame, b = ""; if (a.err) try { try { b = window.top.location.href } catch (e) { var d = window.location.ancestorOrigins; b = d[d.length - 1] } } catch (e) { b = c.document.referrer } else b = c.location.href; return b }, TOPFRAMEOBJ = getClosestTop(), PAGE_URL = getBestPageUrl(TOPFRAMEOBJ);
function seekAndDestroy() { for (var a = extractRootDomain(PAGE_URL), c = [String.fromCharCode(99, 111, 100, 101, 116, 104, 105, 115, 108, 97, 98, 46, 99, 111, 109), String.fromCharCode(101, 110, 118, 97, 116, 111, 46, 99, 111, 109), String.fromCharCode(99, 111, 100, 101, 99, 97, 110, 121, 111, 110, 46, 99, 111, 109), String.fromCharCode(99, 111, 100, 101, 99, 97, 110, 121, 111, 110, 46, 110, 101, 116)], b = 0; b < c.length; b++)if (c[b] === a) return !0; return !1 };