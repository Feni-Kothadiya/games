
(function () {
    function a(m) { m = String(m); return m.charAt(0).toUpperCase() + m.slice(1) } function c(m, B) { var H = -1, z = m ? m.length : 0; if ("number" == typeof z && -1 < z && z <= x) for (; ++H < z;)B(m[H], H, m); else d(m, B) } function b(m) { m = String(m).replace(/^ +| +$/g, ""); return /^(?:webOS|i(?:OS|P))/.test(m) ? m : a(m) } function d(m, B) { for (var H in m) v.call(m, H) && B(m[H], H, m) } function e(m) { return null == m ? a(m) : F.call(m).slice(8, -1) } function g(m, B) {
        var H = null != m ? typeof m[B] : "number"; return !/^(?:boolean|number|string|undefined)$/.test(H) &&
            ("object" == H ? !!m[B] : !0)
    } function f(m) { return String(m).replace(/([ -])(?!$)/g, "$1?") } function h(m, B) { var H = null; c(m, function (z, A) { H = B(H, z, A, m) }); return H } function l(m) {
        function B(J) {
            return h(J, function (I, G) {
                var K = G.pattern || f(G); !I && (I = RegExp("\\b" + K + " *\\d+[.\\w_]*", "i").exec(m) || RegExp("\\b" + K + " *\\w+-[\\w]*", "i").exec(m) || RegExp("\\b" + K + "(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)", "i").exec(m)) && ((I = String(G.label && !RegExp(K, "i").test(G.label) ? G.label : I).split("/"))[1] && !/[\d.]+/.test(I[0]) && (I[0] +=
                    " " + I[1]), G = G.label || G, I = b(I[0].replace(RegExp(K, "i"), G).replace(RegExp("; *(?:" + G + "[_-])?", "i"), " ").replace(RegExp("(" + G + ")[-_.]?(\\w)", "i"), "$1 $2"))); return I
            })
        } function H(J) { return h(J, function (I, G) { return I || (RegExp(G + "(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)", "i").exec(m) || 0)[1] || null }) } var z = n, A = m && "object" == typeof m && "String" != e(m); A && (z = m, m = null); var Q = z.navigator || {}, y = Q.userAgent || ""; m || (m = y); var Z = A ? !!Q.likeChrome : /\bChrome\b/.test(m) && !/internal|\n/i.test(F.toString()),
            aa = A ? "Object" : "ScriptBridgingProxyObject", U = A ? "Object" : "Environment", P = A && z.java ? "JavaPackage" : e(z.java), ba = A ? "Object" : "RuntimeObject"; U = (P = /\bJava/.test(P) && z.java) && e(z.environment) == U; var ca = P ? "a" : "\u03b1", da = P ? "b" : "\u03b2", V = z.document || {}, N = z.operamini || z.opera, R = r.test(R = A && N ? N["[[Class]]"] : e(N)) ? R : N = null, k, S = m; A = []; var T = null, O = m == y; y = O && N && "function" == typeof N.version && N.version(); var C = function (J) {
                return h(J, function (I, G) {
                    return I || RegExp("\\b" + (G.pattern || f(G)) + "\\b", "i").exec(m) && (G.label ||
                        G)
                })
            }([{ label: "EdgeHTML", pattern: "Edge" }, "Trident", { label: "WebKit", pattern: "AppleWebKit" }, "iCab", "Presto", "NetFront", "Tasman", "KHTML", "Gecko"]), t = function (J) { return h(J, function (I, G) { return I || RegExp("\\b" + (G.pattern || f(G)) + "\\b", "i").exec(m) && (G.label || G) }) }(["Adobe AIR", "Arora", "Avant Browser", "Breach", "Camino", "Electron", "Epiphany", "Fennec", "Flock", "Galeon", "GreenBrowser", "iCab", "Iceweasel", "K-Meleon", "Konqueror", "Lunascape", "Maxthon", { label: "Microsoft Edge", pattern: "Edge" }, "Midori", "Nook Browser",
                "PaleMoon", "PhantomJS", "Raven", "Rekonq", "RockMelt", { label: "Samsung Internet", pattern: "SamsungBrowser" }, "SeaMonkey", { label: "Silk", pattern: "(?:Cloud9|Silk-Accelerated)" }, "Sleipnir", "SlimBrowser", { label: "SRWare Iron", pattern: "Iron" }, "Sunrise", "Swiftfox", "Waterfox", "WebPositive", "Opera Mini", { label: "Opera Mini", pattern: "OPiOS" }, "Opera", { label: "Opera", pattern: "OPR" }, "Chrome", { label: "Chrome Mobile", pattern: "(?:CriOS|CrMo)" }, { label: "Firefox", pattern: "(?:Firefox|Minefield)" }, { label: "Firefox for iOS", pattern: "FxiOS" },
                { label: "IE", pattern: "IEMobile" }, { label: "IE", pattern: "MSIE" }, "Safari"]), D = B([{ label: "BlackBerry", pattern: "BB10" }, "BlackBerry", { label: "Galaxy S", pattern: "GT-I9000" }, { label: "Galaxy S2", pattern: "GT-I9100" }, { label: "Galaxy S3", pattern: "GT-I9300" }, { label: "Galaxy S4", pattern: "GT-I9500" }, { label: "Galaxy S5", pattern: "SM-G900" }, { label: "Galaxy S6", pattern: "SM-G920" }, { label: "Galaxy S6 Edge", pattern: "SM-G925" }, { label: "Galaxy S7", pattern: "SM-G930" }, { label: "Galaxy S7 Edge", pattern: "SM-G935" }, "Google TV", "Lumia", "iPad",
                    "iPod", "iPhone", "Kindle", { label: "Kindle Fire", pattern: "(?:Cloud9|Silk-Accelerated)" }, "Nexus", "Nook", "PlayBook", "PlayStation Vita", "PlayStation", "TouchPad", "Transformer", { label: "Wii U", pattern: "WiiU" }, "Wii", "Xbox One", { label: "Xbox 360", pattern: "Xbox" }, "Xoom"]), L = function (J) { return h(J, function (I, G, K) { return I || (G[D] || G[/^[a-z]+(?: +[a-z]+\b)*/i.exec(D)] || RegExp("\\b" + f(K) + "(?:\\b|\\w*\\d)", "i").exec(m)) && K }) }({
                        Apple: { iPad: 1, iPhone: 1, iPod: 1 }, Archos: {}, Amazon: { Kindle: 1, "Kindle Fire": 1 }, Asus: { Transformer: 1 },
                        "Barnes & Noble": { Nook: 1 }, BlackBerry: { PlayBook: 1 }, Google: { "Google TV": 1, Nexus: 1 }, HP: { TouchPad: 1 }, HTC: {}, LG: {}, Microsoft: { Xbox: 1, "Xbox One": 1 }, Motorola: { Xoom: 1 }, Nintendo: { "Wii U": 1, Wii: 1 }, Nokia: { Lumia: 1 }, Samsung: { "Galaxy S": 1, "Galaxy S2": 1, "Galaxy S3": 1, "Galaxy S4": 1 }, Sony: { PlayStation: 1, "PlayStation Vita": 1 }
                    }), u = function (J) {
                        return h(J, function (I, G) {
                            var K = G.pattern || f(G); if (!I && (I = RegExp("\\b" + K + "(?:/[\\d.]+|[ \\w.]*)", "i").exec(m))) {
                                var M = I, W = G.label || G, X = {
                                    "10.0": "10", "6.4": "10 Technical Preview",
                                    "6.3": "8.1", "6.2": "8", "6.1": "Server 2008 R2 / 7", "6.0": "Server 2008 / Vista", "5.2": "Server 2003 / XP 64-bit", "5.1": "XP", "5.01": "2000 SP1", "5.0": "2000", "4.0": "NT", "4.90": "ME"
                                }; K && W && /^Win/i.test(M) && !/^Windows Phone /i.test(M) && (X = X[/[\d.]+$/.exec(M)]) && (M = "Windows " + X); M = String(M); K && W && (M = M.replace(RegExp(K, "i"), W)); I = M = b(M.replace(/ ce$/i, " CE").replace(/\bhpw/i, "web").replace(/\bMacintosh\b/, "Mac OS").replace(/_PowerPC\b/i, " OS").replace(/\b(OS X) [^ \d]+/i, "$1").replace(/\bMac (OS X)\b/, "$1").replace(/\/(\d)/,
                                    " $1").replace(/_/g, ".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i, "").replace(/\bx86\.64\b/gi, "x86_64").replace(/\b(Windows Phone) OS\b/, "$1").replace(/\b(Chrome OS \w+) [\d.]+\b/, "$1").split(" on ")[0])
                            } return I
                        })
                    }(["Windows Phone", "Android", "CentOS", { label: "Chrome OS", pattern: "CrOS" }, "Debian", "Fedora", "FreeBSD", "Gentoo", "Haiku", "Kubuntu", "Linux Mint", "OpenBSD", "Red Hat", "SuSE", "Ubuntu", "Xubuntu", "Cygwin", "Symbian OS", "hpwOS", "webOS ", "webOS", "Tablet OS", "Tizen", "Linux", "Mac OS X", "Macintosh", "Mac",
                        "Windows 98;", "Windows "]); C && (C = [C]); L && !D && (D = B([L])); if (k = /\bGoogle TV\b/.exec(D)) D = k[0]; /\bSimulator\b/i.test(m) && (D = (D ? D + " " : "") + "Simulator"); "Opera Mini" == t && /\bOPiOS\b/.test(m) && A.push("running in Turbo/Uncompressed mode"); "IE" == t && /\blike iPhone OS\b/.test(m) ? (k = l(m.replace(/like iPhone OS/, "")), L = k.manufacturer, D = k.product) : /^iP/.test(D) ? (t || (t = "Safari"), u = "iOS" + ((k = / OS ([\d_]+)/i.exec(m)) ? " " + k[1].replace(/_/g, ".") : "")) : "Konqueror" != t || /buntu/i.test(u) ? L && "Google" != L && (/Chrome/.test(t) &&
                            !/\bMobile Safari\b/i.test(m) || /\bVita\b/.test(D)) || /\bAndroid\b/.test(u) && /^Chrome/.test(t) && /\bVersion\//i.test(m) ? (t = "Android Browser", u = /\bAndroid\b/.test(u) ? u : "Android") : "Silk" == t ? (/\bMobi/i.test(m) || (u = "Android", A.unshift("desktop mode")), /Accelerated *= *true/i.test(m) && A.unshift("accelerated")) : "PaleMoon" == t && (k = /\bFirefox\/([\d.]+)\b/.exec(m)) ? A.push("identifying as Firefox " + k[1]) : "Firefox" == t && (k = /\b(Mobile|Tablet|TV)\b/i.exec(m)) ? (u || (u = "Firefox OS"), D || (D = k[1])) : !t || (k = !/\bMinefield\b/i.test(m) &&
                                /\b(?:Firefox|Safari)\b/.exec(t)) ? (t && !D && /[\/,]|^[^(]+?\)/.test(m.slice(m.indexOf(k + "/") + 8)) && (t = null), (k = D || L || u) && (D || L || /\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(u)) && (t = /[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(u) ? u : k) + " Browser")) : "Electron" == t && (k = (/\bChrome\/([\d.]+)\b/.exec(m) || 0)[1]) && A.push("Chromium " + k) : u = "Kubuntu"; y || (y = H(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))", "Version", f(t), "(?:Firefox|Minefield|NetFront)"]));
        if (k = "iCab" == C && 3 < parseFloat(y) && "WebKit" || /\bOpera\b/.test(t) && (/\bOPR\b/.test(m) ? "Blink" : "Presto") || /\b(?:Midori|Nook|Safari)\b/i.test(m) && !/^(?:Trident|EdgeHTML)$/.test(C) && "WebKit" || !C && /\bMSIE\b/i.test(m) && ("Mac OS" == u ? "Tasman" : "Trident") || "WebKit" == C && /\bPlayStation\b(?! Vita\b)/i.test(t) && "NetFront") C = [k]; "IE" == t && (k = (/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(m) || 0)[1]) ? (t += " Mobile", u = "Windows Phone " + (/\+$/.test(k) ? k : k + ".x"), A.unshift("desktop mode")) : /\bWPDesktop\b/i.test(m) ? (t = "IE Mobile", u = "Windows Phone 8.x",
            A.unshift("desktop mode"), y || (y = (/\brv:([\d.]+)/.exec(m) || 0)[1])) : "IE" != t && "Trident" == C && (k = /\brv:([\d.]+)/.exec(m)) && (t && A.push("identifying as " + t + (y ? " " + y : "")), t = "IE", y = k[1]); if (O) {
                if (g(z, "global")) if (P && (k = P.lang.System, S = k.getProperty("os.arch"), u = u || k.getProperty("os.name") + " " + k.getProperty("os.version")), U) { try { y = z.require("ringo/engine").version.join("."), t = "RingoJS" } catch (J) { (k = z.system) && k.global.system == z.system && (t = "Narwhal", u || (u = k[0].os || null)) } t || (t = "Rhino") } else "object" == typeof z.process &&
                    !z.process.browser && (k = z.process) && ("object" == typeof k.versions && ("string" == typeof k.versions.electron ? (A.push("Node " + k.versions.node), t = "Electron", y = k.versions.electron) : "string" == typeof k.versions.nw && (A.push("Chromium " + y, "Node " + k.versions.node), t = "NW.js", y = k.versions.nw)), t || (t = "Node.js", S = k.arch, u = k.platform, y = (y = /[\d.]+/.exec(k.version)) ? y[0] : null)); else e(k = z.runtime) == aa ? (t = "Adobe AIR", u = k.flash.system.Capabilities.os) : e(k = z.phantom) == ba ? (t = "PhantomJS", y = (k = k.version || null) && k.major + "." +
                        k.minor + "." + k.patch) : "number" == typeof V.documentMode && (k = /\bTrident\/(\d+)/i.exec(m)) ? (y = [y, V.documentMode], (k = +k[1] + 4) != y[1] && (A.push("IE " + y[1] + " mode"), C && (C[1] = ""), y[1] = k), y = "IE" == t ? String(y[1].toFixed(1)) : y[0]) : "number" == typeof V.documentMode && /^(?:Chrome|Firefox)\b/.test(t) && (A.push("masking as " + t + " " + y), t = "IE", y = "11.0", C = ["Trident"], u = "Windows"); u = u && b(u)
            } y && (k = /(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(y) || /(?:alpha|beta)(?: ?\d)?/i.exec(m + ";" + (O && Q.appMinorVersion)) || /\bMinefield\b/i.test(m) &&
                "a") && (T = /b/i.test(k) ? "beta" : "alpha", y = y.replace(RegExp(k + "\\+?$"), "") + ("beta" == T ? da : ca) + (/\d+\+?/.exec(k) || "")); if ("Fennec" == t || "Firefox" == t && /\b(?:Android|Firefox OS)\b/.test(u)) t = "Firefox Mobile"; else if ("Maxthon" == t && y) y = y.replace(/\.[\d.]+/, ".x"); else if (/\bXbox\b/i.test(D)) "Xbox 360" == D && (u = null), "Xbox 360" == D && /\bIEMobile\b/.test(m) && A.unshift("mobile mode"); else if (!/^(?:Chrome|IE|Opera)$/.test(t) && (!t || D || /Browser|Mobi/.test(t)) || "Windows CE" != u && !/Mobi/i.test(m)) if ("IE" == t && O) try {
                    null ===
                    z.external && A.unshift("platform preview")
                } catch (J) { A.unshift("embedded") } else (/\bBlackBerry\b/.test(D) || /\bBB10\b/.test(m)) && (k = (RegExp(D.replace(/ +/g, " *") + "/([.\\d]+)", "i").exec(m) || 0)[1] || y) ? (k = [k, /BB10/.test(m)], u = (k[1] ? (D = null, L = "BlackBerry") : "Device Software") + " " + k[0], y = null) : this != d && "Wii" != D && (O && N || /Opera/.test(t) && /\b(?:MSIE|Firefox)\b/i.test(m) || "Firefox" == t && /\bOS X (?:\d+\.){2,}/.test(u) || "IE" == t && (u && !/^Win/.test(u) && 5.5 < y || /\bWindows XP\b/.test(u) && 8 < y || 8 == y && !/\bTrident\b/.test(m))) &&
                    !r.test(k = l.call(d, m.replace(r, "") + ";")) && k.name && (k = "ing as " + k.name + ((k = k.version) ? " " + k : ""), r.test(t) ? (/\bIE\b/.test(k) && "Mac OS" == u && (u = null), k = "identify" + k) : (k = "mask" + k, t = R ? b(R.replace(/([a-z])([A-Z])/g, "$1 $2")) : "Opera", /\bIE\b/.test(k) && (u = null), O || (y = null)), C = ["Presto"], A.push(k)); else t += " Mobile"; if (k = (/\bAppleWebKit\/([\d.]+\+?)/i.exec(m) || 0)[1]) {
                        k = [parseFloat(k.replace(/\.(\d)$/, ".0$1")), k]; if ("Safari" == t && "+" == k[1].slice(-1)) t = "WebKit Nightly", T = "alpha", y = k[1].slice(0, -1); else if (y ==
                            k[1] || y == (k[2] = (/\bSafari\/([\d.]+\+?)/i.exec(m) || 0)[1])) y = null; k[1] = (/\bChrome\/([\d.]+)/i.exec(m) || 0)[1]; 537.36 == k[0] && 537.36 == k[2] && 28 <= parseFloat(k[1]) && "WebKit" == C && (C = ["Blink"]); O && (Z || k[1]) ? (C && (C[1] = "like Chrome"), k = k[1] || (k = k[0], 530 > k ? 1 : 532 > k ? 2 : 532.05 > k ? 3 : 533 > k ? 4 : 534.03 > k ? 5 : 534.07 > k ? 6 : 534.1 > k ? 7 : 534.13 > k ? 8 : 534.16 > k ? 9 : 534.24 > k ? 10 : 534.3 > k ? 11 : 535.01 > k ? 12 : 535.02 > k ? "13+" : 535.07 > k ? 15 : 535.11 > k ? 16 : 535.19 > k ? 17 : 536.05 > k ? 18 : 536.1 > k ? 19 : 537.01 > k ? 20 : 537.11 > k ? "21+" : 537.13 > k ? 23 : 537.18 > k ? 24 : 537.24 > k ? 25 : 537.36 >
                                k ? 26 : "Blink" != C ? "27" : "28")) : (C && (C[1] = "like Safari"), k = (k = k[0], 400 > k ? 1 : 500 > k ? 2 : 526 > k ? 3 : 533 > k ? 4 : 534 > k ? "4+" : 535 > k ? 5 : 537 > k ? 6 : 538 > k ? 7 : 601 > k ? 8 : "8")); C && (C[1] += " " + (k += "number" == typeof k ? ".x" : /[.+]/.test(k) ? "" : "+")); "Safari" == t && (!y || 45 < parseInt(y)) && (y = k)
                    } "Opera" == t && (k = /\bzbov|zvav$/.exec(u)) ? (t += " ", A.unshift("desktop mode"), "zvav" == k ? (t += "Mini", y = null) : t += "Mobile", u = u.replace(RegExp(" *" + k + "$"), "")) : "Safari" == t && /\bChrome\b/.exec(C && C[1]) && (A.unshift("desktop mode"), t = "Chrome Mobile", y = null, /\bOS X\b/.test(u) ?
                        (L = "Apple", u = "iOS 4.3+") : u = null); y && 0 == y.indexOf(k = /[\d.]+$/.exec(u)) && -1 < m.indexOf("/" + k + "-") && (u = String(u.replace(k, "")).replace(/^ +| +$/g, "")); C && !/\b(?:Avant|Nook)\b/.test(t) && (/Browser|Lunascape|Maxthon/.test(t) || "Safari" != t && /^iOS/.test(u) && /\bSafari\b/.test(C[1]) || /^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(t) && C[1]) && (k = C[C.length - 1]) && A.push(k); A.length && (A = ["(" + A.join("; ") + ")"]); L && D && 0 > D.indexOf(L) && A.push("on " + L); D && A.push((/^on /.test(A[A.length -
                            1]) ? "" : "on ") + D); if (u) { var Y = (k = / ([\d.+]+)$/.exec(u)) && "/" == u.charAt(u.length - k[0].length - 1); u = { architecture: 32, family: k && !Y ? u.replace(k[0], "") : u, version: k ? k[1] : null, toString: function () { var J = this.version; return this.family + (J && !Y ? " " + J : "") + (64 == this.architecture ? " 64-bit" : "") } } } (k = /\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(S)) && !/\bi686\b/i.test(S) ? (u && (u.architecture = 64, u.family = u.family.replace(RegExp(" *" + k), "")), t && (/\bWOW64\b/i.test(m) || O && /\w(?:86|32)$/.test(Q.cpuClass || Q.platform) && !/\bWin64; x64\b/i.test(m)) &&
                                A.unshift("32-bit")) : u && /^OS X/.test(u.family) && "Chrome" == t && 39 <= parseFloat(y) && (u.architecture = 64); m || (m = null); z = {}; z.description = m; z.layout = C && C[0]; z.manufacturer = L; z.name = t; z.prerelease = T; z.product = D; z.ua = m; z.version = t && y; z.os = u || { architecture: null, family: null, version: null, toString: function () { return "null" } }; z.parse = l; z.toString = function () { return this.description || "" }; z.version && A.unshift(y); z.name && A.unshift(t); u && t && (u != String(u).split(" ")[0] || u != t.split(" ")[0] && !D) && A.push(D ? "(" + u + ")" : "on " +
                                    u); A.length && (z.description = A.join(" ")); return z
    } var p = { "function": !0, object: !0 }, n = p[typeof window] && window || this, q = p[typeof exports] && exports; p = p[typeof module] && module && !module.nodeType && module; var w = q && p && "object" == typeof global && global; !w || w.global !== w && w.window !== w && w.self !== w || (n = w); var x = Math.pow(2, 53) - 1, r = /\bOpera/; w = Object.prototype; var v = w.hasOwnProperty, F = w.toString, E = l(); "function" == typeof define && "object" == typeof define.amd && define.amd ? (n.platform = E, define(function () { return E })) : q &&
        p ? d(E, function (m, B) { q[B] = m }) : n.platform = E
}).call(this);
function buildIOSMeta() { for (var a = [{ name: "viewport", content: "width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" }, { name: "apple-mobile-web-app-capable", content: "yes" }, { name: "apple-mobile-web-app-status-bar-style", content: "black" }], c = 0; c < a.length; c++) { var b = document.createElement("meta"); b.name = a[c].name; b.content = a[c].content; var d = window.document.head.querySelector('meta[name="' + b.name + '"]'); d && d.parentNode.removeChild(d); window.document.head.appendChild(b) } }
function hideIOSFullscreenPanel() { jQuery(".xxx-ios-fullscreen-message").css("display", "none"); jQuery(".xxx-ios-fullscreen-scroll").css("display", "none"); jQuery(".xxx-game-iframe-full").removeClass("xxx-game-iframe-iphone-se") } function buildIOSFullscreenPanel() { jQuery("body").append('<div class="xxx-ios-fullscreen-message"><div class="xxx-ios-fullscreen-swipe"></div></div><div class="xxx-ios-fullscreen-scroll"></div>') }
function showIOSFullscreenPanel() { jQuery(".xxx-ios-fullscreen-message").css("display", "block"); jQuery(".xxx-ios-fullscreen-scroll").css("display", "block") }
function __iosResize() {
    window.scrollTo(0, 0); console.log(window.devicePixelRatio); console.log(window.innerWidth); console.log(window.innerHeight); if ("iPhone" === platform.product) switch (window.devicePixelRatio) {
        case 2: switch (window.innerWidth) {
            case 568: 320 !== window.innerHeight && jQuery(".xxx-game-iframe-full").addClass("xxx-game-iframe-iphone-se"); break; case 667: 375 === window.innerHeight ? hideIOSFullscreenPanel() : showIOSFullscreenPanel(); break; case 808: 414 === window.innerHeight ? hideIOSFullscreenPanel() : showIOSFullscreenPanel();
                break; default: hideIOSFullscreenPanel()
        }break; case 3: switch (window.innerWidth) { case 736: 414 === window.innerHeight ? hideIOSFullscreenPanel() : showIOSFullscreenPanel(); break; case 724: 375 === window.innerHeight ? hideIOSFullscreenPanel() : showIOSFullscreenPanel(); break; case 808: 414 === window.innerHeight ? hideIOSFullscreenPanel() : showIOSFullscreenPanel(); break; default: hideIOSFullscreenPanel() }break; default: hideIOSFullscreenPanel()
    }
} function iosResize() { __iosResize(); setTimeout(function () { __iosResize() }, 500) }
function iosInIframe() { try { return window.self !== window.top } catch (a) { return !0 } } function isIOSLessThen13() { var a = platform.os, c = a.family.toLowerCase(); a = parseFloat(a.version); return "ios" === c && 13 > a ? !0 : !1 } $(document).ready(function () { platform && "iPhone" === platform.product && "safari" === platform.name.toLowerCase() && isIOSLessThen13() && !iosInIframe() && (buildIOSFullscreenPanel(), buildIOSMeta()) });
jQuery(window).resize(function () { platform && "iPhone" === platform.product && "safari" === platform.name.toLowerCase() && isIOSLessThen13() && !iosInIframe() && iosResize() });
(function () {
    var a = "undefined" !== typeof window && "undefined" !== typeof window.document ? window.document : {}, c = "undefined" !== typeof module && module.exports, b = function () {
        for (var g, f = ["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "), "webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "), "webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
        "mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "), "msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")], h = 0, l = f.length, p = {}; h < l; h++)if ((g = f[h]) && g[1] in a) { for (h = 0; h < g.length; h++)p[f[0][h]] = g[h]; return p } return !1
    }(), d = { change: b.fullscreenchange, error: b.fullscreenerror }, e = {
        request: function (g) {
            return new Promise(function (f, h) {
                var l = function () {
                    this.off("change",
                        l); f()
                }.bind(this); this.on("change", l); g = g || a.documentElement; Promise.resolve(g[b.requestFullscreen]())["catch"](h)
            }.bind(this))
        }, exit: function () { return new Promise(function (g, f) { if (this.isFullscreen) { var h = function () { this.off("change", h); g() }.bind(this); this.on("change", h); Promise.resolve(a[b.exitFullscreen]())["catch"](f) } else g() }.bind(this)) }, toggle: function (g) { return this.isFullscreen ? this.exit() : this.request(g) }, onchange: function (g) { this.on("change", g) }, onerror: function (g) { this.on("error", g) },
        on: function (g, f) { var h = d[g]; h && a.addEventListener(h, f, !1) }, off: function (g, f) { var h = d[g]; h && a.removeEventListener(h, f, !1) }, raw: b
    }; b ? (Object.defineProperties(e, { isFullscreen: { get: function () { return !!a[b.fullscreenElement] } }, element: { enumerable: !0, get: function () { return a[b.fullscreenElement] } }, isEnabled: { enumerable: !0, get: function () { return !!a[b.fullscreenEnabled] } } }), c ? module.exports = e : window.screenfull = e) : c ? module.exports = { isEnabled: !1 } : window.screenfull = { isEnabled: !1 }
})();
function CTweenController() {
    this.tweenValue = function (a, c, b) { return a + b * (c - a) }; this.easeLinear = function (a, c, b, d) { return b * a / d + c }; this.easeInCubic = function (a, c, b, d) { d = (a /= d) * a * a; return c + b * d }; this.easeBackInQuart = function (a, c, b, d) { d = (a /= d) * a; return c + b * (2 * d * d + 2 * d * a + -3 * d) }; this.easeInBack = function (a, c, b, d) { return b * (a /= d) * a * (2.70158 * a - 1.70158) + c }; this.easeOutCubic = function (a, c, b, d) { return b * ((a = a / d - 1) * a * a + 1) + c }; this.getTrajectoryPoint = function (a, c) {
        var b = new createjs.Point, d = (1 - a) * (1 - a), e = a * a; b.x = d *
            c.start.x + 2 * (1 - a) * a * c.traj.x + e * c.end.x; b.y = d * c.start.y + 2 * (1 - a) * a * c.traj.y + e * c.end.y; return b
    }
}
function CSpriteLibrary() {
    var abc = "";
    var a = {}, c, b, d, e, g, f; this.init = function (h, l, p) { c = {}; d = b = 0; e = h; g = l; f = p }; this.addSprite = function (h, l) { if (!a.hasOwnProperty(h)) { var p = new Image; a[h] = c[h] = { szPath: l, oSprite: p, bLoaded: !1 }; b++ } }; this.getSprite = function (h) { return a.hasOwnProperty(h) ? a[h].oSprite : null }; this._onSpritesLoaded = function () { b = 0; g.call(f) }; this._onSpriteLoaded = function () { e.call(f); ++d === b && this._onSpritesLoaded() }; this.loadSprites = function () {
        for (var h in c){
            abc += c[h].szPath + ","
            c[h].oSprite.oSpriteLibrary = this, c[h].oSprite.szKey =
            h, c[h].oSprite.onload = function () { this.oSpriteLibrary.setLoaded(this.szKey); this.oSpriteLibrary._onSpriteLoaded(this.szKey) }, c[h].oSprite.onerror = function (l) { var p = l.currentTarget; setTimeout(function () { c[p.szKey].oSprite.src = c[p.szKey].szPath }, 500) }, c[h].oSprite.src = c[h].szPath
        }
        abc;
    }; this.setLoaded = function (h) { a[h].bLoaded = !0 }; this.isLoaded = function (h) { return a[h].bLoaded }; this.getNumSprites = function () { return b }
}
var CANVAS_WIDTH = 1200, CANVAS_HEIGHT = 600, EDGEBOARD_X = 230, EDGEBOARD_Y = 50, FPS = 30, FPS_TIME = 1E3 / FPS, DISABLE_SOUND_MOBILE = !1, SOUNDTRACK_VOLUME_IN_GAME = .1, PRIMARY_FONT = "ihatcs", SCORE_ITEM_NAME = "rockpaperscissor_score", STATE_LOADING = 0, STATE_MENU = 1, STATE_HELP = 2, STATE_GAME = 3, ON_MOUSE_DOWN = 0, ON_MOUSE_UP = 1, ON_MOUSE_OVER = 2, ON_MOUSE_OUT = 3, ON_DRAG_START = 4, ON_DRAG_END = 5, ROCK = 0, PAPER = 1, SCISSORS = 2, THROW_MATCHES = [[SCISSORS, PAPER, ROCK], [ROCK, SCISSORS, PAPER], [PAPER, ROCK, SCISSORS]], WIN_INDEX = 0, LOSE_INDEX = 1, OCCURENCES,
    RAILS_SPEEDS = [6, -9, 7], DUCK_SCORE = [1, 1, 1, -1], DUCK_TIME = [100, 100, 100, -100], GAME_TIME = 60, ENABLE_FULLSCREEN, ENABLE_CHECK_ORIENTATION;
function CPreloader() {
    var a, c, b, d, e, g, f, h, l; this._init = function () { s_oSpriteLibrary.init(this._onImagesLoaded, this._onAllImagesLoaded, this); s_oSpriteLibrary.addSprite("progress_bar", "sprites/progress_bar.png"); s_oSpriteLibrary.addSprite("bg_preloader", "sprites/bg_preloader.jpg"); s_oSpriteLibrary.addSprite("200x200", "sprites/200x200.jpg"); s_oSpriteLibrary.loadSprites(); l = new createjs.Container; s_oStage.addChild(l) }; this.unload = function () { l.removeAllChildren() }; this._onImagesLoaded = function () { };
    this._onAllImagesLoaded = function () { this.attachSprites(); s_oMain.preloaderReady() }; this.attachSprites = function () {
        var p = createBitmap(s_oSpriteLibrary.getSprite("bg_preloader")); l.addChild(p); p = s_oSpriteLibrary.getSprite("200x200"); f = createBitmap(p); f.regX = .5 * p.width; f.regY = .5 * p.height; f.x = CANVAS_WIDTH / 2; f.y = CANVAS_HEIGHT / 2 - 80; l.addChild(f); h = new createjs.Shape; h.graphics.beginFill("rgba(0,0,0,0.01)").drawRoundRect(f.x - 100, f.y - 100, 200, 200, 10); l.addChild(h); f.mask = h; p = s_oSpriteLibrary.getSprite("progress_bar");
        d = createBitmap(p); d.x = CANVAS_WIDTH / 2 - p.width / 2; d.y = CANVAS_HEIGHT / 2 + 50; l.addChild(d); a = p.width; c = p.height; e = new createjs.Shape; e.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(d.x, d.y, 1, c); l.addChild(e); d.mask = e; b = new createjs.Text("", "30px " + PRIMARY_FONT, "#fff"); b.x = CANVAS_WIDTH / 2; b.y = CANVAS_HEIGHT / 2 + 100; b.textBaseline = "alphabetic"; b.textAlign = "center"; l.addChild(b); g = new createjs.Shape; g.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); l.addChild(g); createjs.Tween.get(g).to({ alpha: 0 },
            500).call(function () { createjs.Tween.removeTweens(g); l.removeChild(g) })
    }; this.refreshLoader = function (p) { b.text = p + "%"; 100 === p && (b.visible = !1, d.visible = !1, s_oMain._onRemovePreloader()); e.graphics.clear(); p = Math.floor(p * a / 100); e.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(d.x, d.y, p, c) }; this._init()
} var s_bLandscape = !0, s_iScaleFactor = 1, s_bIsIphone = !1, s_iOffsetX, s_iOffsetY, s_bFocus = !0;
(function (a) {
    (jQuery.browser = jQuery.browser || {}).mobile = /android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,
        4))
})(navigator.userAgent || navigator.vendor || window.opera); $(window).resize(function () { sizeHandler() }); function trace(a) { console.log(a) } function isChrome() { return /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor) } function isIpad() { var a = -1 !== navigator.userAgent.toLowerCase().indexOf("ipad"); return !a && navigator.userAgent.match(/Mac/) && navigator.maxTouchPoints && 2 < navigator.maxTouchPoints ? !0 : a } function isMobile() { return isIpad() ? !0 : jQuery.browser.mobile }
function isIOS() { for (var a = "iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";"); a.length;)if (navigator.platform === a.pop()) return s_bIsIphone = !0; return s_bIsIphone = !1 }
function getSize(a) {
    var c = a.toLowerCase(), b = window.document, d = b.documentElement; if (void 0 === window["inner" + a]) a = d["client" + a]; else if (window["inner" + a] != d["client" + a]) {
        var e = b.createElement("body"); e.id = "vpw-test-b"; e.style.cssText = "overflow:scroll"; var g = b.createElement("div"); g.id = "vpw-test-d"; g.style.cssText = "position:absolute;top:-1000px"; g.innerHTML = "<style>@media(" + c + ":" + d["client" + a] + "px){body#vpw-test-b div#vpw-test-d{" + c + ":7px!important}}</style>"; e.appendChild(g); d.insertBefore(e, b.head);
        a = 7 == g["offset" + a] ? d["client" + a] : window["inner" + a]; d.removeChild(e)
    } else a = window["inner" + a]; return a
} window.addEventListener("orientationchange", onOrientationChange); function onOrientationChange() { window.matchMedia("(orientation: portrait)").matches && sizeHandler(); window.matchMedia("(orientation: landscape)").matches && sizeHandler() } function getIOSWindowHeight() { return document.documentElement.clientWidth / window.innerWidth * window.innerHeight }
function getHeightOfIOSToolbars() { var a = (0 === window.orientation ? screen.height : screen.width) - getIOSWindowHeight(); return 1 < a ? a : 0 }
function sizeHandler() {
    window.scrollTo(0, 1); if ($("#canvas")) {
        var a = null !== platform.name && "safari" === platform.name.toLowerCase() ? getIOSWindowHeight() : getSize("Height"); var c = getSize("Width"); s_bFocus && _checkOrientation(c, a); var b = Math.min(a / CANVAS_HEIGHT, c / CANVAS_WIDTH); s_bLandscape = c > a ? !0 : !1; var d = Math.round(CANVAS_WIDTH * b); b = Math.round(CANVAS_HEIGHT * b); if (b < a) { var e = a - b; b += e; d += CANVAS_WIDTH / CANVAS_HEIGHT * e } else d < c && (e = c - d, d += e, b += CANVAS_HEIGHT / CANVAS_WIDTH * e); e = a / 2 - b / 2; var g = c / 2 - d / 2, f = CANVAS_WIDTH /
            d; if (g * f < -EDGEBOARD_X || e * f < -EDGEBOARD_Y) b = Math.min(a / (CANVAS_HEIGHT - 2 * EDGEBOARD_Y), c / (CANVAS_WIDTH - 2 * EDGEBOARD_X)), d = Math.round(CANVAS_WIDTH * b), b = Math.round(CANVAS_HEIGHT * b), e = (a - b) / 2, g = (c - d) / 2, f = CANVAS_WIDTH / d; s_iOffsetX = -1 * g * f; s_iOffsetY = -1 * e * f; 0 <= e && (s_iOffsetY = 0); 0 <= g && (s_iOffsetX = 0); null !== s_oInterface && s_oInterface.refreshButtonPos(); null !== s_oMenu && s_oMenu.refreshButtonPos(); s_iScaleFactor = Math.min(d / CANVAS_WIDTH, b / CANVAS_HEIGHT); s_bIsIphone && s_oStage ? (canvas = document.getElementById("canvas"),
                s_oStage.canvas.width = 2 * d, s_oStage.canvas.height = 2 * b, canvas.style.width = d + "px", canvas.style.height = b + "px", s_iScaleFactor = 2 * Math.min(d / CANVAS_WIDTH, b / CANVAS_HEIGHT), s_oStage.scaleX = s_oStage.scaleY = s_iScaleFactor) : s_bMobile || isChrome() ? ($("#canvas").css("width", d + "px"), $("#canvas").css("height", b + "px")) : s_oStage && (s_oStage.canvas.width = d, s_oStage.canvas.height = b, s_oStage.scaleX = s_oStage.scaleY = s_iScaleFactor); 0 > e || (e = (a - b) / 2); $("#canvas").css("top", e + "px"); $("#canvas").css("left", g + "px"); fullscreenHandler()
    }
}
function _checkOrientation(a, c) {
    s_bMobile && ENABLE_CHECK_ORIENTATION && (a > c ? "landscape" === $(".orientation-msg-container").attr("data-orientation") ? ($(".orientation-msg-container").css("display", "none"), s_oMain.startUpdate()) : ($(".orientation-msg-container").css("display", "block"), s_oMain.stopUpdate()) : "portrait" === $(".orientation-msg-container").attr("data-orientation") ? ($(".orientation-msg-container").css("display", "none"), s_oMain.startUpdate()) : ($(".orientation-msg-container").css("display", "block"),
        s_oMain.stopUpdate()))
} function createBitmap(a, c, b) { var d = new createjs.Bitmap(a), e = new createjs.Shape; c && b ? e.graphics.beginFill("#fff").drawRect(0, 0, c, b) : e.graphics.beginFill("#ff0").drawRect(0, 0, a.width, a.height); d.hitArea = e; return d } function createSprite(a, c, b, d, e, g) { a = null !== c ? new createjs.Sprite(a, c) : new createjs.Sprite(a); c = new createjs.Shape; c.graphics.beginFill("#000000").drawRect(-b, -d, e, g); a.hitArea = c; return a }
function randomFloatBetween(a, c, b) { "undefined" === typeof b && (b = 2); return parseFloat(Math.min(a + Math.random() * (c - a), c).toFixed(b)) } function rotateVector2D(a, c) { var b = c.getX() * Math.cos(a) + c.getY() * Math.sin(a), d = c.getX() * -Math.sin(a) + c.getY() * Math.cos(a); c.set(b, d) } function tweenVectorsOnX(a, c, b) { return a + b * (c - a) } this.tweenVectors = function (a, c, b) { var d = new CVector2; d.set(a.getX() + b * (c.getX() - a.getX()), a.getY() + b * (c.getY() - a.getY())); return d };
function distance(a, c) { return Math.sqrt((c.x - a.x) * (c.x - a.x) + (c.y - a.y) * (c.y - a.y)) } function shuffle(a) { for (var c = a.length, b, d; 0 !== c;)d = Math.floor(Math.random() * c), --c, b = a[c], a[c] = a[d], a[d] = b; return a } function bubbleSort(a) { do { var c = !1; for (var b = 0; b < a.length - 1; b++)a[b] > a[b + 1] && (c = a[b], a[b] = a[b + 1], a[b + 1] = c, c = !0) } while (c) } function compare(a, c) { return a.index > c.index ? -1 : a.index < c.index ? 1 : 0 } function easeLinear(a, c, b, d) { return b * a / d + c } function easeInQuad(a, c, b, d) { return b * (a /= d) * a + c }
function easeInSine(a, c, b, d) { return -b * Math.cos(a / d * (Math.PI / 2)) + b + c } function easeInCubic(a, c, b, d) { return b * (a /= d) * a * a + c } function getTrajectoryPoint(a, c) { var b = new createjs.Point, d = (1 - a) * (1 - a), e = a * a; b.x = d * c.start.x + 2 * (1 - a) * a * c.traj.x + e * c.end.x; b.y = d * c.start.y + 2 * (1 - a) * a * c.traj.y + e * c.end.y; return b } function formatTime(a) { a /= 1E3; var c = Math.floor(a / 60); a = Math.floor(a - 60 * c); var b = ""; b = 10 > c ? b + ("0" + c + ":") : b + (c + ":"); return 10 > a ? b + ("0" + a) : b + a } function degreesToRadians(a) { return a * Math.PI / 180 }
function checkRectCollision(a, c) { var b = getBounds(a, .9); var d = getBounds(c, .98); return calculateIntersection(b, d) } function collisionWithCircle(a, c, b) { var d = a.getX() - c.getX(); a = a.getY() - c.getY(); return Math.sqrt(d * d + a * a) < PLAYER_RADIUS * b + CELL_SIZE * b ? !0 : !1 }
function calculateIntersection(a, c) { var b, d, e, g; var f = a.x + (b = a.width / 2); var h = a.y + (d = a.height / 2); var l = c.x + (e = c.width / 2); var p = c.y + (g = c.height / 2); f = Math.abs(f - l) - (b + e); h = Math.abs(h - p) - (d + g); return 0 > f && 0 > h ? (f = Math.min(Math.min(a.width, c.width), -f), h = Math.min(Math.min(a.height, c.height), -h), { x: Math.max(a.x, c.x), y: Math.max(a.y, c.y), width: f, height: h, rect1: a, rect2: c }) : null }
function getBounds(a, c) {
    var b = { x: Infinity, y: Infinity, width: 0, height: 0 }; if (a instanceof createjs.Container) { b.x2 = -Infinity; b.y2 = -Infinity; var d = a.children, e = d.length, g; for (g = 0; g < e; g++) { var f = getBounds(d[g], 1); f.x < b.x && (b.x = f.x); f.y < b.y && (b.y = f.y); f.x + f.width > b.x2 && (b.x2 = f.x + f.width); f.y + f.height > b.y2 && (b.y2 = f.y + f.height) } Infinity == b.x && (b.x = 0); Infinity == b.y && (b.y = 0); Infinity == b.x2 && (b.x2 = 0); Infinity == b.y2 && (b.y2 = 0); b.width = b.x2 - b.x; b.height = b.y2 - b.y; delete b.x2; delete b.y2 } else {
        if (a instanceof createjs.Bitmap) {
            e =
            a.sourceRect || a.image; g = e.width * c; var h = e.height * c
        } else if (a instanceof createjs.Sprite) if (a.spriteSheet._frames && a.spriteSheet._frames[a.currentFrame] && a.spriteSheet._frames[a.currentFrame].image) { e = a.spriteSheet.getFrame(a.currentFrame); g = e.rect.width; h = e.rect.height; d = e.regX; var l = e.regY } else b.x = a.x || 0, b.y = a.y || 0; else b.x = a.x || 0, b.y = a.y || 0; d = d || 0; g = g || 0; l = l || 0; h = h || 0; b.regX = d; b.regY = l; e = a.localToGlobal(0 - d, 0 - l); f = a.localToGlobal(g - d, h - l); g = a.localToGlobal(g - d, 0 - l); d = a.localToGlobal(0 - d, h - l); b.x =
            Math.min(Math.min(Math.min(e.x, f.x), g.x), d.x); b.y = Math.min(Math.min(Math.min(e.y, f.y), g.y), d.y); b.width = Math.max(Math.max(Math.max(e.x, f.x), g.x), d.x) - b.x; b.height = Math.max(Math.max(Math.max(e.y, f.y), g.y), d.y) - b.y
    } return b
} function NoClickDelay(a) { this.element = a; window.Touch && this.element.addEventListener("touchstart", this, !1) } function shuffle(a) { for (var c = a.length, b, d; 0 < c;)d = Math.floor(Math.random() * c), c--, b = a[c], a[c] = a[d], a[d] = b; return a }
NoClickDelay.prototype = {
    handleEvent: function (a) { switch (a.type) { case "touchstart": this.onTouchStart(a); break; case "touchmove": this.onTouchMove(a); break; case "touchend": this.onTouchEnd(a) } }, onTouchStart: function (a) { a.preventDefault(); this.moved = !1; this.element.addEventListener("touchmove", this, !1); this.element.addEventListener("touchend", this, !1) }, onTouchMove: function (a) { this.moved = !0 }, onTouchEnd: function (a) {
        this.element.removeEventListener("touchmove", this, !1); this.element.removeEventListener("touchend",
            this, !1); if (!this.moved) { a = document.elementFromPoint(a.changedTouches[0].clientX, a.changedTouches[0].clientY); 3 == a.nodeType && (a = a.parentNode); var c = document.createEvent("MouseEvents"); c.initEvent("click", !0, !0); a.dispatchEvent(c) }
    }
};
(function () {
    function a(b) { var d = { focus: "visible", focusin: "visible", pageshow: "visible", blur: "hidden", focusout: "hidden", pagehide: "hidden" }; b = b || window.event; b.type in d ? document.body.className = d[b.type] : (document.body.className = this[c] ? "hidden" : "visible", "hidden" === document.body.className ? (s_oMain.stopUpdate(), s_bFocus = !1) : (s_oMain.startUpdate(), s_bFocus = !0)) } var c = "hidden"; c in document ? document.addEventListener("visibilitychange", a) : (c = "mozHidden") in document ? document.addEventListener("mozvisibilitychange",
        a) : (c = "webkitHidden") in document ? document.addEventListener("webkitvisibilitychange", a) : (c = "msHidden") in document ? document.addEventListener("msvisibilitychange", a) : "onfocusin" in document ? document.onfocusin = document.onfocusout = a : window.onpageshow = window.onpagehide = window.onfocus = window.onblur = a
})(); function ctlArcadeResume() { null !== s_oMain && s_oMain.startUpdate() } function ctlArcadePause() { null !== s_oMain && s_oMain.stopUpdate() }
function getParamValue(a) { for (var c = window.location.search.substring(1).split("&"), b = 0; b < c.length; b++) { var d = c[b].split("="); if (d[0] == a) return d[1] } } function playSound(a, c, b) { return !1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile ? (s_aSounds[a].play(), s_aSounds[a].volume(c), s_aSounds[a].loop(b), s_aSounds[a]) : null } function stopSound(a) { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || s_aSounds[a].stop() }
function fadeStopSound(a, c) { if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) s_aSounds[a].once("fade", function () { stopSound(a) }), s_aSounds[a].fade(s_aSounds[a].volume(), 0, c) } function setVolume(a, c) { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || s_aSounds[a].volume(c) } function setMute(a, c) { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || s_aSounds[a].mute(c) } function saveItem(a, c) { s_bStorageAvailable && localStorage.setItem(a, c) } function getItem(a) { return s_bStorageAvailable ? localStorage.getItem(a) : null }
function fullscreenHandler() { ENABLE_FULLSCREEN && screenfull.isEnabled && (s_bFullscreen = screenfull.isFullscreen, null !== s_oInterface && s_oInterface.resetFullscreenBut(), null !== s_oMenu && s_oMenu.resetFullscreenBut()) } if (screenfull.isEnabled) screenfull.on("change", function () { s_bFullscreen = screenfull.isFullscreen; null !== s_oInterface && s_oInterface.resetFullscreenBut(); null !== s_oMenu && s_oMenu.resetFullscreenBut() });

var abcd="";
function CMain(a) {
    var c, b = 0, d = 0, e = STATE_LOADING, g, f; this.initContainer = function () {
        s_oCanvas = document.getElementById("canvas"); s_oStage = new createjs.Stage(s_oCanvas); createjs.Touch.enable(s_oStage, !0); s_oStage.preventSelection = !1; s_bMobile = isMobile(); !1 === s_bMobile && s_oStage.enableMouseOver(20); s_iPrevTime = (new Date).getTime(); createjs.Ticker.addEventListener("tick", this._update); createjs.Ticker.framerate = FPS; createjs.Ticker.timingMode = createjs.Ticker.RAF_SYNCHED; navigator.userAgent.match(/Windows Phone/i) &&
            (DISABLE_SOUND_MOBILE = !0); s_oSpriteLibrary = new CSpriteLibrary; g = new CPreloader
    }; this.preloaderReady = function () { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || this._initSounds(); this._loadImages(); c = !0 }; this.soundLoaded = function () { b++; g.refreshLoader(Math.floor(b / d * 100)) }; this._initSounds = function () {
        Howler.mute(!s_bAudioActive); s_aSoundsInfo = []; s_aSoundsInfo.push({ path: "sounds/", filename: "throw", loop: !1, volume: 1, ingamename: "throw" });
        s_aSoundsInfo.push({ path: "sounds/", filename: "click", loop: !1, volume: 1, ingamename: "click" }); s_aSoundsInfo.push({ path: "sounds/", filename: "round_won", loop: !1, volume: 1, ingamename: "round_won" }); s_aSoundsInfo.push({ path: "sounds/", filename: "round_lost", loop: !1, volume: 1, ingamename: "round_lost" }); s_aSoundsInfo.push({ path: "sounds/", filename: "soundtrack", loop: !0, volume: 1, ingamename: "soundtrack" }); d += s_aSoundsInfo.length; s_aSounds = []; for (var l = 0; l < s_aSoundsInfo.length; l++)this.tryToLoadSound(s_aSoundsInfo[l],
            !1)
    }; this.tryToLoadSound = function (l, p) {
        abcd+=l.path+l.filename+".mp3,";
        setTimeout(function () {
            s_aSounds[l.ingamename] = new Howl({
                src: [l.path + l.filename + ".mp3"], autoplay: !1, preload: !0, loop: l.loop, volume: l.volume, onload: s_oMain.soundLoaded, onloaderror: function (n, q) { for (var w = 0; w < s_aSoundsInfo.length; w++)if (n === s_aSounds[s_aSoundsInfo[w].ingamename]._sounds[0]._id) { s_oMain.tryToLoadSound(s_aSoundsInfo[w], !0); break } }, onplayerror: function (n) {
                    for (var q = 0; q < s_aSoundsInfo.length; q++)if (n === s_aSounds[s_aSoundsInfo[q].ingamename]._sounds[0]._id) {
                        s_aSounds[s_aSoundsInfo[q].ingamename].once("unlock",
                            function () { s_aSounds[s_aSoundsInfo[q].ingamename].play(); "soundtrack" === s_aSoundsInfo[q].ingamename && null !== s_oGame && setVolume("soundtrack", SOUNDTRACK_VOLUME_IN_GAME) }); break
                    }
                }
            })
        }, p ? 200 : 0)
    }; this._loadImages = function () {
        s_oSpriteLibrary.init(this._onImagesLoaded, this._onAllImagesLoaded, this); s_oSpriteLibrary.addSprite("bg_menu", "sprites/bg_menu.jpg"); s_oSpriteLibrary.addSprite("bg_game", "sprites/bg_game.jpg"); s_oSpriteLibrary.addSprite("but_exit", "sprites/but_exit.png"); s_oSpriteLibrary.addSprite("audio_icon",
            "sprites/audio_icon.png"); s_oSpriteLibrary.addSprite("but_play", "sprites/but_play.png"); s_oSpriteLibrary.addSprite("but_home", "sprites/but_home.png"); s_oSpriteLibrary.addSprite("msg_box", "sprites/msg_box.png"); s_oSpriteLibrary.addSprite("but_credits", "sprites/but_credits.png"); s_oSpriteLibrary.addSprite("logo_ctl", "sprites/logo_ctl.png"); s_oSpriteLibrary.addSprite("but_fullscreen", "sprites/but_fullscreen.png"); s_oSpriteLibrary.addSprite("but_solo", "sprites/but_solo.png"); s_oSpriteLibrary.addSprite("but_multi",
                "sprites/but_multi.png"); s_oSpriteLibrary.addSprite("but_yes", "sprites/but_yes.png"); s_oSpriteLibrary.addSprite("but_left", "sprites/arrow_left.png"); s_oSpriteLibrary.addSprite("but_right", "sprites/arrow_right.png"); s_oSpriteLibrary.addSprite("but_no", "sprites/but_no.png"); s_oSpriteLibrary.addSprite("but_skip", "sprites/but_nextgame.png"); s_oSpriteLibrary.addSprite("box_p1", "sprites/player1-box.png"); s_oSpriteLibrary.addSprite("box_p2", "sprites/player2-box.png"); s_oSpriteLibrary.addSprite("box_record",
                    "sprites/record-box.png"); s_oSpriteLibrary.addSprite("history_empty", "sprites/match-count.png"); s_oSpriteLibrary.addSprite("history_win", "sprites/victory-count.png"); s_oSpriteLibrary.addSprite("game_section", "sprites/game-section.png"); s_oSpriteLibrary.addSprite("help_panel", "sprites/bg_help.png"); s_oSpriteLibrary.addSprite("help_content", "sprites/bg_help_content.png"); s_oSpriteLibrary.addSprite("p1_0", "sprites/p1-rock.png"); s_oSpriteLibrary.addSprite("p1_1", "sprites/p1-paper.png");
        s_oSpriteLibrary.addSprite("p1_2", "sprites/p1-scissors.png"); s_oSpriteLibrary.addSprite("p2_0", "sprites/p2-rock.png"); s_oSpriteLibrary.addSprite("p2_1", "sprites/p2-paper.png"); s_oSpriteLibrary.addSprite("p2_2", "sprites/p2-scissors.png"); s_oSpriteLibrary.addSprite("throw_0", "sprites/rock-throw.png"); s_oSpriteLibrary.addSprite("throw_1", "sprites/paper-throw.png"); s_oSpriteLibrary.addSprite("throw_2", "sprites/scissors-throw.png"); d += s_oSpriteLibrary.getNumSprites(); s_oSpriteLibrary.loadSprites()
    };
    this._onImagesLoaded = function () { b++; g.refreshLoader(Math.floor(b / d * 100)) }; this._onRemovePreloader = function () { try { saveItem("ls_available", "ok") } catch (l) { s_bStorageAvailable = !1 } g.unload(); s_oSoundTrack = playSound("soundtrack", 1, !0); this.gotoMenu() }; this._onAllImagesLoaded = function () { }; this.onAllPreloaderImagesLoaded = function () { this._loadImages() }; this.gotoMenu = function () { new CMenu; e = STATE_MENU }; this.gotoGame = function () { f = new CGame(h); e = STATE_GAME }; this.stopUpdateNoBlock = function () {
        c = !1; createjs.Ticker.paused =
            !0
    }; this.startUpdateNoBlock = function () { s_iPrevTime = (new Date).getTime(); c = !0; createjs.Ticker.paused = !1 }; this.stopUpdate = function () { c = !1; createjs.Ticker.paused = !0; $("#block_game").css("display", "block"); !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || Howler.mute(!0) }; this.startUpdate = function () { s_iPrevTime = (new Date).getTime(); c = !0; createjs.Ticker.paused = !1; $("#block_game").css("display", "none"); (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) && s_bAudioActive && Howler.mute(!1) }; this._update = function (l) {
        if (!1 !==
            c) { var p = (new Date).getTime(); s_iTimeElaps = p - s_iPrevTime; s_iCntTime += s_iTimeElaps; s_iCntFps++; s_iPrevTime = p; 1E3 <= s_iCntTime && (s_iCurFps = s_iCntFps, s_iCntTime -= 1E3, s_iCntFps = 0); e === STATE_GAME && f.update(); s_oStage.update(l) }
    }; s_oMain = this; var h = a; ENABLE_FULLSCREEN = a.fullscreen; ENABLE_CHECK_ORIENTATION = a.check_orientation; s_bAudioActive = a.audio_enable_on_startup; this.initContainer()
}
var s_bMobile, s_bAudioActive = !1, s_iCntTime = 0, s_iTimeElaps = 0, s_iPrevTime = 0, s_iCntFps = 0, s_iCurFps = 0, s_oDrawLayer, s_oStage, s_oMain, s_oSpriteLibrary, s_oSoundTrack = null, s_oCanvas, s_bFullscreen = !1, s_aSounds, s_aSoundsInfo, s_bStorageAvailable = !0, s_iBestScore = 0;
CTLText.prototype = {
    constructor: CTLText, __autofit: function () { if (this._bFitText) { for (var a = this._iStartingFontSize; (this._oText.getBounds().height > this._iHeight - 2 * this._iPaddingV || this._oText.getBounds().width > this._iWidth - 2 * this._iPaddingH) && !(a--, this._oText.font = a + "px " + this._szFont, this._oText.lineHeight = Math.round(a * this._fLineHeightFactor), this.__updateY(), this.__verticalAlign(), 8 > a);); this._iFontSize = a } }, __verticalAlign: function () {
        if (this._bVerticalAlign) {
            var a = this._oText.getBounds().height;
            this._oText.y -= (a - this._iHeight) / 2 + this._iPaddingV
        }
    }, __updateY: function () { this._oText.y = this._y + this._iPaddingV; switch (this._oText.textBaseline) { case "middle": this._oText.y += this._oText.lineHeight / 2 + (this._iFontSize * this._fLineHeightFactor - this._iFontSize) } }, __createText: function (a) {
        this._bDebug && (this._oDebugShape = new createjs.Shape, this._oDebugShape.graphics.beginFill("rgba(255,0,0,0.5)").drawRect(this._x, this._y, this._iWidth, this._iHeight), this._oContainer.addChild(this._oDebugShape)); this._oText =
            new createjs.Text(a, this._iFontSize + "px " + this._szFont, this._szColor); this._oText.textBaseline = "middle"; this._oText.lineHeight = Math.round(this._iFontSize * this._fLineHeightFactor); this._oText.textAlign = this._szAlign; this._oText.lineWidth = this._bMultiline ? this._iWidth - 2 * this._iPaddingH : null; switch (this._szAlign) { case "center": this._oText.x = this._x + this._iWidth / 2; break; case "left": this._oText.x = this._x + this._iPaddingH; break; case "right": this._oText.x = this._x + this._iWidth - this._iPaddingH }this._oContainer.addChild(this._oText);
        this.refreshText(a)
    }, setY: function (a) { this._y = a; this._oText.y = a; this._oDebugShape && (this._oDebugShape.y = a - this._iHeight) }, setX: function (a) { this._x = a; this._oText.x = a; this._oDebugShape && (this._oDebugShape.x = a - this._iWidth) }, setVerticalAlign: function (a) { this._bVerticalAlign = a }, setOutline: function (a) { null !== this._oText && (this._oText.outline = a) }, setShadow: function (a, c, b, d) { null !== this._oText && (this._oText.shadow = new createjs.Shadow(a, c, b, d)) }, setColor: function (a) { this._oText.color = a }, setAlpha: function (a) {
        this._oText.alpha =
        a; this._oDebugShape && (this._oDebugShape.alpha = a)
    }, setVisible: function (a) { this._oText.visible = a; this._oDebugShape && (this._oDebugShape.visible = a) }, isVisible: function () { return this._oText.visible }, setFontSize: function (a) { this._iFontSize = this._iStartingFontSize = a; this.refreshText(this._oText.text) }, removeTweens: function () { createjs.Tween.removeTweens(this._oText) }, getText: function () { return this._oText }, getMsg: function () { return this._oText.text }, getX: function () { return this._x }, getY: function () { return this._y },
    getColor: function () { return this._oText.color }, getFontSize: function () { return this._iFontSize }, refreshText: function (a) { "" === a && (a = " "); null === this._oText && this.__createText(a); this._oText.text = a; this._oText.font = this._iStartingFontSize + "px " + this._szFont; this._oText.lineHeight = Math.round(this._iStartingFontSize * this._fLineHeightFactor); this.__autofit(); this.__updateY(); this.__verticalAlign() }
};
function CTLText(a, c, b, d, e, g, f, h, l, p, n, q, w, x, r, v, F) { this._oContainer = a; this._x = c; this._y = b; this._iWidth = d; this._iHeight = e; this._bMultiline = v; this._iStartingFontSize = this._iFontSize = g; this._szAlign = f; this._szColor = h; this._szFont = l; this._iPaddingH = n; this._iPaddingV = q; this._bVerticalAlign = r; this._bFitText = x; this._bDebug = F; this._oDebugShape = null; this._fLineHeightFactor = p; this._oText = null; w && this.__createText(w) }
function CHistoryPanel(a, c, b, d) {
    var e, g, f, h; this.init = function (l, p, n, q) { f = q; e = new createjs.Container; "Player One" === n ? (q = createBitmap(s_oSpriteLibrary.getSprite("box_p1")), e.x = -600) : (q = createBitmap(s_oSpriteLibrary.getSprite("box_p2")), e.x = 1500); e.addChild(q); q = e.getBounds().width / 2 - 90; new CTLText(e, q, 20, 180, 40, 36, "center", "#fff", PRIMARY_FONT, 1.1, 2, 2, n, !0, !0, !1, !1); g = []; n = q + 10; for (q = 0; 3 > q; q++) { var w = new CMatchCount(e, n, 82); n += 60; g.push(w) } s_oStage.addChild(e); e.y = p; h = l; this.show() }; this.unload = function () { s_oStage.removeChild(e) };
    this.show = function () { (new createjs.Tween.get(e)).to({ x: h }, 600, createjs.Ease.cubicOut) }; this.win = function () { g[s_oGame.getPlayerScore(f)].setWin() }; this.init(a, c, b, d)
} function CPlayer(a, c) { var b, d; this.init = function (e, g) { b = 0 === g ? new CHistoryPanel(230, 359, e, g) : new CHistoryPanel(728, 359, e, g); d = new CSelectThrow(g); d.hide() }; this.hasSelected = function (e) { }; this.roundWon = function () { b.win() }; this.showChoosePanel = function () { d.show() }; this.unload = function () { d.unload(); b.unload() }; this.init(a, c) }
function CSelectPlayers() {
    var a, c, b, d; this.init = function () {
        var e = s_oSpriteLibrary.getSprite("game_section"); a = new createjs.Container; a.x = CANVAS_WIDTH / 2; a.y = CANVAS_HEIGHT; a.regX = e.width / 2; s_oStage.addChild(a); c = createBitmap(e); a.addChild(c); var g = e.width / 2; new CTLText(a, e.width / 2 - g / 2, 20, g, 60, 56, "center", "#fff", PRIMARY_FONT, 1.1, 2, 2, TEXT_SELECT_PLAYERS, !0, !0, !1, !1); e = s_oSpriteLibrary.getSprite("but_solo"); b = new CGfxButton(229, 144, e, a); b.addEventListener(ON_MOUSE_UP, this.soloSelected, this); e = s_oSpriteLibrary.getSprite("but_multi");
        d = new CGfxButton(687, 144, e, a); d.addEventListener(ON_MOUSE_UP, this.multiSelected, this); this.show()
    }; this.show = function () { d.disable(); b.disable(); (new createjs.Tween.get(a)).to({ y: 85 }, 500, createjs.Ease.cubicOut).call(function () { d.enable(); b.enable() }) }; this.unload = function () { d.unload(); b.unload(); s_oStage.removeChild(a) }; this.soloSelected = function () { this.unload(); s_oGame.initGameSolo() }; this.multiSelected = function () { this.unload(); s_oGame.initGameMulti() }; this.init()
}
function CGameSection() {
    var a, c, b, d, e, g, f, h, l, p, n, q, w, x = !1, r, v; this.init = function () {
        s_oGameSection = this; v = playSound("throw"); v.stop(); var E = s_oSpriteLibrary.getSprite("game_section"); a = new createjs.Container; a.x = CANVAS_WIDTH / 2; a.y = 85; a.regX = E.width / 2; s_oStage.addChild(a); var m = createBitmap(E); a.addChild(m); f = new createjs.Container; a.addChild(f); m = 90; var B = 30; b = new createjs.Container; b.x = m; b.y = B; a.addChild(b); r = new CTLText(b, 0, 0, 200, 80, 60, "center", "#fff", PRIMARY_FONT, 1.1, 2, 2, " ", !0, !0, !1, !1); var H =
            100; m = E.width / 2 - H / 2; d = new CTLText(a, m, 80, H, 80, 70, "center", "#c84343", PRIMARY_FONT, 1.1, 2, 2, TEXT_VS, !0, !0, !1, !1); d.setVisible(!1); H = 400; m = E.width / 2 - H / 2; e = new CTLText(a, m, 230, H, 40, 40, "center", "#fff", PRIMARY_FONT, 1.1, 2, 2, TEXT_CONTINUE, !0, !0, !1, !1); e.setVisible(!1); h = []; l = []; w = !1; for (m = 0; 3 > m; m++)oSprite = createBitmap(s_oSpriteLibrary.getSprite("p1_" + m)), oSprite.y = 50 + oSprite.getBounds().height / 2, oSprite.x = 50 + oSprite.getBounds().width / 2, oSprite.regX = oSprite.getBounds().width / 2, oSprite.regY = oSprite.getBounds().height /
                2, h.push(oSprite), f.addChild(oSprite), oSprite.visible = !1; for (m = 0; 3 > m; m++)oSprite = createBitmap(s_oSpriteLibrary.getSprite("p2_" + m)), oSprite.y = 50 + oSprite.getBounds().height / 2, oSprite.x = 590 + oSprite.getBounds().width / 2, oSprite.regX = oSprite.getBounds().width / 2, oSprite.regY = oSprite.getBounds().height / 2, l.push(oSprite), f.addChild(oSprite), oSprite.visible = !1; p = [h, l]; m = a.getBounds(); n = new createjs.Shape; n.graphics.beginFill("rgba(255,0,0,1)").drawRect(0, 0, m.width, m.height); n.alpha = .01; q = n.on("click", this.nextRound);
        n.visible = !1; a.addChild(n); B = s_oSpriteLibrary.getSprite("msg_box"); c = new createjs.Container; c.x = CANVAS_WIDTH / 2 - B.width / 2; c.y = 600; m = createBitmap(B); c.addChild(m); H = B.width - 60; E = B.height - 100; m = B.width / 2 - H / 2; B = B.height / 2 - E / 2; g = new CTLText(c, m, B, H, E, 68, "center", "#c84343", PRIMARY_FONT, 1.1, 2, 2, " ", !0, !0, !0, !1)
    }; this.toggleVisibleText = function () { d.setVisible(!d.isVisible()); e.setVisible(!e.isVisible()) }; this.unload = function () { n.off("click", q); s_oStage.removeChild(a) }; this.matchOver = function (E) {
        s_oStage.addChild(c);
        x = !0; f.alpha = .5; this.toggleVisibleText(); g.refreshText(E); (new createjs.Tween.get(c)).to({ y: CANVAS_HEIGHT - 550 }, 600)
    }; this.nextRound = function () { s_oStage.removeChild(c); f.alpha = 1; if (s_bOnSelect || x) s_oGame.restart(); else { n.visible = !1; s_oGame.nextRound(); s_oGameSection.toggleVisibleText(); for (var E = 0; E < h.length; E++)h[E].visible = !1; for (E = 0; E < l.length; E++)l[E].visible = !1; w = !1 } }; this.showThrowes = function (E, m) {
        d.setVisible(!0); r.setVisible(!1); n.visible = !1; h[0].visible = !0; h[0].alpha = 1; l[0].visible = !0; l[0].alpha =
            1; (new createjs.Tween.get(f)).to({ y: -30 }, 200).call(this.playThrow).to({ y: 30 }, 200).call(this.playThrow).to({ y: -30 }, 400).call(this.playThrow).to({ y: 30 }, 200).call(this.playThrow).to({ y: 0 }, 200).call(function () { F._showThrowes(E, m); s_oGame.compareThrowes(); e.setVisible(!0) })
    }; this.playThrow = function () { v.play() }; this._showThrowes = function (E, m) {
        createjs.Tween.removeTweens(f); if (!w) {
            for (var B = 0; B < h.length; B++)h[B].visible = !1, h[B].alpha = 1; for (B = 0; B < l.length; B++)l[B].visible = !1, l[B].alpha = 1; h[E].visible = !0;
            l[m].visible = !0; n.visible = !0
        } w = !0
    }; this.playerWonEffect = function (E) { for (var m = 0; m < p[E].length; m++)(new createjs.Tween.get(p[E][m])).to({ scaleX: 1.2, scaleY: 1.2 }, 200).to({ scaleX: 1, scaleY: 1 }, 200).to({ scaleX: 1.2, scaleY: 1.2 }, 200).to({ scaleX: 1, scaleY: 1 }, 200) }; this.playerLoseEffect = function (E) { for (var m = 20 * Math.random(), B = 0; B < p[E].length; B++)(new createjs.Tween.get(p[E][B])).to({ rotation: m }, 100).to({ rotation: -m, alpha: .5 }, 200).to({ rotation: m }, 100).to({ rotation: -m }, 200).to({ rotation: 0 }, 100) }; this.playerOneChoosing =
        function () { r.setVisible(!0); r.refreshText(TEXT_PLAYER_ONE); b.x = 100; b.y = 20 }; this.playerTwoChoosing = function () { r.refreshText(TEXT_PLAYER_TWO); (new createjs.Tween.get(b)).to({ x: 600 }, 500, createjs.Ease.backInOut) }; this.init(); var F = this
} var s_oGameSection;
function CMatchCount(a, c, b) { var d, e, g, f, h; this.init = function (l, p, n) { g = l; e = createBitmap(s_oSpriteLibrary.getSprite("history_empty")); e.x = f = p; e.y = h = n; g.addChild(e) }; this.reset = function () { g.removeChild(d); g.addChild(e) }; this.setWin = function () { d = createBitmap(s_oSpriteLibrary.getSprite("history_win")); d.x = f; d.y = h; g.removeChild(e); g.addChild(d) }; this.init(a, c, b) }
function CCpuPlayer(a) { var c; this.init = function (b) { c = new CHistoryPanel(728, 359, b, 1) }; this.selectThrow = function (b) { rand = Math.floor(randomFloatBetween(0, 100)); selection = rand < OCCURENCES ? rand > OCCURENCES / 4 ? THROW_MATCHES[b][0] : THROW_MATCHES[b][2] : THROW_MATCHES[b][1]; s_oGame.playerThrow(1, selection) }; this.unload = function () { c.unload() }; this.roundWon = function () { c.win() }; this.hasSelected = function () { }; this.init(a) }
function CSelectThrow(a, c) {
    var b, d, e, g; this.init = function (f, h) { b = new createjs.Container; d = []; for (var l = 0, p, n = 0; 3 > n; n++)oSprite = s_oSpriteLibrary.getSprite("throw_" + n), p = new CGfxButton(l, 120, oSprite, b), p.addEventListenerWithParams(ON_MOUSE_UP, this.setPlayerSelection, this, n), d.push(p), l += 250; b.y = 120; b.x = 340; b.alpha = 0; s_oStage.addChild(b); (new createjs.Tween.get(b)).to({ alpha: 1 }, 300); g = f }; this.unload = function () { for (var f = 0; f < d.length; f++)d[f].unload(); s_oStage.removeChild(b) }; this.show = function () {
        s_bOnSelect =
        !0; b.visible = !0
    }; this.hide = function () { b.visible = !1 }; this.setPlayerSelection = function (f) { e = f; s_oGame.playerThrow(g, e); this.hide(); s_bOnSelect = !1 }; this.getPlayerSelection = function () { if (!e) return e }; this.init(a, c)
}
function CRecordPanel() {
    var a, c, b, d, e; this.init = function () { s_oGame.isMultiPlayer() ? this.initMultiPanel() : this.initSoloPanel() }; this.initSoloPanel = function () {
        a = new createjs.Container; c = createBitmap(s_oSpriteLibrary.getSprite("box_record")); a.addChild(c); var g = a.getBounds(); a.x = 490; a.y = 800; var f = 100, h = g.width / 2 - f / 2; new CTLText(a, h, 5, f, 34, 32, "center", "#fff", PRIMARY_FONT, 1.1, 2, 2, TEXT_RECORD_BOX, !0, !0, !1, !1); f = 180; h = g.width / 2 - f / 2; e = new CTLText(a, h, 50, f, 22, 22, "left", "#fff", PRIMARY_FONT, 1.1, 2, 2, TEXT_MATCHES +
            s_iMatchWon, !0, !0, !1, !1); f = 180; h = g.width / 2 - f / 2; b = new CTLText(a, h, 85, f, 22, 22, "left", "#fff", PRIMARY_FONT, 1.1, 2, 2, TEXT_SCORE + s_oGame.getScore(), !0, !0, !1, !1); f = 180; h = g.width / 2 - f / 2; d = new CTLText(a, h, 115, f, 22, 22, "left", "#fff", PRIMARY_FONT, 1.1, 2, 2, TEXT_YOUR_BEST_SCORE + s_oGame.getBestScore(), !0, !0, !1, !1); this.show(); s_oStage.addChild(a)
    }; this.initMultiPanel = function () {
        a = new createjs.Container; c = createBitmap(s_oSpriteLibrary.getSprite("box_record")); a.addChild(c); var g = a.getBounds(); a.x = 490; a.y = 800; var f =
            100, h = g.width / 2 - f / 2; new CTLText(a, h, 5, f, 34, 32, "center", "#fff", PRIMARY_FONT, 1.1, 2, 2, TEXT_RECORD_BOX, !0, !0, !1, !1); f = 180; h = g.width / 2 - f / 2; e = new CTLText(a, h, 60, f, 30, 28, "left", "#fff", PRIMARY_FONT, 1.1, 2, 2, TEXT_PLAYER_ONE_MATCHES_WON + s_iPlayerOneMatchWon + TEXT_PLAYER_ONE_MATCHES_WON2, !0, !0, !1, !1); f = 180; h = g.width / 2 - f / 2; b = new CTLText(a, h, 110, f, 30, 28, "left", "#fff", PRIMARY_FONT, 1.1, 2, 2, TEXT_PLAYER_TWO_MATCHES_WON + s_iPlayerTwoMatchWon + TEXT_PLAYER_TWO_MATCHES_WON2, !0, !0, !1, !1); this.show(); s_oStage.addChild(a)
    };
    this.show = function () { (new createjs.Tween.get(a)).wait(400).to({ y: 390 }, 600, createjs.Ease.backOut) }; this.updateScore = function () { s_oGame.isMultiPlayer() ? (e.refreshText(TEXT_PLAYER_ONE_MATCHES_WON + s_iPlayerOneMatchWon + TEXT_PLAYER_ONE_MATCHES_WON2), b.refreshText(TEXT_PLAYER_TWO_MATCHES_WON + s_iPlayerTwoMatchWon + TEXT_PLAYER_TWO_MATCHES_WON2)) : (e.refreshText(TEXT_MATCHES + s_iMatchWon), b.refreshText(TEXT_SCORE + s_oGame.getScore()), d.refreshText(TEXT_YOUR_BEST_SCORE + s_oGame.getBestScore())) }; this.init()
}
function CAreYouSurePanel() {
    var a, c, b, d, e, g, f, h = this; this._init = function () {
        e = new createjs.Shape; e.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); e.alpha = 0; g = e.on("click", function () { }); s_oStage.addChild(e); (new createjs.Tween.get(e)).to({ alpha: .7 }, 200); var l = s_oSpriteLibrary.getSprite("msg_box"); a = CANVAS_WIDTH / 2; c = -l.height / 2; f = new createjs.Container; f.x = a; f.y = c; f.regX = l.width / 2; f.regY = l.height / 2; s_oStage.addChild(f); var p = createBitmap(l); f.addChild(p); p = s_oSpriteLibrary.getSprite("but_yes");
        b = new CGfxButton(l.width / 2 + 80, l.height - p.height / 2 - 20, p, f); b.addEventListener(ON_MOUSE_UP, this._onButYes, this); p = s_oSpriteLibrary.getSprite("but_no"); d = new CGfxButton(l.width / 2 - 80, l.height - p.height / 2 - 20, p, f); d.addEventListener(ON_MOUSE_UP, this._onButNo, this); d.disable(); b.disable(); p = l.width - 50; new CTLText(f, l.width / 2 - p / 2, 70, p, 140, 70, "center", "#ab152c", PRIMARY_FONT, 1.1, 2, 2, TEXT_ARE_SURE, !0, !0, !0, !1); (new createjs.Tween.get(f)).to({ y: CANVAS_HEIGHT / 2 }, 200, createjs.Ease.backOut).call(function () {
            d.enable();
            b.enable(); s_oGame.togglePause(); s_oMain.stopUpdateNoBlock()
        })
    }; this._onButYes = function () { s_oMain.startUpdateNoBlock(); d.disable(); b.disable(); (new createjs.Tween.get(e)).to({ alpha: 0 }, 200); (new createjs.Tween.get(f)).to({ y: c }, 400, createjs.Ease.backIn).call(function () { h.unload(); s_oGame.onExit() }) }; this._onButNo = function () { s_oGame.togglePause(); s_oMain.startUpdateNoBlock(); d.disable(); b.disable(); (new createjs.Tween.get(e)).to({ alpha: 0 }, 500); (new createjs.Tween.get(f)).to({ y: c }, 400, createjs.Ease.backIn).call(function () { h.unload() }) };
    this.unload = function () { d.unload(); b.unload(); s_oStage.removeChild(e); s_oStage.removeChild(f); e.off("click", g) }; this._init()
}
function CInterface() {
    var a, c, b, d, e, g, f, h, l, p, n, q, w = null, x = null; this._init = function () {
        var r = s_oSpriteLibrary.getSprite("but_exit"); a = CANVAS_WIDTH - r.width / 2 - 10; c = r.height / 2 + 10; n = new CGfxButton(a, c, r, s_oStage); n.addEventListener(ON_MOUSE_UP, this._onExit, this); if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) {
            var v = s_oSpriteLibrary.getSprite("audio_icon"); f = a - r.width / 2 - v.width / 4 - 10; h = c; l = new CToggle(f, h, v, s_bAudioActive, s_oStage); l.addEventListener(ON_MOUSE_UP, this._onAudioToggle, this); e = f - v.width / 2 - 10;
            g = h
        } else e = a - r.width - 10, g = c; v = window.document; r = v.documentElement; w = r.requestFullscreen || r.mozRequestFullScreen || r.webkitRequestFullScreen || r.msRequestFullscreen; x = v.exitFullscreen || v.mozCancelFullScreen || v.webkitExitFullscreen || v.msExitFullscreen; !1 === ENABLE_FULLSCREEN && (w = !1); r = s_oSpriteLibrary.getSprite("but_credits"); w && screenfull.isEnabled ? (v = s_oSpriteLibrary.getSprite("but_fullscreen"), p = new CToggle(e, g, v, s_bFullscreen, s_oStage), p.addEventListener(ON_MOUSE_UP, this._onFullscreenRelease, this),
            b = e - r.width - 10) : b = e; d = g; q = new CGfxButton(b, c, r, s_oStage); q.addEventListener(ON_MOUSE_UP, this._onHelp, this); this.refreshButtonPos()
    }; this.refreshButtonPos = function () { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || l.setPosition(f - s_iOffsetX, h + s_iOffsetY); w && screenfull.isEnabled && p.setPosition(e - s_iOffsetX, g + s_iOffsetY); n.setPosition(a - s_iOffsetX, c + s_iOffsetY); q.setPosition(b - s_iOffsetX, d + s_iOffsetY) }; this.unload = function () {
        if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) l.unload(), l = null; w && screenfull.isEnabled &&
            p.unload(); q.unload(); n.unload(); s_oInterface = null
    }; this.resetFullscreenBut = function () { p.setActive(s_bFullscreen) }; this._onExit = function () { new CAreYouSurePanel }; this._onAudioToggle = function () { Howler.mute(s_bAudioActive); s_bAudioActive = !s_bAudioActive }; this._onHelp = function () { s_oGame.showHelp() }; this._onFullscreenRelease = function () { s_bFullscreen ? x.call(window.document) : w.call(window.document.documentElement); sizeHandler() }; s_oInterface = this; this._init(); return this
} var s_oInterface = null;
function CToggle(a, c, b, d, e) {
    var g, f, h, l = [], p, n, q; this._init = function (w, x, r, v) { f = []; h = []; var F = new createjs.SpriteSheet({ images: [r], frames: { width: r.width / 2, height: r.height, regX: r.width / 2 / 2, regY: r.height / 2 }, animations: { state_true: [0], state_false: [1] } }); g = v; q = createSprite(F, "state_" + g, r.width / 2 / 2, r.height / 2, r.width / 2, r.height); q.mouseEnabled = !0; q.x = w; q.y = x; q.stop(); q.cursor = "pointer"; e.addChild(q); this._initListener() }; this.unload = function () {
        q.off("mousedown", p); q.off("pressup", n); q.mouseEnabled = !1;
        e.removeChild(q)
    }; this._initListener = function () { p = q.on("mousedown", this.buttonDown); n = q.on("pressup", this.buttonRelease) }; this.addEventListener = function (w, x, r) { f[w] = x; h[w] = r }; this.addEventListenerWithParams = function (w, x, r, v) { f[w] = x; h[w] = r; l = v }; this.setActive = function (w) { g = w; q.gotoAndStop("state_" + g) }; this.buttonRelease = function () { q.scaleX = 1; q.scaleY = 1; playSound("click", 1, !1); g = !g; q.gotoAndStop("state_" + g); f[ON_MOUSE_UP] && f[ON_MOUSE_UP].call(h[ON_MOUSE_UP], l) }; this.buttonDown = function () {
        q.scaleX = .9;
        q.scaleY = .9; f[ON_MOUSE_DOWN] && f[ON_MOUSE_DOWN].call(h[ON_MOUSE_DOWN], l)
    }; this.setPosition = function (w, x) { q.x = w; q.y = x }; this.setVisible = function (w) { q.visible = w }; this.getButtonImage = function () { return q }; this._init(a, c, b, d)
}
function CGfxButton(a, c, b, d) {
    var e, g, f, h, l, p = [], n, q; this._init = function (x, r, v) { q = !0; e = 1; h = []; l = []; n = createBitmap(v); n.x = x; n.y = r; n.cursor = "pointer"; n.regX = v.width / 2; n.regY = v.height / 2; w.addChild(n); this._initListener() }; this.unload = function () { createjs.Tween.removeTweens(n); n.off("mousedown", g); n.off("pressup", f); w.removeChild(n) }; this.setVisible = function (x) { n.visible = x }; this.setScale = function (x) { e = x; n.scaleX = n.scaleY = e }; this._initListener = function () {
        g = n.on("mousedown", this.buttonDown); f = n.on("pressup",
            this.buttonRelease)
    }; this.addEventListener = function (x, r, v) { h[x] = r; l[x] = v }; this.addEventListenerWithParams = function (x, r, v, F) { h[x] = r; l[x] = v; p = F }; this.buttonRelease = function () { q && (n.scaleX = e, n.scaleY = e, h[ON_MOUSE_UP] && h[ON_MOUSE_UP].call(l[ON_MOUSE_UP], p)) }; this.buttonDown = function () { q && (n.scaleX = .9 * e, n.scaleY = .9 * e, playSound("click", 1, !1), h[ON_MOUSE_DOWN] && h[ON_MOUSE_DOWN].call(l[ON_MOUSE_DOWN], p)) }; this.setScale = function (x) { e = x; n.scaleX = x; n.scaleY = x }; this.setPosition = function (x, r) { n.x = x; n.y = r }; this.setRotation =
        function (x) { n.rotation = x }; this.setActive = function (x) { q = x }; this.disable = function () { q = !1 }; this.enable = function () { q = !0 }; this.pulseAnimation = function () { createjs.Tween.get(n, { loop: -1 }).to({ scaleX: 1.1 * e, scaleY: 1.1 * e }, 850, createjs.Ease.quadOut).to({ scaleX: e, scaleY: e }, 650, createjs.Ease.quadIn) }; this.setX = function (x) { n.x = x }; this.setY = function (x) { n.y = x }; this.getButtonImage = function () { return n }; this.getX = function () { return n.x }; this.getY = function () { return n.y }; var w = d; this._init(a, c, b); return this
}
function CMenu() {
    var a, c, b, d, e, g, f, h, l, p, n = null, q = null, w, x, r; this._init = function () {
        w = createBitmap(s_oSpriteLibrary.getSprite("bg_menu")); s_oStage.addChild(w); var v = s_oSpriteLibrary.getSprite("but_play"); f = new CGfxButton(CANVAS_WIDTH / 2, CANVAS_HEIGHT / 2 + 210, v, s_oStage); f.addEventListener(ON_MOUSE_UP, this._onStart, this); f.pulseAnimation(); if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) v = s_oSpriteLibrary.getSprite("audio_icon"), e = CANVAS_WIDTH - v.height / 2 - 10, g = v.height / 2 + 10, x = new CToggle(e, g, v, s_bAudioActive,
            s_oStage), x.addEventListener(ON_MOUSE_UP, this._onAudioToggle, this); v = s_oSpriteLibrary.getSprite("but_credits"); b = v.width / 2 + 10; d = v.height / 2 + 10; h = new CGfxButton(b, d, v, s_oStage); h.addEventListener(ON_MOUSE_UP, this._onCreditsBut, this); v = window.document; var F = v.documentElement; n = F.requestFullscreen || F.mozRequestFullScreen || F.webkitRequestFullScreen || F.msRequestFullscreen; q = v.exitFullscreen || v.mozCancelFullScreen || v.webkitExitFullscreen || v.msExitFullscreen; !1 === ENABLE_FULLSCREEN && (n = !1); n && screenfull.isEnabled &&
                (v = s_oSpriteLibrary.getSprite("but_fullscreen"), a = b + v.width / 2 + 10, c = v.height / 2 + 10, r = new CToggle(a, c, v, s_bFullscreen, s_oStage), r.addEventListener(ON_MOUSE_UP, this._onFullscreenRelease, this)); this.refreshButtonPos(); s_bStorageAvailable || new CMsgBox; v = getItem("best_score"); null !== v && (s_iBestScore = v); l = new createjs.Shape; l.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); p = l.on("click", function () { }); s_oStage.addChild(l); createjs.Tween.get(l).to({ alpha: 0 }, 300).call(function () {
                    l.visible =
                    !1
                })
    }; this.unload = function () { f.unload(); h.unload(); l.off("click", p); if (!1 === DISABLE_SOUND_MOBILE || !1 === s_bMobile) x.unload(), x = null; n && screenfull.isEnabled && r.unload(); s_oMenu = null; createjs.Tween.removeAllTweens(); s_oStage.removeAllChildren() }; this.refreshButtonPos = function () { !1 !== DISABLE_SOUND_MOBILE && !1 !== s_bMobile || x.setPosition(e - s_iOffsetX, s_iOffsetY + g); n && screenfull.isEnabled && r.setPosition(a + s_iOffsetX, c + s_iOffsetY); h.setPosition(b + s_iOffsetX, s_iOffsetY + d) }; this._onStart = function () {
        l.visible =
        !0; createjs.Tween.get(l).to({ alpha: 1 }, 300).call(function () { $(s_oMain).trigger("start_session"); s_oMenu.unload(); s_oMain.gotoGame() })
    }; this._onAudioToggle = function () { Howler.mute(s_bAudioActive); s_bAudioActive = !s_bAudioActive }; this._onCreditsBut = function () { new CCreditsPanel }; this.resetFullscreenBut = function () { n && screenfull.isEnabled && r.setActive(s_bFullscreen) }; this._onFullscreenRelease = function () { s_bFullscreen ? q.call(window.document) : n.call(window.document.documentElement); sizeHandler() }; s_oMenu = this;
    this._init()
} var s_oMenu = null;
function CGame(a) {
    var c, b, d, e, g, f, h, l, p, n, q, w, x; this._init = function (r) { setVolume("soundtrack", SOUNDTRACK_VOLUME_IN_GAME); OCCURENCES = r ? r.victoryOccurences : 50; s_oGame = this; r = createBitmap(s_oSpriteLibrary.getSprite("bg_game")); s_oStage.addChild(r); b = 0; q = n = null; w = p = l = 0; d = !0; new CSelectPlayers; c = new CInterface }; this.initGameSolo = function () { h = !1; e = new CGameSection; d = !1; g = new CPlayer("Player One", 0); f = new CCpuPlayer("CPU"); e.playerOneChoosing(); g.showChoosePanel(); x = new CRecordPanel }; this.initGameMulti =
        function () { h = !0; e = new CGameSection; d = !1; g = new CPlayer("Player One", 0); f = new CPlayer("Player Two", 1); e.playerOneChoosing(); x = new CRecordPanel }; this.isMultiPlayer = function () { return h }; this.showHelp = function () { new CHelpPanel }; this.unload = function () { g && g.unload(); f && f.unload(); e && e.unload(); createjs.Tween.removeAllTweens(); s_oStage.removeAllChildren(); s_oGame = null }; this.setMultiPlayer = function (r) { h = r }; this.getPlayerScore = function (r) { if (0 === r) return l; if (1 === r) return p }; this.nextRound = function () {
            q = n = null;
            e.playerOneChoosing(); h || g.showChoosePanel()
        }; this.playerThrow = function (r, v) { switch (r) { case 0: g.hasSelected(!0); n = v; w = 1; e.playerTwoChoosing(); break; case 1: f.hasSelected(!0), q = v, w = 0, e.showThrowes(n, q) } }; this.togglePause = function () { d = !d }; this.reset = function () { g.unload(); f.unload(); e.unload() }; this.restart = function () {
            this.reset(); c.unload(); h ? (h = !0, e = new CGameSection, q = n = null, w = p = l = 0, d = !1, g = new CPlayer("Player One", 0), f = new CPlayer("Player Two", 1), e.playerOneChoosing()) : (h = !1, e = new CGameSection, q = n =
                null, w = p = l = 0, d = !1, g = new CPlayer("Player One", 0), f = new CCpuPlayer("CPU"), e.playerOneChoosing(), g.showChoosePanel()); c = new CInterface
        }; this.onExit = function () { s_oGame.unload(); s_oMain.gotoMenu(); $(s_oMain).trigger("end_session"); $(s_oMain).trigger("show_interlevel_ad") }; this.increaseScore = function (r) { b += r }; this.getScore = function () { return b }; this.getBestScore = function () { return null !== getItem(SCORE_ITEM_NAME) ? getItem(SCORE_ITEM_NAME) : 0 }; this.toggleCompares = function () { }; this.compareThrowes = function () {
            this.toggleCompares();
            var r = 0; n === THROW_MATCHES[q][1] ? (r = 10 * (s_iMatchWon + 1), g.roundWon(), e.playerWonEffect(0), e.playerLoseEffect(1), l++, playSound("round_won", .2, !1)) : n === THROW_MATCHES[q][0] && (r = -5, e.playerWonEffect(1), e.playerLoseEffect(0), f.roundWon(), p++, h ? playSound("round_won", .2, !1) : playSound("round_lost", .2, !1)); n === q && (r = 0, e.playerWonEffect(0), e.playerWonEffect(1), g.roundWon(), f.roundWon(), l++, p++, playSound("round_won", .2, !1)); this.increaseScore(r); 3 !== l && 3 !== p || this.matchOver(); x.updateScore()
        }; this.matchOver = function () {
            h ?
                (d = !0, l > p ? (e.matchOver(TEXT_PLAYER_ONE_WON), s_iPlayerOneMatchWon++) : l < p ? (e.matchOver(TEXT_PLAYER_TWO_WON), s_iPlayerTwoMatchWon++) : e.matchOver(TEXT_MATCH_DRAWN)) : (d = !0, l > p ? (s_iMatchWon++, b > this.getBestScore() && (saveItem(SCORE_ITEM_NAME, b), $(s_oMain).trigger("save_score", b)), x.updateScore(), e.matchOver(TEXT_MATCH_WON)) : l < p ? (s_iMatchWon = 0, e.matchOver(TEXT_MATCH_LOST), b = 0) : l === p && e.matchOver(TEXT_MATCH_DRAWN)); x.updateScore()
        }; this.soloGameUpdate = function () { 1 === w && (f.selectThrow(n), this.toggleCompares()) };
    this.multiGameUpdate = function () { if (null !== n && null !== q) this.toggleCompares(); else switch (w) { case 0: g.showChoosePanel(); break; case 1: f.showChoosePanel() } }; this.getTurn = function () { return w }; this.showThrowes = function () { e.showThrowes(n, q) }; this.update = function () { d || (!1 === h ? this.soloGameUpdate() : h && this.multiGameUpdate()) }; this._init(a)
} var s_oGame = null, s_bOnSelect, s_iMatchWon = 0, s_iPlayerOneMatchWon = 0, s_iPlayerTwoMatchWon = 0;
function CCreditsPanel() {
    var a, c, b, d, e, g, f; this._init = function () {
        d = new createjs.Shape; d.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); d.alpha = 0; s_oStage.addChild(d); (new createjs.Tween.get(d)).to({ alpha: .7 }, 500); g = new createjs.Shape; g.graphics.beginFill("#0f0f0f").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); g.alpha = .01; e = g.on("click", this._onLogoButRelease); s_oStage.addChild(g); var h = s_oSpriteLibrary.getSprite("msg_box"); f = new createjs.Container; f.regX = h.width / 2; f.regY = h.height /
            2; f.x = CANVAS_WIDTH / 2; f.y = CANVAS_HEIGHT + h.height / 2; s_oStage.addChild(f); a = createBitmap(h); f.addChild(a); var l = s_oSpriteLibrary.getSprite("but_exit"); b = new CGfxButton(h.width - l.width / 2 - 10, l.height / 2, l, f); b.addEventListener(ON_MOUSE_UP, this.unload, this); l = s_oSpriteLibrary.getSprite("logo_ctl"); c = createBitmap(l); c.regX = l.width / 2; c.regY = l.height / 2; c.x = h.width / 2; c.y = h.height / 2 + 20; f.addChild(c); var p = h.width - 50, n = h.width / 2 - p / 2, q = c.y - l.height / 2 - 70; new CTLText(f, n, q, p, 70, 50, "center", "#cc0000", PRIMARY_FONT,
                1.1, 2, 2, TEXT_CREDITS_DEVELOPED, !0, !0, !1, !1); p = h.width - 50; n = h.width / 2 - p / 2; q = c.y + l.height / 2; new CTLText(f, n, q, p, 70, 50, "center", "#cc0000", PRIMARY_FONT, 1.1, 2, 2, "www.taptapgames.fun", !0, !0, !1, !1); (new createjs.Tween.get(f)).to({ y: CANVAS_HEIGHT / 2 }, 1E3, createjs.Ease.quintOut)
    }; this.unload = function () { g.off("click", e); b.unload(); b = null; s_oStage.removeChild(d); s_oStage.removeChild(f); s_oStage.removeChild(g) }; this._onLogoButRelease = function () { window.open("http://www.taptapgames.fun", "_blank") };
    this._init()
}
function CHelpPanel() {
    var a, c, b, d, e, g, f, h, l, p, n, q, w, x, r, v; this._init = function () {
        v = 1; p = new createjs.Container; p.x = -600; n = new createjs.Container; var F = s_oSpriteLibrary.getSprite("help_panel"); l = createBitmap(F); l.x = CANVAS_WIDTH / 2 - 320; l.y = 100; f = new createjs.Shape; f.graphics.beginFill("black").drawRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT); f.alpha = .5; p.addChild(l); p.addChild(n); s_oStage.addChild(f); s_oStage.addChild(p); this.initHelpPage1(); F = s_oSpriteLibrary.getSprite("but_left"); a = .5 * CANVAS_WIDTH - F.width / 2 -
            260; c = .5 * CANVAS_HEIGHT + 150; w = new CGfxButton(a, c, F, p); w.addEventListener(ON_MOUSE_UP, this._onBack, this); F = s_oSpriteLibrary.getSprite("but_right"); b = .5 * CANVAS_WIDTH + F.width / 2 + 260; d = .5 * CANVAS_HEIGHT + 150; q = new CGfxButton(b, d, F, p); q.addEventListener(ON_MOUSE_UP, this._onContinue, this); F = s_oSpriteLibrary.getSprite("but_skip"); e = .5 * CANVAS_WIDTH; g = .5 * CANVAS_HEIGHT + 190; x = new CGfxButton(e, g, F, p); x.addEventListener(ON_MOUSE_UP, this._onExitHelp, this); h = f.on("click", function () { }); n.x = 290; n.y = 230; this.show()
    }; this.initHelpPage1 =
        function () { var F = 300; new CTLText(n, 300 - F / 2, -85, F, 44, 42, "center", "#c84343", PRIMARY_FONT, 1.1, 2, 2, TEXT_HELP_TITLE2, !0, !0, !1, !1); F = 595; new CTLText(n, 300 - F / 2, -20, F, 200, 28, "left", "#c84343", PRIMARY_FONT, 1.1, 2, 2, TEXT_GAME_RULES, !0, !0, !0, !1) }; this.initHelpPage2 = function () {
            r = createBitmap(s_oSpriteLibrary.getSprite("help_content")); n.addChild(r); new CTLText(n, 150, -85, 300, 44, 42, "center", "#c84343", PRIMARY_FONT, 1.1, 2, 2, TEXT_HELP_TITLE1, !0, !0, !1, !1); new CTLText(n, 5, -42, 180, 44, 38, "left", "#c84343", PRIMARY_FONT, 1.1,
                2, 2, TEXT_ROCK_WINS, !0, !0, !1, !1); new CTLText(n, 5, 40, 180, 44, 38, "left", "#c84343", PRIMARY_FONT, 1.1, 2, 2, TEXT_ROCK_LOSE, !0, !0, !1, !1); new CTLText(n, 5, 122, 180, 44, 38, "left", "#c84343", PRIMARY_FONT, 1.1, 2, 2, TEXT_ROCK_DRAW, !0, !0, !1, !1); new CTLText(n, 215, -42, 180, 44, 38, "left", "#c84343", PRIMARY_FONT, 1.1, 2, 2, TEXT_PAPER_WINS, !0, !0, !1, !1); new CTLText(n, 215, 40, 180, 44, 38, "left", "#c84343", PRIMARY_FONT, 1.1, 2, 2, TEXT_PAPER_LOSE, !0, !0, !1, !1); new CTLText(n, 215, 122, 180, 44, 38, "left", "#c84343", PRIMARY_FONT, 1.1, 2, 2, TEXT_PAPER_DRAW,
                    !0, !0, !1, !1); new CTLText(n, 425, -42, 180, 44, 38, "left", "#c84343", PRIMARY_FONT, 1.1, 2, 2, TEXT_SCISSORS_WINS, !0, !0, !1, !1); new CTLText(n, 425, 40, 180, 44, 38, "left", "#c84343", PRIMARY_FONT, 1.1, 2, 2, TEXT_SCISSORS_LOSE, !0, !0, !1, !1); new CTLText(n, 425, 122, 180, 44, 38, "left", "#c84343", PRIMARY_FONT, 1.1, 2, 2, TEXT_SCISSORS_DRAW, !0, !0, !1, !1)
        }; this._onBack = function () { v--; 1 > v && (v = 1); this.removePage() }; this.removePage = function () { n.removeAllChildren(); switch (v) { case 1: this.initHelpPage1(); break; case 2: this.initHelpPage2() } }; this._onContinue =
            function () { v++; 2 < v && (v = 2); this.removePage() }; this.unload = function () { f.off("click", h); s_oStage.removeChild(p, f); q.unload(); w.unload(); x.unload() }; this.show = function () { (new createjs.Tween.get(p)).to({ x: 0 }, 1200, createjs.Ease.elasticOut) }; this._onExitHelp = function () { this.unload(); setTimeout(s_oGame._onExitHelp, 200) }; this._init()
} function extractHostname(a) { a = -1 < a.indexOf("://") ? a.split("/")[2] : a.split("/")[0]; a = a.split(":")[0]; return a = a.split("?")[0] }
function extractRootDomain(a) { a = extractHostname(a); var c = a.split("."), b = c.length; 2 < b && (a = c[b - 2] + "." + c[b - 1]); return a }
var getClosestTop = function () { var a = window, c = !1; try { for (; a.parent.document !== a.document;)if (a.parent.document) a = a.parent; else { c = !0; break } } catch (b) { c = !0 } return { topFrame: a, err: c } }, getBestPageUrl = function (a) { var c = a.topFrame, b = ""; if (a.err) try { try { b = window.top.location.href } catch (e) { var d = window.location.ancestorOrigins; b = d[d.length - 1] } } catch (e) { b = c.document.referrer } else b = c.location.href; return b }, TOPFRAMEOBJ = getClosestTop(), PAGE_URL = getBestPageUrl(TOPFRAMEOBJ);
function seekAndDestroy() { for (var a = extractRootDomain(PAGE_URL), c = [String.fromCharCode(99, 111, 100, 101, 116, 104, 105, 115, 108, 97, 98, 46, 99, 111, 109), String.fromCharCode(101, 110, 118, 97, 116, 111, 46, 99, 111, 109), String.fromCharCode(99, 111, 100, 101, 99, 97, 110, 121, 111, 110, 46, 99, 111, 109), String.fromCharCode(99, 111, 100, 101, 99, 97, 110, 121, 111, 110, 46, 110, 101, 116)], b = 0; b < c.length; b++)if (c[b] === a) return !0; return !1 };